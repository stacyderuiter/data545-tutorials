<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>33&nbsp; Models for data bounded between 0 and 1 â€“ DATA 545 Tutorial</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./hier1.html" rel="next">
<link href="./quasibinomial.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-e22fbe6e69edb8577f7b7bd0719516f0.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script src="site_libs/quarto-contrib/live-runtime/live-runtime.js" type="module"></script>
<link href="site_libs/quarto-contrib/live-runtime/live-runtime.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script type="module" src="site_libs/quarto-ojs/quarto-ojs-runtime.js"></script>
<link href="site_libs/quarto-ojs/quarto-ojs.css" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="_include/webex.css">
</head>

<body class="nav-sidebar floating quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./quasibinomial.html">More Fun Between 0-1</a></li><li class="breadcrumb-item"><a href="./beta.html"><span class="chapter-number">33</span>&nbsp; <span class="chapter-title">Models for data bounded between 0 and 1</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">DATA 545 Tutorial</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/stacyderuiter/data545-tutorials/" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="false">
 <span class="menu-text">Getting Started</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./install-r.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Installation</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./r-basics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">R Basics</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./how-to-quarto.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Using Quarto</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./r-results.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">R Results in Quarto Text</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./math-notation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Math Notation in Quarto</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./graphics-design.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Designing Effective Visualizations</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./graph-design-no-junk.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">What is <em>Necessary</em>?</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./graph-design-color.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Color</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./graph-design-text-elements.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Text Elements</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./graph-design-summary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Summary</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./graphics-choose.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Choose a Graph Type</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./graphics-choose-var-types.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Variable Types</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./graphics-choose-one-cat.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Gallery: One Categorical Variable</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./graphics-choose-one-quant.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Gallery: One Quantitative Variable</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./graphics-choose-multiple-cat.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Gallery: 2-3 Categorical Variables</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./graphics-choose-multiple-quant.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Gallery: Multiple Quantitative Variables</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./graphics-choose-cat-quant-mix.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Gallery: Mixed Quantitative + Categorical</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./graphics-code.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Visualization with ggformula</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./graphics-code-ggformula.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">ggformula and Formulas</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./graphics-code-data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Datasets Used</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./graphics-code-plots.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Code Examples</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./design-intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Study Design &amp; Model Planning</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./design.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Sample and Study Design</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./plan.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Model Planning for Inference</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="false">
 <span class="menu-text">Multiple Linear Regression</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lm-fit.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Fitting Linear Models in R</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lm-assess.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Assessment for Linear Models</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lm-interp.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Interpretation and Inference for Regression Models</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lm-interp-more.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Selection and Inference for Regression Models</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="false">
 <span class="menu-text">Interactions</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./interactions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Interactions in Regression Models</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" role="navigation" aria-expanded="false">
 <span class="menu-text">Likelihood</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./mle.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Maximum Likelihood Estimation</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" role="navigation" aria-expanded="false">
 <span class="menu-text">Count Regression</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-9" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./count-regression-1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">Regression for Count Responses: Formulation</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./count-regression-2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">Interpreting Count Regression</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" role="navigation" aria-expanded="false">
 <span class="menu-text">Binary Regression</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-10" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./binary-regression-1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">29</span>&nbsp; <span class="chapter-title">Regression for Binary Responses (one trial per row)</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./binary-regression-2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">30</span>&nbsp; <span class="chapter-title">Binary Regression <em>Another Way</em>: Multiple Trials Per Row</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-11" role="navigation" aria-expanded="false">
 <span class="menu-text">Zero Inflation</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-11" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-11" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./zi-od.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">31</span>&nbsp; <span class="chapter-title">Zero Inflation for Overdispersed Counts</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-12" role="navigation" aria-expanded="true">
 <span class="menu-text">More Fun Between 0-1</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-12" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-12" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./quasibinomial.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">32</span>&nbsp; <span class="chapter-title">Models for Overdispered Binary Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./beta.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">33</span>&nbsp; <span class="chapter-title">Models for data bounded between 0 and 1</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-13" role="navigation" aria-expanded="false">
 <span class="menu-text">Hierarchical Models</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-13" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-13" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./hier1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">34</span>&nbsp; <span class="chapter-title">Hierarchical Models - Introduction</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./hier2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">35</span>&nbsp; <span class="chapter-title">Hierarchical Models - Interpretation &amp; Prediction</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-14" role="navigation" aria-expanded="false">
 <span class="menu-text">Generalized Additive Models (GAMs)</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-14" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-14" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./gams1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">36</span>&nbsp; <span class="chapter-title">Generalized Additive Models - Introduction</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./gams2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">37</span>&nbsp; <span class="chapter-title">Generalized Additive Models - Assessment &amp; Interpretation</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-15" role="navigation" aria-expanded="false">
 <span class="menu-text">Generalized Estimating Equations (GEEs)</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-15" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-15" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./gees.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">38</span>&nbsp; <span class="chapter-title">Generalized Estimating Equations (GEEs)</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#section-learning-outcomes" id="toc-section-learning-outcomes" class="nav-link active" data-scroll-target="#section-learning-outcomes"><span class="header-section-number">33.1</span> Section Learning Outcomes</a></li>
  <li><a href="#text-reference" id="toc-text-reference" class="nav-link" data-scroll-target="#text-reference"><span class="header-section-number">33.2</span> Text Reference</a></li>
  <li><a href="#data-bounded-0-1" id="toc-data-bounded-0-1" class="nav-link" data-scroll-target="#data-bounded-0-1"><span class="header-section-number">33.3</span> Data bounded 0-1</a>
  <ul class="collapse">
  <li><a href="#examples" id="toc-examples" class="nav-link" data-scroll-target="#examples">Examples</a></li>
  </ul></li>
  <li><a href="#hiv-data" id="toc-hiv-data" class="nav-link" data-scroll-target="#hiv-data"><span class="header-section-number">33.4</span> HIV Data</a>
  <ul class="collapse">
  <li><a href="#research-questions" id="toc-research-questions" class="nav-link" data-scroll-target="#research-questions">Research Questions</a></li>
  <li><a href="#sample-collection" id="toc-sample-collection" class="nav-link" data-scroll-target="#sample-collection">Sample Collection</a></li>
  <li><a href="#experiments" id="toc-experiments" class="nav-link" data-scroll-target="#experiments">Experiments</a></li>
  <li><a href="#the-actual-data" id="toc-the-actual-data" class="nav-link" data-scroll-target="#the-actual-data">The Actual Data</a></li>
  </ul></li>
  <li><a href="#why-not-lm" id="toc-why-not-lm" class="nav-link" data-scroll-target="#why-not-lm"><span class="header-section-number">33.5</span> Why not <code>lm()</code>?</a></li>
  <li><a href="#which-probability-distribution" id="toc-which-probability-distribution" class="nav-link" data-scroll-target="#which-probability-distribution"><span class="header-section-number">33.6</span> Which Probability Distribution?</a></li>
  <li><a href="#regression-equation" id="toc-regression-equation" class="nav-link" data-scroll-target="#regression-equation"><span class="header-section-number">33.7</span> Regression Equation</a></li>
  <li><a href="#beta-model-in-r" id="toc-beta-model-in-r" class="nav-link" data-scroll-target="#beta-model-in-r"><span class="header-section-number">33.8</span> Beta model in R</a></li>
  <li><a href="#conditions" id="toc-conditions" class="nav-link" data-scroll-target="#conditions"><span class="header-section-number">33.9</span> Conditions</a></li>
  <li><a href="#assessment" id="toc-assessment" class="nav-link" data-scroll-target="#assessment"><span class="header-section-number">33.10</span> Assessment</a></li>
  <li><a href="#aside-fix" id="toc-aside-fix" class="nav-link" data-scroll-target="#aside-fix"><span class="header-section-number">33.11</span> Aside: fix</a></li>
  <li><a href="#selection" id="toc-selection" class="nav-link" data-scroll-target="#selection"><span class="header-section-number">33.12</span> Selection</a></li>
  <li><a href="#prediction-plots" id="toc-prediction-plots" class="nav-link" data-scroll-target="#prediction-plots"><span class="header-section-number">33.13</span> Prediction Plots</a>
  <ul class="collapse">
  <li><a href="#the-math" id="toc-the-math" class="nav-link" data-scroll-target="#the-math">The math!</a></li>
  <li><a href="#official-interpretation" id="toc-official-interpretation" class="nav-link" data-scroll-target="#official-interpretation">Official Interpretation</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/stacyderuiter/data545-tutorials/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li><li><a href="https://github.com/stacyderuiter/data545-tutorials/edit/main/beta.qmd" class="toc-action"><i class="bi empty"></i>Edit this page</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./quasibinomial.html">More Fun Between 0-1</a></li><li class="breadcrumb-item"><a href="./beta.html"><span class="chapter-number">33</span>&nbsp; <span class="chapter-title">Models for data bounded between 0 and 1</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">33</span>&nbsp; <span class="chapter-title">Models for data bounded between 0 and 1</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<div class="cell" data-layout-align="center" data-setup="true" data-exercise="[&quot;figure-1d&quot;,&quot;hiv-lm&quot;,&quot;bridge-ex&quot;,&quot;beta-model&quot;,&quot;scaled-res&quot;,&quot;beta-acf&quot;,&quot;averaged-beta&quot;,&quot;anova-prac&quot;]">
<script type="exercise-setup-figure-1d-contents">
eyJhdHRyIjp7ImF1dG9ydW4iOmZhbHNlLCJlY2hvIjpmYWxzZSwiZWRpdCI6ZmFsc2UsImV2YWwiOnRydWUsImV4ZXJjaXNlIjpbImZpZ3VyZS0xZCIsImhpdi1sbSIsImJyaWRnZS1leCIsImJldGEtbW9kZWwiLCJzY2FsZWQtcmVzIiwiYmV0YS1hY2YiLCJhdmVyYWdlZC1iZXRhIiwiYW5vdmEtcHJhYyJdLCJpbmNsdWRlIjpmYWxzZSwib3V0cHV0IjpmYWxzZSwic2V0dXAiOnRydWV9LCJjb2RlIjoiXG5cbmxpYnJhcnkodGlkeXZlcnNlKVxubGlicmFyeShnbG1tVE1CKVxubGlicmFyeShnZ2Zvcm11bGEpXG5saWJyYXJ5KGdnZWZmZWN0cylcbmxpYnJhcnkoREhBUk1hKVxuXG50aGVtZV9zZXQodGhlbWVfYncoYmFzZV9zaXplPTE2KSlcblxua25pdHI6Om9wdHNfY2h1bmskc2V0KFxuICBlY2hvID0gRkFMU0UsXG4gIGZpZy5hbGlnbiA9IFwiY2VudGVyXCIsXG4gIGZpZy53aWR0aCA9IDYsIGZpZy5oZWlnaHQgPSAyLjUpXG5cbmhpdl9tZW1vcnlfbmFpdmUgPC0gcmVhZF9leGNlbCgnZGF0YS8xRC1NZW1vcnkgTmFpdmUueGxzeCcpIHw+XG4gIG11dGF0ZShJbmZSYXRlUHJvcCA9IEluZlJhdGVzIC8gMTAwLFxuICAgICAgICAgSW5mUmF0ZVByb3AgPSBJbmZSYXRlUHJvcCArIDFlLTEwLFxuICAgICAgICAgQ2VsbFR5cGUgPSBmYWN0b3IoQ2VsbFR5cGUpLFxuICAgICAgICAgQ2VsbFR5cGUgPSBmY3RfcmVsZXZlbChDZWxsVHlwZSwgJ1Jlc3RpbmcnKSlcblxuYmV0YV9tb2RlbCA8LSBnbG1tVE1CKEluZlJhdGVQcm9wIH4gQ2VsbFR5cGUgKyBNb3JOICsgRG9ub3IgLFxuICAgICAgICAgICAgICAgZmFtaWx5ID0gYmV0YV9mYW1pbHkobGluayA9ICdsb2dpdCcpLFxuICAgICAgICAgICAgICAgZGF0YSA9IGhpdl9tZW1vcnlfbmFpdmUpXG5cbmhpdl9tZW1vcnlfbmFpdmUyIDwtIGhpdl9tZW1vcnlfbmFpdmUgfD5cbiAgZ3JvdXBfYnkoRG9ub3IsIENlbGxUeXBlLCBNb3JOKSB8PlxuICBzdW1tYXJpc2UoTWVhbkluZlJhdGVQcm9wID0gbWVhbihJbmZSYXRlUHJvcCksIC5ncm91cHMgPSAnZHJvcCcpXG5cbmJldGFfbW9kZWwyIDwtIGdsbW1UTUIoTWVhbkluZlJhdGVQcm9wIH4gQ2VsbFR5cGUgKyBNb3JOICsgRG9ub3IgLFxuICAgICAgICAgICAgICAgZmFtaWx5ID0gYmV0YV9mYW1pbHkobGluayA9ICdsb2dpdCcpLFxuICAgICAgICAgICAgICAgZGF0YSA9IGhpdl9tZW1vcnlfbmFpdmUyKVxuXG5icmlkZ2VzIDwtIHJlYWQuY3N2KFwiZGF0YS9icmlkZ2VzLmNzdlwiKSJ9
</script>
<script type="exercise-setup-hiv-lm-contents">
eyJhdHRyIjp7ImF1dG9ydW4iOmZhbHNlLCJlY2hvIjpmYWxzZSwiZWRpdCI6ZmFsc2UsImV2YWwiOnRydWUsImV4ZXJjaXNlIjpbImZpZ3VyZS0xZCIsImhpdi1sbSIsImJyaWRnZS1leCIsImJldGEtbW9kZWwiLCJzY2FsZWQtcmVzIiwiYmV0YS1hY2YiLCJhdmVyYWdlZC1iZXRhIiwiYW5vdmEtcHJhYyJdLCJpbmNsdWRlIjpmYWxzZSwib3V0cHV0IjpmYWxzZSwic2V0dXAiOnRydWV9LCJjb2RlIjoiXG5cbmxpYnJhcnkodGlkeXZlcnNlKVxubGlicmFyeShnbG1tVE1CKVxubGlicmFyeShnZ2Zvcm11bGEpXG5saWJyYXJ5KGdnZWZmZWN0cylcbmxpYnJhcnkoREhBUk1hKVxuXG50aGVtZV9zZXQodGhlbWVfYncoYmFzZV9zaXplPTE2KSlcblxua25pdHI6Om9wdHNfY2h1bmskc2V0KFxuICBlY2hvID0gRkFMU0UsXG4gIGZpZy5hbGlnbiA9IFwiY2VudGVyXCIsXG4gIGZpZy53aWR0aCA9IDYsIGZpZy5oZWlnaHQgPSAyLjUpXG5cbmhpdl9tZW1vcnlfbmFpdmUgPC0gcmVhZF9leGNlbCgnZGF0YS8xRC1NZW1vcnkgTmFpdmUueGxzeCcpIHw+XG4gIG11dGF0ZShJbmZSYXRlUHJvcCA9IEluZlJhdGVzIC8gMTAwLFxuICAgICAgICAgSW5mUmF0ZVByb3AgPSBJbmZSYXRlUHJvcCArIDFlLTEwLFxuICAgICAgICAgQ2VsbFR5cGUgPSBmYWN0b3IoQ2VsbFR5cGUpLFxuICAgICAgICAgQ2VsbFR5cGUgPSBmY3RfcmVsZXZlbChDZWxsVHlwZSwgJ1Jlc3RpbmcnKSlcblxuYmV0YV9tb2RlbCA8LSBnbG1tVE1CKEluZlJhdGVQcm9wIH4gQ2VsbFR5cGUgKyBNb3JOICsgRG9ub3IgLFxuICAgICAgICAgICAgICAgZmFtaWx5ID0gYmV0YV9mYW1pbHkobGluayA9ICdsb2dpdCcpLFxuICAgICAgICAgICAgICAgZGF0YSA9IGhpdl9tZW1vcnlfbmFpdmUpXG5cbmhpdl9tZW1vcnlfbmFpdmUyIDwtIGhpdl9tZW1vcnlfbmFpdmUgfD5cbiAgZ3JvdXBfYnkoRG9ub3IsIENlbGxUeXBlLCBNb3JOKSB8PlxuICBzdW1tYXJpc2UoTWVhbkluZlJhdGVQcm9wID0gbWVhbihJbmZSYXRlUHJvcCksIC5ncm91cHMgPSAnZHJvcCcpXG5cbmJldGFfbW9kZWwyIDwtIGdsbW1UTUIoTWVhbkluZlJhdGVQcm9wIH4gQ2VsbFR5cGUgKyBNb3JOICsgRG9ub3IgLFxuICAgICAgICAgICAgICAgZmFtaWx5ID0gYmV0YV9mYW1pbHkobGluayA9ICdsb2dpdCcpLFxuICAgICAgICAgICAgICAgZGF0YSA9IGhpdl9tZW1vcnlfbmFpdmUyKVxuXG5icmlkZ2VzIDwtIHJlYWQuY3N2KFwiZGF0YS9icmlkZ2VzLmNzdlwiKSJ9
</script>
<script type="exercise-setup-bridge-ex-contents">
eyJhdHRyIjp7ImF1dG9ydW4iOmZhbHNlLCJlY2hvIjpmYWxzZSwiZWRpdCI6ZmFsc2UsImV2YWwiOnRydWUsImV4ZXJjaXNlIjpbImZpZ3VyZS0xZCIsImhpdi1sbSIsImJyaWRnZS1leCIsImJldGEtbW9kZWwiLCJzY2FsZWQtcmVzIiwiYmV0YS1hY2YiLCJhdmVyYWdlZC1iZXRhIiwiYW5vdmEtcHJhYyJdLCJpbmNsdWRlIjpmYWxzZSwib3V0cHV0IjpmYWxzZSwic2V0dXAiOnRydWV9LCJjb2RlIjoiXG5cbmxpYnJhcnkodGlkeXZlcnNlKVxubGlicmFyeShnbG1tVE1CKVxubGlicmFyeShnZ2Zvcm11bGEpXG5saWJyYXJ5KGdnZWZmZWN0cylcbmxpYnJhcnkoREhBUk1hKVxuXG50aGVtZV9zZXQodGhlbWVfYncoYmFzZV9zaXplPTE2KSlcblxua25pdHI6Om9wdHNfY2h1bmskc2V0KFxuICBlY2hvID0gRkFMU0UsXG4gIGZpZy5hbGlnbiA9IFwiY2VudGVyXCIsXG4gIGZpZy53aWR0aCA9IDYsIGZpZy5oZWlnaHQgPSAyLjUpXG5cbmhpdl9tZW1vcnlfbmFpdmUgPC0gcmVhZF9leGNlbCgnZGF0YS8xRC1NZW1vcnkgTmFpdmUueGxzeCcpIHw+XG4gIG11dGF0ZShJbmZSYXRlUHJvcCA9IEluZlJhdGVzIC8gMTAwLFxuICAgICAgICAgSW5mUmF0ZVByb3AgPSBJbmZSYXRlUHJvcCArIDFlLTEwLFxuICAgICAgICAgQ2VsbFR5cGUgPSBmYWN0b3IoQ2VsbFR5cGUpLFxuICAgICAgICAgQ2VsbFR5cGUgPSBmY3RfcmVsZXZlbChDZWxsVHlwZSwgJ1Jlc3RpbmcnKSlcblxuYmV0YV9tb2RlbCA8LSBnbG1tVE1CKEluZlJhdGVQcm9wIH4gQ2VsbFR5cGUgKyBNb3JOICsgRG9ub3IgLFxuICAgICAgICAgICAgICAgZmFtaWx5ID0gYmV0YV9mYW1pbHkobGluayA9ICdsb2dpdCcpLFxuICAgICAgICAgICAgICAgZGF0YSA9IGhpdl9tZW1vcnlfbmFpdmUpXG5cbmhpdl9tZW1vcnlfbmFpdmUyIDwtIGhpdl9tZW1vcnlfbmFpdmUgfD5cbiAgZ3JvdXBfYnkoRG9ub3IsIENlbGxUeXBlLCBNb3JOKSB8PlxuICBzdW1tYXJpc2UoTWVhbkluZlJhdGVQcm9wID0gbWVhbihJbmZSYXRlUHJvcCksIC5ncm91cHMgPSAnZHJvcCcpXG5cbmJldGFfbW9kZWwyIDwtIGdsbW1UTUIoTWVhbkluZlJhdGVQcm9wIH4gQ2VsbFR5cGUgKyBNb3JOICsgRG9ub3IgLFxuICAgICAgICAgICAgICAgZmFtaWx5ID0gYmV0YV9mYW1pbHkobGluayA9ICdsb2dpdCcpLFxuICAgICAgICAgICAgICAgZGF0YSA9IGhpdl9tZW1vcnlfbmFpdmUyKVxuXG5icmlkZ2VzIDwtIHJlYWQuY3N2KFwiZGF0YS9icmlkZ2VzLmNzdlwiKSJ9
</script>
<script type="exercise-setup-beta-model-contents">
eyJhdHRyIjp7ImF1dG9ydW4iOmZhbHNlLCJlY2hvIjpmYWxzZSwiZWRpdCI6ZmFsc2UsImV2YWwiOnRydWUsImV4ZXJjaXNlIjpbImZpZ3VyZS0xZCIsImhpdi1sbSIsImJyaWRnZS1leCIsImJldGEtbW9kZWwiLCJzY2FsZWQtcmVzIiwiYmV0YS1hY2YiLCJhdmVyYWdlZC1iZXRhIiwiYW5vdmEtcHJhYyJdLCJpbmNsdWRlIjpmYWxzZSwib3V0cHV0IjpmYWxzZSwic2V0dXAiOnRydWV9LCJjb2RlIjoiXG5cbmxpYnJhcnkodGlkeXZlcnNlKVxubGlicmFyeShnbG1tVE1CKVxubGlicmFyeShnZ2Zvcm11bGEpXG5saWJyYXJ5KGdnZWZmZWN0cylcbmxpYnJhcnkoREhBUk1hKVxuXG50aGVtZV9zZXQodGhlbWVfYncoYmFzZV9zaXplPTE2KSlcblxua25pdHI6Om9wdHNfY2h1bmskc2V0KFxuICBlY2hvID0gRkFMU0UsXG4gIGZpZy5hbGlnbiA9IFwiY2VudGVyXCIsXG4gIGZpZy53aWR0aCA9IDYsIGZpZy5oZWlnaHQgPSAyLjUpXG5cbmhpdl9tZW1vcnlfbmFpdmUgPC0gcmVhZF9leGNlbCgnZGF0YS8xRC1NZW1vcnkgTmFpdmUueGxzeCcpIHw+XG4gIG11dGF0ZShJbmZSYXRlUHJvcCA9IEluZlJhdGVzIC8gMTAwLFxuICAgICAgICAgSW5mUmF0ZVByb3AgPSBJbmZSYXRlUHJvcCArIDFlLTEwLFxuICAgICAgICAgQ2VsbFR5cGUgPSBmYWN0b3IoQ2VsbFR5cGUpLFxuICAgICAgICAgQ2VsbFR5cGUgPSBmY3RfcmVsZXZlbChDZWxsVHlwZSwgJ1Jlc3RpbmcnKSlcblxuYmV0YV9tb2RlbCA8LSBnbG1tVE1CKEluZlJhdGVQcm9wIH4gQ2VsbFR5cGUgKyBNb3JOICsgRG9ub3IgLFxuICAgICAgICAgICAgICAgZmFtaWx5ID0gYmV0YV9mYW1pbHkobGluayA9ICdsb2dpdCcpLFxuICAgICAgICAgICAgICAgZGF0YSA9IGhpdl9tZW1vcnlfbmFpdmUpXG5cbmhpdl9tZW1vcnlfbmFpdmUyIDwtIGhpdl9tZW1vcnlfbmFpdmUgfD5cbiAgZ3JvdXBfYnkoRG9ub3IsIENlbGxUeXBlLCBNb3JOKSB8PlxuICBzdW1tYXJpc2UoTWVhbkluZlJhdGVQcm9wID0gbWVhbihJbmZSYXRlUHJvcCksIC5ncm91cHMgPSAnZHJvcCcpXG5cbmJldGFfbW9kZWwyIDwtIGdsbW1UTUIoTWVhbkluZlJhdGVQcm9wIH4gQ2VsbFR5cGUgKyBNb3JOICsgRG9ub3IgLFxuICAgICAgICAgICAgICAgZmFtaWx5ID0gYmV0YV9mYW1pbHkobGluayA9ICdsb2dpdCcpLFxuICAgICAgICAgICAgICAgZGF0YSA9IGhpdl9tZW1vcnlfbmFpdmUyKVxuXG5icmlkZ2VzIDwtIHJlYWQuY3N2KFwiZGF0YS9icmlkZ2VzLmNzdlwiKSJ9
</script>
<script type="exercise-setup-scaled-res-contents">
eyJhdHRyIjp7ImF1dG9ydW4iOmZhbHNlLCJlY2hvIjpmYWxzZSwiZWRpdCI6ZmFsc2UsImV2YWwiOnRydWUsImV4ZXJjaXNlIjpbImZpZ3VyZS0xZCIsImhpdi1sbSIsImJyaWRnZS1leCIsImJldGEtbW9kZWwiLCJzY2FsZWQtcmVzIiwiYmV0YS1hY2YiLCJhdmVyYWdlZC1iZXRhIiwiYW5vdmEtcHJhYyJdLCJpbmNsdWRlIjpmYWxzZSwib3V0cHV0IjpmYWxzZSwic2V0dXAiOnRydWV9LCJjb2RlIjoiXG5cbmxpYnJhcnkodGlkeXZlcnNlKVxubGlicmFyeShnbG1tVE1CKVxubGlicmFyeShnZ2Zvcm11bGEpXG5saWJyYXJ5KGdnZWZmZWN0cylcbmxpYnJhcnkoREhBUk1hKVxuXG50aGVtZV9zZXQodGhlbWVfYncoYmFzZV9zaXplPTE2KSlcblxua25pdHI6Om9wdHNfY2h1bmskc2V0KFxuICBlY2hvID0gRkFMU0UsXG4gIGZpZy5hbGlnbiA9IFwiY2VudGVyXCIsXG4gIGZpZy53aWR0aCA9IDYsIGZpZy5oZWlnaHQgPSAyLjUpXG5cbmhpdl9tZW1vcnlfbmFpdmUgPC0gcmVhZF9leGNlbCgnZGF0YS8xRC1NZW1vcnkgTmFpdmUueGxzeCcpIHw+XG4gIG11dGF0ZShJbmZSYXRlUHJvcCA9IEluZlJhdGVzIC8gMTAwLFxuICAgICAgICAgSW5mUmF0ZVByb3AgPSBJbmZSYXRlUHJvcCArIDFlLTEwLFxuICAgICAgICAgQ2VsbFR5cGUgPSBmYWN0b3IoQ2VsbFR5cGUpLFxuICAgICAgICAgQ2VsbFR5cGUgPSBmY3RfcmVsZXZlbChDZWxsVHlwZSwgJ1Jlc3RpbmcnKSlcblxuYmV0YV9tb2RlbCA8LSBnbG1tVE1CKEluZlJhdGVQcm9wIH4gQ2VsbFR5cGUgKyBNb3JOICsgRG9ub3IgLFxuICAgICAgICAgICAgICAgZmFtaWx5ID0gYmV0YV9mYW1pbHkobGluayA9ICdsb2dpdCcpLFxuICAgICAgICAgICAgICAgZGF0YSA9IGhpdl9tZW1vcnlfbmFpdmUpXG5cbmhpdl9tZW1vcnlfbmFpdmUyIDwtIGhpdl9tZW1vcnlfbmFpdmUgfD5cbiAgZ3JvdXBfYnkoRG9ub3IsIENlbGxUeXBlLCBNb3JOKSB8PlxuICBzdW1tYXJpc2UoTWVhbkluZlJhdGVQcm9wID0gbWVhbihJbmZSYXRlUHJvcCksIC5ncm91cHMgPSAnZHJvcCcpXG5cbmJldGFfbW9kZWwyIDwtIGdsbW1UTUIoTWVhbkluZlJhdGVQcm9wIH4gQ2VsbFR5cGUgKyBNb3JOICsgRG9ub3IgLFxuICAgICAgICAgICAgICAgZmFtaWx5ID0gYmV0YV9mYW1pbHkobGluayA9ICdsb2dpdCcpLFxuICAgICAgICAgICAgICAgZGF0YSA9IGhpdl9tZW1vcnlfbmFpdmUyKVxuXG5icmlkZ2VzIDwtIHJlYWQuY3N2KFwiZGF0YS9icmlkZ2VzLmNzdlwiKSJ9
</script>
<script type="exercise-setup-beta-acf-contents">
eyJhdHRyIjp7ImF1dG9ydW4iOmZhbHNlLCJlY2hvIjpmYWxzZSwiZWRpdCI6ZmFsc2UsImV2YWwiOnRydWUsImV4ZXJjaXNlIjpbImZpZ3VyZS0xZCIsImhpdi1sbSIsImJyaWRnZS1leCIsImJldGEtbW9kZWwiLCJzY2FsZWQtcmVzIiwiYmV0YS1hY2YiLCJhdmVyYWdlZC1iZXRhIiwiYW5vdmEtcHJhYyJdLCJpbmNsdWRlIjpmYWxzZSwib3V0cHV0IjpmYWxzZSwic2V0dXAiOnRydWV9LCJjb2RlIjoiXG5cbmxpYnJhcnkodGlkeXZlcnNlKVxubGlicmFyeShnbG1tVE1CKVxubGlicmFyeShnZ2Zvcm11bGEpXG5saWJyYXJ5KGdnZWZmZWN0cylcbmxpYnJhcnkoREhBUk1hKVxuXG50aGVtZV9zZXQodGhlbWVfYncoYmFzZV9zaXplPTE2KSlcblxua25pdHI6Om9wdHNfY2h1bmskc2V0KFxuICBlY2hvID0gRkFMU0UsXG4gIGZpZy5hbGlnbiA9IFwiY2VudGVyXCIsXG4gIGZpZy53aWR0aCA9IDYsIGZpZy5oZWlnaHQgPSAyLjUpXG5cbmhpdl9tZW1vcnlfbmFpdmUgPC0gcmVhZF9leGNlbCgnZGF0YS8xRC1NZW1vcnkgTmFpdmUueGxzeCcpIHw+XG4gIG11dGF0ZShJbmZSYXRlUHJvcCA9IEluZlJhdGVzIC8gMTAwLFxuICAgICAgICAgSW5mUmF0ZVByb3AgPSBJbmZSYXRlUHJvcCArIDFlLTEwLFxuICAgICAgICAgQ2VsbFR5cGUgPSBmYWN0b3IoQ2VsbFR5cGUpLFxuICAgICAgICAgQ2VsbFR5cGUgPSBmY3RfcmVsZXZlbChDZWxsVHlwZSwgJ1Jlc3RpbmcnKSlcblxuYmV0YV9tb2RlbCA8LSBnbG1tVE1CKEluZlJhdGVQcm9wIH4gQ2VsbFR5cGUgKyBNb3JOICsgRG9ub3IgLFxuICAgICAgICAgICAgICAgZmFtaWx5ID0gYmV0YV9mYW1pbHkobGluayA9ICdsb2dpdCcpLFxuICAgICAgICAgICAgICAgZGF0YSA9IGhpdl9tZW1vcnlfbmFpdmUpXG5cbmhpdl9tZW1vcnlfbmFpdmUyIDwtIGhpdl9tZW1vcnlfbmFpdmUgfD5cbiAgZ3JvdXBfYnkoRG9ub3IsIENlbGxUeXBlLCBNb3JOKSB8PlxuICBzdW1tYXJpc2UoTWVhbkluZlJhdGVQcm9wID0gbWVhbihJbmZSYXRlUHJvcCksIC5ncm91cHMgPSAnZHJvcCcpXG5cbmJldGFfbW9kZWwyIDwtIGdsbW1UTUIoTWVhbkluZlJhdGVQcm9wIH4gQ2VsbFR5cGUgKyBNb3JOICsgRG9ub3IgLFxuICAgICAgICAgICAgICAgZmFtaWx5ID0gYmV0YV9mYW1pbHkobGluayA9ICdsb2dpdCcpLFxuICAgICAgICAgICAgICAgZGF0YSA9IGhpdl9tZW1vcnlfbmFpdmUyKVxuXG5icmlkZ2VzIDwtIHJlYWQuY3N2KFwiZGF0YS9icmlkZ2VzLmNzdlwiKSJ9
</script>
<script type="exercise-setup-averaged-beta-contents">
eyJhdHRyIjp7ImF1dG9ydW4iOmZhbHNlLCJlY2hvIjpmYWxzZSwiZWRpdCI6ZmFsc2UsImV2YWwiOnRydWUsImV4ZXJjaXNlIjpbImZpZ3VyZS0xZCIsImhpdi1sbSIsImJyaWRnZS1leCIsImJldGEtbW9kZWwiLCJzY2FsZWQtcmVzIiwiYmV0YS1hY2YiLCJhdmVyYWdlZC1iZXRhIiwiYW5vdmEtcHJhYyJdLCJpbmNsdWRlIjpmYWxzZSwib3V0cHV0IjpmYWxzZSwic2V0dXAiOnRydWV9LCJjb2RlIjoiXG5cbmxpYnJhcnkodGlkeXZlcnNlKVxubGlicmFyeShnbG1tVE1CKVxubGlicmFyeShnZ2Zvcm11bGEpXG5saWJyYXJ5KGdnZWZmZWN0cylcbmxpYnJhcnkoREhBUk1hKVxuXG50aGVtZV9zZXQodGhlbWVfYncoYmFzZV9zaXplPTE2KSlcblxua25pdHI6Om9wdHNfY2h1bmskc2V0KFxuICBlY2hvID0gRkFMU0UsXG4gIGZpZy5hbGlnbiA9IFwiY2VudGVyXCIsXG4gIGZpZy53aWR0aCA9IDYsIGZpZy5oZWlnaHQgPSAyLjUpXG5cbmhpdl9tZW1vcnlfbmFpdmUgPC0gcmVhZF9leGNlbCgnZGF0YS8xRC1NZW1vcnkgTmFpdmUueGxzeCcpIHw+XG4gIG11dGF0ZShJbmZSYXRlUHJvcCA9IEluZlJhdGVzIC8gMTAwLFxuICAgICAgICAgSW5mUmF0ZVByb3AgPSBJbmZSYXRlUHJvcCArIDFlLTEwLFxuICAgICAgICAgQ2VsbFR5cGUgPSBmYWN0b3IoQ2VsbFR5cGUpLFxuICAgICAgICAgQ2VsbFR5cGUgPSBmY3RfcmVsZXZlbChDZWxsVHlwZSwgJ1Jlc3RpbmcnKSlcblxuYmV0YV9tb2RlbCA8LSBnbG1tVE1CKEluZlJhdGVQcm9wIH4gQ2VsbFR5cGUgKyBNb3JOICsgRG9ub3IgLFxuICAgICAgICAgICAgICAgZmFtaWx5ID0gYmV0YV9mYW1pbHkobGluayA9ICdsb2dpdCcpLFxuICAgICAgICAgICAgICAgZGF0YSA9IGhpdl9tZW1vcnlfbmFpdmUpXG5cbmhpdl9tZW1vcnlfbmFpdmUyIDwtIGhpdl9tZW1vcnlfbmFpdmUgfD5cbiAgZ3JvdXBfYnkoRG9ub3IsIENlbGxUeXBlLCBNb3JOKSB8PlxuICBzdW1tYXJpc2UoTWVhbkluZlJhdGVQcm9wID0gbWVhbihJbmZSYXRlUHJvcCksIC5ncm91cHMgPSAnZHJvcCcpXG5cbmJldGFfbW9kZWwyIDwtIGdsbW1UTUIoTWVhbkluZlJhdGVQcm9wIH4gQ2VsbFR5cGUgKyBNb3JOICsgRG9ub3IgLFxuICAgICAgICAgICAgICAgZmFtaWx5ID0gYmV0YV9mYW1pbHkobGluayA9ICdsb2dpdCcpLFxuICAgICAgICAgICAgICAgZGF0YSA9IGhpdl9tZW1vcnlfbmFpdmUyKVxuXG5icmlkZ2VzIDwtIHJlYWQuY3N2KFwiZGF0YS9icmlkZ2VzLmNzdlwiKSJ9
</script>
<script type="exercise-setup-anova-prac-contents">
eyJhdHRyIjp7ImF1dG9ydW4iOmZhbHNlLCJlY2hvIjpmYWxzZSwiZWRpdCI6ZmFsc2UsImV2YWwiOnRydWUsImV4ZXJjaXNlIjpbImZpZ3VyZS0xZCIsImhpdi1sbSIsImJyaWRnZS1leCIsImJldGEtbW9kZWwiLCJzY2FsZWQtcmVzIiwiYmV0YS1hY2YiLCJhdmVyYWdlZC1iZXRhIiwiYW5vdmEtcHJhYyJdLCJpbmNsdWRlIjpmYWxzZSwib3V0cHV0IjpmYWxzZSwic2V0dXAiOnRydWV9LCJjb2RlIjoiXG5cbmxpYnJhcnkodGlkeXZlcnNlKVxubGlicmFyeShnbG1tVE1CKVxubGlicmFyeShnZ2Zvcm11bGEpXG5saWJyYXJ5KGdnZWZmZWN0cylcbmxpYnJhcnkoREhBUk1hKVxuXG50aGVtZV9zZXQodGhlbWVfYncoYmFzZV9zaXplPTE2KSlcblxua25pdHI6Om9wdHNfY2h1bmskc2V0KFxuICBlY2hvID0gRkFMU0UsXG4gIGZpZy5hbGlnbiA9IFwiY2VudGVyXCIsXG4gIGZpZy53aWR0aCA9IDYsIGZpZy5oZWlnaHQgPSAyLjUpXG5cbmhpdl9tZW1vcnlfbmFpdmUgPC0gcmVhZF9leGNlbCgnZGF0YS8xRC1NZW1vcnkgTmFpdmUueGxzeCcpIHw+XG4gIG11dGF0ZShJbmZSYXRlUHJvcCA9IEluZlJhdGVzIC8gMTAwLFxuICAgICAgICAgSW5mUmF0ZVByb3AgPSBJbmZSYXRlUHJvcCArIDFlLTEwLFxuICAgICAgICAgQ2VsbFR5cGUgPSBmYWN0b3IoQ2VsbFR5cGUpLFxuICAgICAgICAgQ2VsbFR5cGUgPSBmY3RfcmVsZXZlbChDZWxsVHlwZSwgJ1Jlc3RpbmcnKSlcblxuYmV0YV9tb2RlbCA8LSBnbG1tVE1CKEluZlJhdGVQcm9wIH4gQ2VsbFR5cGUgKyBNb3JOICsgRG9ub3IgLFxuICAgICAgICAgICAgICAgZmFtaWx5ID0gYmV0YV9mYW1pbHkobGluayA9ICdsb2dpdCcpLFxuICAgICAgICAgICAgICAgZGF0YSA9IGhpdl9tZW1vcnlfbmFpdmUpXG5cbmhpdl9tZW1vcnlfbmFpdmUyIDwtIGhpdl9tZW1vcnlfbmFpdmUgfD5cbiAgZ3JvdXBfYnkoRG9ub3IsIENlbGxUeXBlLCBNb3JOKSB8PlxuICBzdW1tYXJpc2UoTWVhbkluZlJhdGVQcm9wID0gbWVhbihJbmZSYXRlUHJvcCksIC5ncm91cHMgPSAnZHJvcCcpXG5cbmJldGFfbW9kZWwyIDwtIGdsbW1UTUIoTWVhbkluZlJhdGVQcm9wIH4gQ2VsbFR5cGUgKyBNb3JOICsgRG9ub3IgLFxuICAgICAgICAgICAgICAgZmFtaWx5ID0gYmV0YV9mYW1pbHkobGluayA9ICdsb2dpdCcpLFxuICAgICAgICAgICAgICAgZGF0YSA9IGhpdl9tZW1vcnlfbmFpdmUyKVxuXG5icmlkZ2VzIDwtIHJlYWQuY3N2KFwiZGF0YS9icmlkZ2VzLmNzdlwiKSJ9
</script>
</div>
<section id="section-learning-outcomes" class="level2" data-number="33.1">
<h2 data-number="33.1" class="anchored" data-anchor-id="section-learning-outcomes"><span class="header-section-number">33.1</span> Section Learning Outcomes</h2>
<p>Weâ€™ve already considered a pretty diverse set of types of response variables, but there are still more out there!</p>
<p>This section, we will explore one of those: double-bounded data, which often arises when the measurement of interest is a proportion (which must be between 0-1) and it cannot - either conceptually or practically - be treated a binary.</p>
<p>Usually, that means that the number of â€œtrialsâ€ is either undefined or unknown.</p>
<p>For this kind of response variable, we can consider a beta regression model. They are becoming more and more common in the literature recently, as both frequentist and Bayesian tools to fit them have become more available and user-friendly.</p>
<p>By the end of the module you will:</p>
<ol type="1">
<li>Outline the mathematical adjustments needed to go from multiple linear regression to beta regression</li>
<li>Compare and contrast binary regression (with and without overdispersion) and beta regression</li>
<li>Fit, assess, and interpret beta GLMs in R</li>
</ol>
</section>
<section id="text-reference" class="level2" data-number="33.2">
<h2 data-number="33.2" class="anchored" data-anchor-id="text-reference"><span class="header-section-number">33.2</span> Text Reference</h2>
<p>Recommended reading for the materials covered in this tutorial can be found in:</p>
<ul>
<li><a href="https://esajournals.onlinelibrary.wiley.com/doi/full/10.1002/ecs2.3940" target="_blank">Geissinger <em>et al.</em> 2022</a></li>
<li><a href="https://besjournals.onlinelibrary.wiley.com/doi/full/10.1111/2041-210X.13234" target="_blank">Douma &amp; Weedon 2019</a></li>
</ul>
<p>Itâ€™s suggested that you consider consulting these papers <em>after</em> doing this tutorial, with particular focus on any topics you found most challenging.</p>
</section>
<section id="data-bounded-0-1" class="level2" data-number="33.3">
<h2 data-number="33.3" class="anchored" data-anchor-id="data-bounded-0-1"><span class="header-section-number">33.3</span> Data bounded 0-1</h2>
<p>Weâ€™ve already considered several response variable types:</p>
<ul>
<li>Continuous, quantitative data</li>
<li>Count data</li>
<li>Binary data (one- or multiple-trials-per-row)</li>
</ul>
<p>What else is left? Well, what about continuous data that are bounded between 0-1 (or alternatively, data that have both an upper and a lower bound on their possible values), but that <em>cannot</em> be considered to be measuring the proportion of successes in a set of binary trials? Thatâ€™s our topic this module!</p>
<section id="examples" class="level3">
<h3 class="anchored" data-anchor-id="examples">Examples</h3>
<p>Examples of data bounded between 0-1 are surprisingly common. Notice also that any continuous quantity that has both upper and lower bounds on its possible values <em>can</em> be transformed to be between 0-1 â€“ some examples of that are on the list below, too.</p>
<p>Here are a few examples:</p>
<ul>
<li>Scores on an exam, measured as a proportion between 0-1</li>
<li>Batting averages of baseball players</li>
<li>Interest rates</li>
<li>Rank of individual contestants on <em>Survivor</em>, measured as a quantile (if you were best on your season, your rank would be 1, and if you were worst, then 0)</li>
<li>Hours of sleep per 24 hours, computed as <span class="math inline">\(\frac{(\text{hours slept})}{24}\)</span></li>
<li>Proportion of each hour during which dolphin sounds were audible on an underwater sound recording</li>
<li><a href="https://www.fhwa.dot.gov/bridge/mtguide.pdf">Bridge condition ratings</a>, determined according to US government standards and ranging from 0-9 (so they can be converted to 0-1 bounded data by dividing by 9)</li>
<li>Proportion of time a mouse spent floating (rather than actively swimming) during a â€œ<a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC3353513/">forced swim test</a>â€</li>
</ul>
<p>Soâ€¦this kind of data is more common than you might think! Why is beta regression not as well known as, say, logistic regression, then? Itâ€™s likely at least partly because itâ€™s only in the last handful of years that the software to easily fit beta regression models has been available.</p>
</section>
</section>
<section id="hiv-data" class="level2" data-number="33.4">
<h2 data-number="33.4" class="anchored" data-anchor-id="hiv-data"><span class="header-section-number">33.4</span> HIV Data</h2>
<p>The data weâ€™ll consider as an example has been generously provided by Calvin professor Anding Shen, and (some of) the analysis weâ€™ll see has been published in a peer-reviewed paper (<a href="https://doi.org/10.1186/s12977-023-00621-y">Eddy et al.&nbsp;2023</a>). The description here is a very simplified one (so check out the paper if you want more detail).</p>
<section id="research-questions" class="level3">
<h3 class="anchored" data-anchor-id="research-questions">Research Questions</h3>
<p>The work in the paper sought to understand how human cells become infected with HIV: when exposed to the virus, what conditions make cells more/less susceptible, and what types of cells are more/less likely to become infected?</p>
</section>
<section id="sample-collection" class="level3">
<h3 class="anchored" data-anchor-id="sample-collection">Sample Collection</h3>
<p>The authors recruited healthy volunteers to donate blood samples, from which different types of cells were isolated and then grown in the lab.</p>
</section>
<section id="experiments" class="level3">
<h3 class="anchored" data-anchor-id="experiments">Experiments</h3>
<p>The cells (in varying conditions) were exposed to modified versions of the HIV virus â€“ the parts of the virus that facilitate infection were intact, but <strong>not the disease-causing parts</strong>; and a GFP (green fluorescent protein) gene was added so that infected cells would glow. Some exposed cells become infected, and some do not. What proportion get infected? Well, it depends on the conditions (and other things, such as the donor and more).</p>
<p>To measure the rate of infection for each type of cell and condition, a device called a flow cytometer was used (which can detect the GFP-expressing glowing cells).</p>
<p>The resulting data includes the percent GFP-positive cells detected in each sample (but not the total number of cells that went through the machine).</p>
</section>
<section id="the-actual-data" class="level3">
<h3 class="anchored" data-anchor-id="the-actual-data">The Actual Data</h3>
<p>Hereâ€™s a <code>glimpse()</code> of the dataset, called <code>hiv_memory_naive</code>:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(hiv_memory_naive)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 54
Columns: 5
$ Donor       &lt;chr&gt; "D13", "D13", "D13", "D13", "D13", "D13", "D13", "D13", "Dâ€¦
$ CellType    &lt;fct&gt; Resting, Resting, Resting, IEC-, IEC-, IEC-, IEC+, IEC+, Iâ€¦
$ MorN        &lt;chr&gt; "Memory", "Memory", "Memory", "Memory", "Memory", "Memory"â€¦
$ InfRates    &lt;dbl&gt; 1.3582343, 1.5347334, 1.0518934, 12.5454545, 9.1435185, 7.â€¦
$ InfRateProp &lt;dbl&gt; 0.013582343, 0.015347335, 0.010518934, 0.125454546, 0.0914â€¦</code></pre>
</div>
</div>
<p>Variables in the data include:</p>
<ul>
<li><code>Donor</code> ID of the person who provided the sample</li>
<li><code>CellType</code>, which may be:
<ul>
<li>â€œResting,â€ the cells were cultured alone, without human intestinal endothelial cells</li>
<li>â€œIEC-,â€ the cells were cultured along with human intestinal endothelial cells (IEC), but <em>without</em> interferon <span class="math inline">\(\gamma\)</span></li>
<li>â€œIEC+,â€ the cells were cultured along with IEC, <em>and also</em> with interferon <span class="math inline">\(\gamma\)</span></li>
</ul></li>
<li><code>MorN</code>, whether the cells were:
<ul>
<li>â€œMemoryâ€ T cells, immune cells that are primed to respond more to certain infections</li>
<li>â€œNaiveâ€ T cells, immune cells that help the body fight infect by new/unfamiliar infections</li>
</ul></li>
<li><code>InfRates</code>: The HIV infection rate (= GFP glow rate) as a percentage</li>
<li><code>InfRateProp</code>: The HIV infection rate (= GFP glow rate) as a proportion</li>
</ul>
<p>We want to model the differences in HIV infection rate by cell type and memory vs naive cells, while controlling for differences between donors.</p>
<p>How do the data look? (Feel free to make some more/other graphs too, if you likeâ€¦)</p>
<div class="cell" data-layout-align="center" data-exercise="figure-1d">
<div>
<div id="webr-2" class="exercise-cell">

</div>
<script type="webr-2-contents">
eyJhdHRyIjp7ImF1dG9ydW4iOmZhbHNlLCJlZGl0Ijp0cnVlLCJldmFsIjp0cnVlLCJleGVyY2lzZSI6ImZpZ3VyZS0xZCJ9LCJjb2RlIjoiXG5nZl9ib3hwbG90KEluZlJhdGVzIH4gQ2VsbFR5cGUgfCBNb3JOLFxuICAgICAgICAgICAgd2lkdGggPSAwLjUsXG4gICAgICAgICAgIGRhdGEgPSBoaXZfbWVtb3J5X25haXZlLFxuICAgICAgICAgICBvcmllbnRhdGlvbiA9IFwieFwiKSB8PlxuICBnZl9qaXR0ZXIoc2hhcGUgPSB+RG9ub3IsIHdpZHRoID0gMC4xLFxuICAgICAgICAgICAgb3V0bGllci5jb2xvciA9ICd3aGl0ZScpIHw+XG4gIGdmX2xhYnMoeSA9ICdJbmZlY3Rpb24gKCVHRlArKScsXG4gICAgICAgICAgeCA9ICcnKSB8PlxuICBnZl9saW1zKHkgPSBjKDAsIDI1KSkgfD5cbiAgZ2ZfdGhlbWUobGVnZW5kLnBvc2l0aW9uID0gXCJub25lXCIsXG4gICAgICAgICAgIHN0cmlwLmJhY2tncm91bmQgPSBlbGVtZW50X2JsYW5rKCkpIn0=
</script>
</div>
</div>
</section>
</section>
<section id="why-not-lm" class="level2" data-number="33.5">
<h2 data-number="33.5" class="anchored" data-anchor-id="why-not-lm"><span class="header-section-number">33.5</span> Why not <code>lm()</code>?</h2>
<p>The response variable <code>InfRateProp</code> <em>is</em> a continuous numeric value. So why not try a linear model? What will go wrong?</p>
<p>(If you guessed â€œmodel assessment,â€ thatâ€™s a pretty good guessâ€¦)</p>
<p>Letâ€™s try:</p>
<div class="cell" data-layout-align="center" data-exercise="hiv-lm">
<div>
<div id="webr-3" class="exercise-cell">

</div>
<script type="webr-3-contents">
eyJhdHRyIjp7ImF1dG9ydW4iOmZhbHNlLCJlZGl0Ijp0cnVlLCJldmFsIjp0cnVlLCJleGVyY2lzZSI6Imhpdi1sbSJ9LCJjb2RlIjoiXG5oaXZfbG0gPC0gbG0oSW5mUmF0ZVByb3AgfiBDZWxsVHlwZSArIE1vck4gKyBEb25vcixcbiAgICAgICAgICAgICBkYXRhID0gaGl2X21lbW9yeV9uYWl2ZSlcblxuZ2ZfcG9pbnQocmVzaWQoaGl2X2xtKSB+IGZpdHRlZChoaXZfbG0pKSJ9
</script>
</div>
</div>
<p>Yikes! We have a strange trend, which we might call nonlinearity if we had any quantitative predictors, and <em>also</em> we have non-constant variance.</p>
<p>The non-constant variance problem, especially, is very common if you try to model proportion data with a normal linear model.</p>
<p>Sometimes, you also see sharp, straight edges on the residuals vs fitted point cloud, like the example below (which is from another dataset entirely: one on US Highway bridge condition ratings):</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>bridges <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">'https://sldr.netlify.app/data/bridges.csv'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center" data-exercise="bridge-ex">
<div>
<div id="webr-4" class="exercise-cell">

</div>
<script type="webr-4-contents">
eyJhdHRyIjp7ImF1dG9ydW4iOmZhbHNlLCJlZGl0Ijp0cnVlLCJldmFsIjp0cnVlLCJleGVyY2lzZSI6ImJyaWRnZS1leCJ9LCJjb2RlIjoiXG5icmlkZ2VfbW9kZWwgPC0gbG0oQ29uZGl0aW9uLlJhdGluZyAvIDkgfiBZZWFyLkJ1aWx0LCBkYXRhID0gYnJpZGdlcylcbmdmX3BvaW50KHJlc2lkKGJyaWRnZV9tb2RlbCkgfiBmaXR0ZWQoYnJpZGdlX21vZGVsKSkifQ==
</script>
</div>
</div>
<p>So, if you notice any of these issues when fitting an <code>lm()</code>:</p>
<ul>
<li>â€œtrumpetâ€ type non-constant variance, but the data isnâ€™t count data (or any kind of binary data)</li>
<li>Sharp straight boundaries on both the top and bottom of the point cloud in the residuals vs fitted plot</li>
</ul>
<p>â€¦ask yourself if you might maybe have proportion data!</p>
</section>
<section id="which-probability-distribution" class="level2" data-number="33.6">
<h2 data-number="33.6" class="anchored" data-anchor-id="which-probability-distribution"><span class="header-section-number">33.6</span> Which Probability Distribution?</h2>
<p>At this point, when we need to define a new type of regression model, we often ask ourselves:</p>
<blockquote class="blockquote">
<blockquote class="blockquote">
<p>What probability distribution matches the <em>shape</em> and <em>support</em> of the response variable distribution?</p>
</blockquote>
</blockquote>
<p>Here, weâ€™re looking for a distribution with support bounded between 0 and 1.</p>
<section id="beta-distribution-to-the-rescue" class="level4">
<h4 class="anchored" data-anchor-id="beta-distribution-to-the-rescue">Beta distribution to the rescue!</h4>
</section>
<section id="waitwhat-is-the-beta-distribution" class="level4">
<h4 class="anchored" data-anchor-id="waitwhat-is-the-beta-distribution">Waitâ€¦what <em>is</em> the beta distribution?</h4>
<iframe width="560" height="315" src="https://www.youtube.com/embed/Vybd22JERFE?si=As3cIUvlmdLwdzik" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="">
</iframe>
</section>
</section>
<section id="regression-equation" class="level2" data-number="33.7">
<h2 data-number="33.7" class="anchored" data-anchor-id="regression-equation"><span class="header-section-number">33.7</span> Regression Equation</h2>
<p>Soâ€¦how does this beta PDF fit into a regression model?</p>
<p>The approach should be pretty familiar now â€“ we need to identify a parameter of the distribution that relates somehow to our actual response variable, and then use <em>that</em> (plus an appropriate link function, if needed) on the left-hand side of our regression equation.</p>
<p>So we need to fill in:</p>
<p><span class="math display">\[?? = \beta_0 + \beta_1(x_1) + \beta_2(x_2) + \beta_3(x_3) + ... \beta_k(x_k)\]</span> Well, the beta distribution has those two shape parameters, <span class="math inline">\(\alpha\)</span> and <span class="math inline">\(\beta\)</span>.</p>
<p>Butâ€¦well, choosing and using just one of those isnâ€™t super intuitive, since neither of them alone measures the central value of the distribution.</p>
<p>Thereâ€™s also an alternative parameterization of the Beta distribution in terms of its mean (called <span class="math inline">\(\mu\)</span>) and a spread parameter (which turns out to be <span class="math inline">\(v = \alpha + \beta\)</span>).</p>
<p>Without worrying about the details, <span class="math inline">\(\mu\)</span> seems like exactly the kind of thing weâ€™d like to have on the left-hand side of our equation, so we might suppose that in beta regression</p>
<p><span class="math display">\[\text{response variable}_i \sim \text{Beta}(\mu_i, v)\]</span></p>
<p>The mean <span class="math inline">\(\mu_i\)</span> must be bounded between 0 and 1, so to spread it out over the whole real line, a sensible choice of link function might beâ€¦well, what?</p>
<p>Hint: remember, probabilities (like in binary regression) are also bounded between 0 and 1â€¦</p>
<div class="webex-check webex-box">
<div class="cell" data-layout-align="center">
What link function would work well for beta regression?
<div id="radio_DBKNMXCQAO" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_DBKNMXCQAO" value=""> <span>no link function is needed (use the 'identity' link)</span></label><label><input type="radio" autocomplete="off" name="radio_DBKNMXCQAO" value="answer"> <span>logit</span></label><label><input type="radio" autocomplete="off" name="radio_DBKNMXCQAO" value=""> <span>natural logarithm ('log')</span></label><label><input type="radio" autocomplete="off" name="radio_DBKNMXCQAO" value=""> <span>inverse</span></label><label><input type="radio" autocomplete="off" name="radio_DBKNMXCQAO" value=""> <span>square root</span></label><label><input type="radio" autocomplete="off" name="radio_DBKNMXCQAO" value=""> <span>base-10 logarithm</span></label>
</div>
</div>
</div>
<p>So, we end up with:</p>
<p><span class="math display">\[logit(\mu_i) = \beta_0 + \beta_1(x_{1,i}) + \beta_2(x_{2,i}) + \beta_3(x_{3,i}) + ... \]</span></p>
<p>Or, in our specific example (leaving out the Donor terms to make it a bit shorter),</p>
<p><span class="math display">\[logit(\mu_i) = \beta_0 + \beta_1(I_{Naive}) + \beta_2(I_{IEC-}) + \beta_3(I_{IEC+}) + ... \]</span> Where</p>
<ul>
<li><span class="math inline">\(\mu_i\)</span> is the mean parameter of a Beta distribution, corresponding to the mean HIV infection rate</li>
<li><span class="math inline">\(I_{Naive}\)</span> is an indicator variable that is 1 for Naive cells and 0 for Memory cells,</li>
<li><span class="math inline">\(I_{IEC-}\)</span> is an indicator variable that is 1 for IEC- cells and 0 otherwise, and</li>
<li><span class="math inline">\(I+{IEC+}\)</span> is an indicator variable that is 1 for IEC+ cells and 0 otherwise, and</li>
</ul>
<p><span class="math display">\[\text{InfRates} \sim \text{Beta}(\mu_i, v)\]</span> <span class="math display">\[\epsilon_i = \mu_i - \text{InfRates}_i\]</span></p>
</section>
<section id="beta-model-in-r" class="level2" data-number="33.8">
<h2 data-number="33.8" class="anchored" data-anchor-id="beta-model-in-r"><span class="header-section-number">33.8</span> Beta model in R</h2>
<p>In R, we can fit this model if we just specify we want the <code>family = beta_family(link = 'logit')</code>.</p>
<p>So for our HIV infection data, change the code below to fit a beta GLM (remember, youâ€™ll need to use <code>glmmTMB()</code> instead of <code>lm()</code> now too).</p>
<div class="cell" data-layout-align="center" data-exercise="beta-model">
<div>
<div id="webr-5" class="exercise-cell">

</div>
<script type="webr-5-contents">
eyJhdHRyIjp7ImF1dG9ydW4iOmZhbHNlLCJlZGl0Ijp0cnVlLCJldmFsIjp0cnVlLCJleGVyY2lzZSI6ImJldGEtbW9kZWwifSwiY29kZSI6ImJldGFfbW9kZWwgPC0gbG0oSW5mUmF0ZVByb3AgfiBDZWxsVHlwZSArIE1vck4gKyBEb25vcixcbiAgICAgICAgICAgICBkYXRhID0gaGl2X21lbW9yeV9uYWl2ZSkifQ==
</script>
</div>
</div>
<div class="hint webr-ojs-exercise exercise-hint d-none" data-exercise="beta-model">
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Hint:
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="sourceCode" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>beta_model <span class="ot">&lt;-</span> <span class="fu">glmmTMB</span>(InfRateProp <span class="sc">~</span> CellType <span class="sc">+</span> MorN <span class="sc">+</span> Donor ,</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>               <span class="at">family =</span> ...,</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">data =</span> hiv_memory_naive)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
<div class="webr-ojs-exercise exercise-solution d-none" data-exercise="beta-model">
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution:
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="sourceCode" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>beta_model <span class="ot">&lt;-</span> <span class="fu">glmmTMB</span>(InfRateProp <span class="sc">~</span> CellType <span class="sc">+</span> MorN <span class="sc">+</span> Donor ,</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>               <span class="at">family =</span> <span class="fu">beta_family</span>(<span class="at">link =</span> <span class="st">'logit'</span>),</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">data =</span> hiv_memory_naive)</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(beta_model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="conditions" class="level2" data-number="33.9">
<h2 data-number="33.9" class="anchored" data-anchor-id="conditions"><span class="header-section-number">33.9</span> Conditions</h2>
<p>Just as for binary and count regression, the conditions we have to check are:</p>
<ol type="1">
<li>logit-linearity</li>
<li>Independence of residuals</li>
<li>Mean-variance relationship</li>
</ol>
</section>
<section id="assessment" class="level2" data-number="33.10">
<h2 data-number="33.10" class="anchored" data-anchor-id="assessment"><span class="header-section-number">33.10</span> Assessment</h2>
<p>Again like before, weâ€™ll rely on the scaled residual plot to check linearity and the mean-variance relationship, and an ACF to check residual independence.</p>
<div class="cell" data-layout-align="center" data-exercise="scaled-res" data-envir="beta-model">
<div>
<div id="webr-6" class="exercise-cell">

</div>
<script type="webr-6-contents">
eyJhdHRyIjp7ImF1dG9ydW4iOmZhbHNlLCJlZGl0Ijp0cnVlLCJlbnZpciI6ImJldGEtbW9kZWwiLCJldmFsIjp0cnVlLCJleGVyY2lzZSI6InNjYWxlZC1yZXMifSwiY29kZSI6ImJldGFfc2ltIDwtIHNpbXVsYXRlUmVzaWR1YWxzKGJldGFfbW9kZWwpXG5wbG90UmVzaWR1YWxzKGJldGFfc2ltKSJ9
</script>
</div>
</div>
<div class="cell" data-layout-align="center" data-exercise="beta-acf" data-envir="beta-model">
<div>
<div id="webr-7" class="exercise-cell">

</div>
<script type="webr-7-contents">
eyJhdHRyIjp7ImF1dG9ydW4iOmZhbHNlLCJlZGl0Ijp0cnVlLCJlbnZpciI6ImJldGEtbW9kZWwiLCJldmFsIjp0cnVlLCJleGVyY2lzZSI6ImJldGEtYWNmIn0sImNvZGUiOiJhY2YocmVzaWQoYmV0YV9tb2RlbCksIG1haW4gPSAnJykifQ==
</script>
</div>
</div>
<p>(We could also plot <code>logit(InfRateProp)</code> as a function of any quantitative predictors (if we had any). But our predictors are all categoricalâ€¦)</p>
<div class="webex-check webex-box">
<div class="cell" data-layout-align="center">
What problem(s) do you see?
<div id="radio_YUIYOXAWSD" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_YUIYOXAWSD" value="answer"> <span>The scaled residuals aren't spread uniformly up-and-down so there's likely a problem with the mean-variance condition</span></label><label><input type="radio" autocomplete="off" name="radio_YUIYOXAWSD" value=""> <span>There might be a problem with logit-linearity</span></label><label><input type="radio" autocomplete="off" name="radio_YUIYOXAWSD" value=""> <span>Many ACF values are outside the confidence bounds, so there's clear evidence of a problem with residual dependence</span></label><label><input type="radio" autocomplete="off" name="radio_YUIYOXAWSD" value=""> <span>There are no issues at all â€“ this model passes assessment</span></label><label><input type="radio" autocomplete="off" name="radio_YUIYOXAWSD" value=""> <span>The residual normality condition is violated</span></label>
</div>
</div>
</div>
<div class="webex-solution">
<button>
Click for more explanation of the answers aboveâ€¦
</button>
<p>Maybe there is a trend seen in the scaled residual plot, I agreeâ€¦but according to the researcher there were not any other uncontrolled variables known that we might be able to add, much less ones that are clearly quantitative.</p>
<p>Remember that there IS no normality condition.</p>
</div>
</section>
<section id="aside-fix" class="level2" data-number="33.11">
<h2 data-number="33.11" class="anchored" data-anchor-id="aside-fix"><span class="header-section-number">33.11</span> Aside: fix</h2>
<p>In this case, the â€œfixâ€ to the problem with the mean-variance condition was to average the values within each donor for each cell type prior to fitting the model. It reduces sample size, but also reduces noise. The code below prepares the dataset for this approach, fits the model, and re-makes a new scaled residual plot.</p>
<div class="cell" data-layout-align="center" data-exercise="averaged-beta" data-envir="beta-model">
<div>
<div id="webr-8" class="exercise-cell">

</div>
<script type="webr-8-contents">
eyJhdHRyIjp7ImF1dG9ydW4iOmZhbHNlLCJlZGl0Ijp0cnVlLCJlbnZpciI6ImJldGEtbW9kZWwiLCJldmFsIjp0cnVlLCJleGVyY2lzZSI6ImF2ZXJhZ2VkLWJldGEifSwiY29kZSI6IlxuaGl2X21lbW9yeV9uYWl2ZTIgPC0gaGl2X21lbW9yeV9uYWl2ZSB8PlxuICBncm91cF9ieShEb25vciwgQ2VsbFR5cGUsIE1vck4pIHw+XG4gIHN1bW1hcmlzZShNZWFuSW5mUmF0ZVByb3AgPSBtZWFuKEluZlJhdGVQcm9wKSwgLmdyb3VwcyA9ICdkcm9wJylcblxuYmV0YV9tb2RlbDIgPC0gZ2xtbVRNQihNZWFuSW5mUmF0ZVByb3AgfiBDZWxsVHlwZSArIE1vck4gKyBEb25vciAsXG4gICAgICAgICAgICAgICBmYW1pbHkgPSBiZXRhX2ZhbWlseShsaW5rID0gJ2xvZ2l0JyksXG4gICAgICAgICAgICAgICBkYXRhID0gaGl2X21lbW9yeV9uYWl2ZTIpXG5cbmJldGFfc2ltMiA8LSBzaW11bGF0ZVJlc2lkdWFscyhiZXRhX21vZGVsMilcbnBsb3RSZXNpZHVhbHMoYmV0YV9zaW0yKSJ9
</script>
</div>
</div>
<p>Looks pretty good now. (And for sure, WAY better than the <code>lm()</code> did.)</p>
</section>
<section id="selection" class="level2" data-number="33.12">
<h2 data-number="33.12" class="anchored" data-anchor-id="selection"><span class="header-section-number">33.12</span> Selection</h2>
<p>Model selection for beta regression is coded and interpreted just as for other models weâ€™ve worked with already. So, since Shen and colleagues chose to use a hypothesis testing approach, we might use ANOVA â€“ go ahead and code it!</p>
<div class="cell" data-layout-align="center" data-exercise="anova-prac" data-envir="beta-model">
<div>
<div id="webr-9" class="exercise-cell">

</div>
<script type="webr-9-contents">
eyJhdHRyIjp7ImF1dG9ydW4iOmZhbHNlLCJlZGl0Ijp0cnVlLCJlbnZpciI6ImJldGEtbW9kZWwiLCJldmFsIjp0cnVlLCJleGVyY2lzZSI6ImFub3ZhLXByYWMifSwiY29kZSI6IiJ9
</script>
</div>
</div>
<div class="webr-ojs-exercise exercise-solution d-none" data-exercise="anova-prac">
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-3-contents" aria-controls="callout-3" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution:
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-3" class="callout-3-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="sourceCode" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>car<span class="sc">::</span><span class="fu">Anova</span>(beta_model2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
<p>In this case, we find there is very, very strong evidence of differences in HIV infection rates between cell types and between memory and naive cells. (We donâ€™t really care to <em>test</em> whether there are Donor effects or not; rather, we assume and suspect there are such effects, and want to control for them in our model.)</p>
</section>
<section id="prediction-plots" class="level2" data-number="33.13">
<h2 data-number="33.13" class="anchored" data-anchor-id="prediction-plots"><span class="header-section-number">33.13</span> Prediction Plots</h2>
<p>Prediction plots for beta regression are also made just as they were for other GLMs, using <code>ggpredict()</code>. Try making a prediction plot for <code>MorN</code> and <code>CellType</code> together!</p>
<div class="cell" data-layout-align="center" data-exercise="beta-preds" data-envir="beta-model">
<div>
<div id="webr-10" class="exercise-cell">

</div>
<script type="webr-10-contents">
eyJhdHRyIjp7ImF1dG9ydW4iOmZhbHNlLCJlZGl0Ijp0cnVlLCJlbnZpciI6ImJldGEtbW9kZWwiLCJldmFsIjp0cnVlLCJleGVyY2lzZSI6ImJldGEtcHJlZHMifSwiY29kZSI6IiJ9
</script>
</div>
</div>
<div class="hint webr-ojs-exercise exercise-hint d-none" data-exercise="beta-preds">
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-4-contents" aria-controls="callout-4" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Hint:
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-4" class="callout-4-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="sourceCode" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">predict_response</span>(beta_model2, ...) <span class="sc">|&gt;</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
<div class="webr-ojs-exercise exercise-solution d-none" data-exercise="beta-preds">
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-5-contents" aria-controls="callout-5" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution:
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-5" class="callout-5-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="sourceCode" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">predict_response</span>(beta_model2, </span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>          <span class="at">terms =</span> <span class="fu">c</span>(<span class="st">'MorN'</span>, <span class="st">'CellType'</span>)) <span class="sc">|&gt;</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
<p>What do we see? Memory cells have higher infection rates than Naive cells. Compared to lone â€œRestingâ€ cells, those cultures along with IEC (intestinal endothelial cells) were infected much more, and adding interferon <span class="math inline">\(\gamma\)</span> (the â€œ+â€ in IEC+) further increased infection rates.</p>
<p>Each of these â€œincreasesâ€ happens in a proportional way (by a multiplicative factor); for example, since the Resting infection rate was higher for Memory cells, the increases in proportion infected were larger.</p>
<section id="the-math" class="level3">
<h3 class="anchored" data-anchor-id="the-math">The math!</h3>
<p>We can see how this happens by checking out the equation (leaving out the donor terms to keep it shorter).</p>
<p><span class="math display">\[logit(\mu_i) = log(\frac{\mu_i}{(1-\mu_i)}) = \beta_0 + \beta_1 I_{Naive} + \beta_2 I_{IEC-} + \beta_3 I_{IEC+} + ... \]</span></p>
<p>(Here, each <span class="math inline">\(I_{label}\)</span> is an indicator variable if that cell type is true, and 0 otherwise. And also, <span class="math inline">\(\frac{\mu_i}{(1-\mu_i)}\)</span> is the <em>odds</em> of infection!)</p>
<p>Exponentiating both sides, we get:</p>
<p><span class="math display">\[\frac{\mu_i}{(1-\mu_i)} = e^{(\beta_0 + \beta_1(I_{Naive}) + \beta_2(I_{IEC-}) + \beta_3(I_{IEC+}) + ...)}\]</span></p>
<p>Since <span class="math inline">\(e^{(a + b)} = e^ae^b\)</span>, that is</p>
<p><span class="math display">\[\frac{\mu_i}{(1-\mu_i)} = e^{\beta_0} e^{\beta_1(I_{Naive})} e^{\beta_2(I_{IEC-})} e^{\beta_3(I_{IEC+})}...\]</span></p>
<p>And now, since <span class="math inline">\(e^{ab} = (e^a)^b\)</span>, we get</p>
<p><span class="math display">\[\frac{\mu_i}{(1-\mu_i)} = e^{\beta_0} (e^{\beta_1})^{(I_{Naive})} (e^{\beta_2})^{(I_{IEC-})} (e^{\beta_3})^{(I_{IEC+})}\dots\]</span> This means, for example, that when you change from Memory to Naive cells, the <em>odds</em> of infection with HIV are <em>multiplied</em> by <span class="math inline">\(e^{\beta_1}\)</span>. (So the bigger the odds to begin with for Memory cells, the bigger the decrease when changing to Naive cells.) Cool!</p>
</section>
<section id="official-interpretation" class="level3">
<h3 class="anchored" data-anchor-id="official-interpretation">Official Interpretation</h3>
<p>Hereâ€™s how the Eddy et al.&nbsp;paper puts it:</p>
<blockquote class="blockquote">
<blockquote class="blockquote">
<p>In vivo, memory CD4+T cells are preferentially infected and harbor most of the latent reservoir. Therefore, we examined whether IEC stimulation has more effect on the memory population or the naÃ¯ve population of resting CD4+T cells. We isolated CD4+CD45RO- naÃ¯ve resting T cells and CD4+CD45RA- memory resting T cells from the same donor, and co-cultured them with IEC one day before infection. Infection rates (%GFP+) were examined on day 6 post-infection. We found that memory CD4+T cells were infected at much higher rates than naÃ¯ve CD4+T cells in general (Fig. 1D, overall comparison between memory and naÃ¯ve T cells, p&lt;0.0001). Although both memory and naÃ¯ve CD4+T cells co-cultured with IEC still showed greater infectivity than those CD4+T cells cultured alone (Fig. 1D, p&lt;0.0001), the increases in infection for memory T cells were much higher than for naÃ¯ve T cells: IEC âˆ’ cocultures increased infection by &gt;10% on average in memory T cells compared with 1.5% in naÃ¯ve T cells; likewise, IEC+cocultures increased infection by &gt;15% on average in memory T cells compared with 2% in naÃ¯ve T cells. This suggested that signals provided by IEC to memory CD4+T cells were able to overcome the restrictions to a much greater extent than in naÃ¯ve cells.</p>
</blockquote>
</blockquote>
<p>Yes, true, itâ€™s pretty complicated. Why does it matter?</p>
<blockquote class="blockquote">
<blockquote class="blockquote">
<p>This is the first time IEC are implicated in HIV infection and pathology in the gut. As the intestinal mucosal area is a major site of HIV pathology and latency formation, this study highlights the importance of lymphoid tissue environment in HIV disease and persistence, particularly the involvement of EC in the gut microenvironment as a significant player.</p>
</blockquote>
</blockquote>
<p>Soâ€¦this finding (along with a lot of other similar experiments) is helping to work out the details of how and where in the body HIV infection begins and persists. And to model the experimental results well, we needed our new friend the beta regression model.</p>
<p>Enjoy having one more tool in your regression arsenal!</p>


<script type="webr-data">
eyJvcHRpb25zIjp7ImJhc2VVcmwiOiJodHRwczovL3dlYnIuci13YXNtLm9yZy92MC41LjQvIn0sInBhY2thZ2VzIjp7InBrZ3MiOlsiZXZhbHVhdGUiLCJrbml0ciIsImh0bWx0b29scyIsImRwbHlyIiwidGlkeXIiLCJyZWFkciIsInJlYWR4bCIsInN0cmluZ3IiLCJnZ3Bsb3QyIiwiZ2dmb3JtdWxhIiwibW9zYWljIiwiY2FyIiwiREhBUk1hIl0sInJlcG9zIjpbXX0sInJlbmRlcl9kZiI6ImRlZmF1bHQifQ==
</script>
<script type="ojs-module-contents">
eyJjb250ZW50cyI6W3siY2VsbE5hbWUiOiJ3ZWJyLXdpZGdldC0xMCIsImlubGluZSI6ZmFsc2UsIm1ldGhvZE5hbWUiOiJpbnRlcnByZXRRdWlldCIsInNvdXJjZSI6IntcbiAgLy8gV2FpdCBmb3Igb3V0cHV0IHRvIGJlIHdyaXR0ZW4gdG8gdGhlIERPTSwgdGhlbiB0cmlnZ2VyIHdpZGdldCByZW5kZXJpbmdcbiAgYXdhaXQgX3dlYnJfdmFsdWVfMTA7XG4gIGlmICh3aW5kb3cuSFRNTFdpZGdldHMpIHtcbiAgICB3aW5kb3cuSFRNTFdpZGdldHMuc3RhdGljUmVuZGVyKCk7XG4gIH1cbiAgaWYgKHdpbmRvdy5QYWdlZFRhYmxlRG9jKSB7XG4gICAgd2luZG93LlBhZ2VkVGFibGVEb2MuaW5pdEFsbCgpO1xuICB9XG59XG4ifSx7ImNlbGxOYW1lIjoid2Vici0xMCIsImlubGluZSI6ZmFsc2UsIm1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJzb3VyY2UiOiJ2aWV3b2YgX3dlYnJfZWRpdG9yXzEwID0ge1xuICBjb25zdCB7IFdlYlJFeGVyY2lzZUVkaXRvciwgYjY0RGVjb2RlIH0gPSB3aW5kb3cuX2V4ZXJjaXNlX29qc19ydW50aW1lO1xuICBjb25zdCBzY3JpcHRDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihgc2NyaXB0W3R5cGU9XFxcIndlYnItMTAtY29udGVudHNcXFwiXWApLnRleHRDb250ZW50O1xuICBjb25zdCBibG9jayA9IEpTT04ucGFyc2UoYjY0RGVjb2RlKHNjcmlwdENvbnRlbnQpKTtcblxuICAvLyBEZWZhdWx0IGV4ZXJjaXNlIGNvbmZpZ3VyYXRpb25cbiAgY29uc3Qgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oXG4gICAge1xuICAgICAgaWQ6IFwid2Vici0xMC1jb250ZW50c1wiLFxuICAgICAgZW52aXI6IGBleGVyY2lzZS1lbnYtJHtibG9jay5hdHRyLmV4ZXJjaXNlfWAsXG4gICAgICBlcnJvcjogZmFsc2UsXG4gICAgICBjYXB0aW9uOiAnRXhlcmNpc2UnLFxuICAgIH0sXG4gICAgYmxvY2suYXR0clxuICApO1xuXG4gIGNvbnN0IGVkaXRvciA9IG5ldyBXZWJSRXhlcmNpc2VFZGl0b3Iod2ViUk9qcy53ZWJSUHJvbWlzZSwgYmxvY2suY29kZSwgb3B0aW9ucyk7XG4gIHJldHVybiBlZGl0b3IuY29udGFpbmVyO1xufVxudmlld29mIF93ZWJyX3ZhbHVlXzEwID0gd2ViUk9qcy5wcm9jZXNzKF93ZWJyX2VkaXRvcl8xMCwge30pO1xuX3dlYnJfZmVlZGJhY2tfMTAgPSB7XG4gIGNvbnN0IHsgV2ViUkdyYWRlciB9ID0gd2luZG93Ll9leGVyY2lzZV9vanNfcnVudGltZTtcbiAgY29uc3QgZW1wdHlGZWVkYmFjayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gIGNvbnN0IGdyYWRlciA9IG5ldyBXZWJSR3JhZGVyKF93ZWJyX3ZhbHVlXzEwLmV2YWx1YXRvcik7XG4gIGNvbnN0IGZlZWRiYWNrID0gYXdhaXQgZ3JhZGVyLmdyYWRlRXhlcmNpc2UoKTtcbiAgaWYgKCFmZWVkYmFjaykgcmV0dXJuIGVtcHR5RmVlZGJhY2s7XG4gIHJldHVybiBmZWVkYmFjaztcbn1cbiJ9LHsiY2VsbE5hbWUiOiJ3ZWJyLXdpZGdldC05IiwiaW5saW5lIjpmYWxzZSwibWV0aG9kTmFtZSI6ImludGVycHJldFF1aWV0Iiwic291cmNlIjoie1xuICAvLyBXYWl0IGZvciBvdXRwdXQgdG8gYmUgd3JpdHRlbiB0byB0aGUgRE9NLCB0aGVuIHRyaWdnZXIgd2lkZ2V0IHJlbmRlcmluZ1xuICBhd2FpdCBfd2Vicl92YWx1ZV85O1xuICBpZiAod2luZG93LkhUTUxXaWRnZXRzKSB7XG4gICAgd2luZG93LkhUTUxXaWRnZXRzLnN0YXRpY1JlbmRlcigpO1xuICB9XG4gIGlmICh3aW5kb3cuUGFnZWRUYWJsZURvYykge1xuICAgIHdpbmRvdy5QYWdlZFRhYmxlRG9jLmluaXRBbGwoKTtcbiAgfVxufVxuIn0seyJjZWxsTmFtZSI6IndlYnItOSIsImlubGluZSI6ZmFsc2UsIm1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJzb3VyY2UiOiJ2aWV3b2YgX3dlYnJfZWRpdG9yXzkgPSB7XG4gIGNvbnN0IHsgV2ViUkV4ZXJjaXNlRWRpdG9yLCBiNjREZWNvZGUgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG4gIGNvbnN0IHNjcmlwdENvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBzY3JpcHRbdHlwZT1cXFwid2Vici05LWNvbnRlbnRzXFxcIl1gKS50ZXh0Q29udGVudDtcbiAgY29uc3QgYmxvY2sgPSBKU09OLnBhcnNlKGI2NERlY29kZShzY3JpcHRDb250ZW50KSk7XG5cbiAgLy8gRGVmYXVsdCBleGVyY2lzZSBjb25maWd1cmF0aW9uXG4gIGNvbnN0IG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKFxuICAgIHtcbiAgICAgIGlkOiBcIndlYnItOS1jb250ZW50c1wiLFxuICAgICAgZW52aXI6IGBleGVyY2lzZS1lbnYtJHtibG9jay5hdHRyLmV4ZXJjaXNlfWAsXG4gICAgICBlcnJvcjogZmFsc2UsXG4gICAgICBjYXB0aW9uOiAnRXhlcmNpc2UnLFxuICAgIH0sXG4gICAgYmxvY2suYXR0clxuICApO1xuXG4gIGNvbnN0IGVkaXRvciA9IG5ldyBXZWJSRXhlcmNpc2VFZGl0b3Iod2ViUk9qcy53ZWJSUHJvbWlzZSwgYmxvY2suY29kZSwgb3B0aW9ucyk7XG4gIHJldHVybiBlZGl0b3IuY29udGFpbmVyO1xufVxudmlld29mIF93ZWJyX3ZhbHVlXzkgPSB3ZWJST2pzLnByb2Nlc3MoX3dlYnJfZWRpdG9yXzksIHt9KTtcbl93ZWJyX2ZlZWRiYWNrXzkgPSB7XG4gIGNvbnN0IHsgV2ViUkdyYWRlciB9ID0gd2luZG93Ll9leGVyY2lzZV9vanNfcnVudGltZTtcbiAgY29uc3QgZW1wdHlGZWVkYmFjayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gIGNvbnN0IGdyYWRlciA9IG5ldyBXZWJSR3JhZGVyKF93ZWJyX3ZhbHVlXzkuZXZhbHVhdG9yKTtcbiAgY29uc3QgZmVlZGJhY2sgPSBhd2FpdCBncmFkZXIuZ3JhZGVFeGVyY2lzZSgpO1xuICBpZiAoIWZlZWRiYWNrKSByZXR1cm4gZW1wdHlGZWVkYmFjaztcbiAgcmV0dXJuIGZlZWRiYWNrO1xufVxuIn0seyJjZWxsTmFtZSI6IndlYnItd2lkZ2V0LTgiLCJpbmxpbmUiOmZhbHNlLCJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQiLCJzb3VyY2UiOiJ7XG4gIC8vIFdhaXQgZm9yIG91dHB1dCB0byBiZSB3cml0dGVuIHRvIHRoZSBET00sIHRoZW4gdHJpZ2dlciB3aWRnZXQgcmVuZGVyaW5nXG4gIGF3YWl0IF93ZWJyX3ZhbHVlXzg7XG4gIGlmICh3aW5kb3cuSFRNTFdpZGdldHMpIHtcbiAgICB3aW5kb3cuSFRNTFdpZGdldHMuc3RhdGljUmVuZGVyKCk7XG4gIH1cbiAgaWYgKHdpbmRvdy5QYWdlZFRhYmxlRG9jKSB7XG4gICAgd2luZG93LlBhZ2VkVGFibGVEb2MuaW5pdEFsbCgpO1xuICB9XG59XG4ifSx7ImNlbGxOYW1lIjoid2Vici04IiwiaW5saW5lIjpmYWxzZSwibWV0aG9kTmFtZSI6ImludGVycHJldCIsInNvdXJjZSI6InZpZXdvZiBfd2Vicl9lZGl0b3JfOCA9IHtcbiAgY29uc3QgeyBXZWJSRXhlcmNpc2VFZGl0b3IsIGI2NERlY29kZSB9ID0gd2luZG93Ll9leGVyY2lzZV9vanNfcnVudGltZTtcbiAgY29uc3Qgc2NyaXB0Q29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYHNjcmlwdFt0eXBlPVxcXCJ3ZWJyLTgtY29udGVudHNcXFwiXWApLnRleHRDb250ZW50O1xuICBjb25zdCBibG9jayA9IEpTT04ucGFyc2UoYjY0RGVjb2RlKHNjcmlwdENvbnRlbnQpKTtcblxuICAvLyBEZWZhdWx0IGV4ZXJjaXNlIGNvbmZpZ3VyYXRpb25cbiAgY29uc3Qgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oXG4gICAge1xuICAgICAgaWQ6IFwid2Vici04LWNvbnRlbnRzXCIsXG4gICAgICBlbnZpcjogYGV4ZXJjaXNlLWVudi0ke2Jsb2NrLmF0dHIuZXhlcmNpc2V9YCxcbiAgICAgIGVycm9yOiBmYWxzZSxcbiAgICAgIGNhcHRpb246ICdFeGVyY2lzZScsXG4gICAgfSxcbiAgICBibG9jay5hdHRyXG4gICk7XG5cbiAgY29uc3QgZWRpdG9yID0gbmV3IFdlYlJFeGVyY2lzZUVkaXRvcih3ZWJST2pzLndlYlJQcm9taXNlLCBibG9jay5jb2RlLCBvcHRpb25zKTtcbiAgcmV0dXJuIGVkaXRvci5jb250YWluZXI7XG59XG52aWV3b2YgX3dlYnJfdmFsdWVfOCA9IHdlYlJPanMucHJvY2Vzcyhfd2Vicl9lZGl0b3JfOCwge30pO1xuX3dlYnJfZmVlZGJhY2tfOCA9IHtcbiAgY29uc3QgeyBXZWJSR3JhZGVyIH0gPSB3aW5kb3cuX2V4ZXJjaXNlX29qc19ydW50aW1lO1xuICBjb25zdCBlbXB0eUZlZWRiYWNrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cbiAgY29uc3QgZ3JhZGVyID0gbmV3IFdlYlJHcmFkZXIoX3dlYnJfdmFsdWVfOC5ldmFsdWF0b3IpO1xuICBjb25zdCBmZWVkYmFjayA9IGF3YWl0IGdyYWRlci5ncmFkZUV4ZXJjaXNlKCk7XG4gIGlmICghZmVlZGJhY2spIHJldHVybiBlbXB0eUZlZWRiYWNrO1xuICByZXR1cm4gZmVlZGJhY2s7XG59XG4ifSx7ImNlbGxOYW1lIjoid2Vici13aWRnZXQtNyIsImlubGluZSI6ZmFsc2UsIm1ldGhvZE5hbWUiOiJpbnRlcnByZXRRdWlldCIsInNvdXJjZSI6IntcbiAgLy8gV2FpdCBmb3Igb3V0cHV0IHRvIGJlIHdyaXR0ZW4gdG8gdGhlIERPTSwgdGhlbiB0cmlnZ2VyIHdpZGdldCByZW5kZXJpbmdcbiAgYXdhaXQgX3dlYnJfdmFsdWVfNztcbiAgaWYgKHdpbmRvdy5IVE1MV2lkZ2V0cykge1xuICAgIHdpbmRvdy5IVE1MV2lkZ2V0cy5zdGF0aWNSZW5kZXIoKTtcbiAgfVxuICBpZiAod2luZG93LlBhZ2VkVGFibGVEb2MpIHtcbiAgICB3aW5kb3cuUGFnZWRUYWJsZURvYy5pbml0QWxsKCk7XG4gIH1cbn1cbiJ9LHsiY2VsbE5hbWUiOiJ3ZWJyLTciLCJpbmxpbmUiOmZhbHNlLCJtZXRob2ROYW1lIjoiaW50ZXJwcmV0Iiwic291cmNlIjoidmlld29mIF93ZWJyX2VkaXRvcl83ID0ge1xuICBjb25zdCB7IFdlYlJFeGVyY2lzZUVkaXRvciwgYjY0RGVjb2RlIH0gPSB3aW5kb3cuX2V4ZXJjaXNlX29qc19ydW50aW1lO1xuICBjb25zdCBzY3JpcHRDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihgc2NyaXB0W3R5cGU9XFxcIndlYnItNy1jb250ZW50c1xcXCJdYCkudGV4dENvbnRlbnQ7XG4gIGNvbnN0IGJsb2NrID0gSlNPTi5wYXJzZShiNjREZWNvZGUoc2NyaXB0Q29udGVudCkpO1xuXG4gIC8vIERlZmF1bHQgZXhlcmNpc2UgY29uZmlndXJhdGlvblxuICBjb25zdCBvcHRpb25zID0gT2JqZWN0LmFzc2lnbihcbiAgICB7XG4gICAgICBpZDogXCJ3ZWJyLTctY29udGVudHNcIixcbiAgICAgIGVudmlyOiBgZXhlcmNpc2UtZW52LSR7YmxvY2suYXR0ci5leGVyY2lzZX1gLFxuICAgICAgZXJyb3I6IGZhbHNlLFxuICAgICAgY2FwdGlvbjogJ0V4ZXJjaXNlJyxcbiAgICB9LFxuICAgIGJsb2NrLmF0dHJcbiAgKTtcblxuICBjb25zdCBlZGl0b3IgPSBuZXcgV2ViUkV4ZXJjaXNlRWRpdG9yKHdlYlJPanMud2ViUlByb21pc2UsIGJsb2NrLmNvZGUsIG9wdGlvbnMpO1xuICByZXR1cm4gZWRpdG9yLmNvbnRhaW5lcjtcbn1cbnZpZXdvZiBfd2Vicl92YWx1ZV83ID0gd2ViUk9qcy5wcm9jZXNzKF93ZWJyX2VkaXRvcl83LCB7fSk7XG5fd2Vicl9mZWVkYmFja183ID0ge1xuICBjb25zdCB7IFdlYlJHcmFkZXIgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG4gIGNvbnN0IGVtcHR5RmVlZGJhY2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuICBjb25zdCBncmFkZXIgPSBuZXcgV2ViUkdyYWRlcihfd2Vicl92YWx1ZV83LmV2YWx1YXRvcik7XG4gIGNvbnN0IGZlZWRiYWNrID0gYXdhaXQgZ3JhZGVyLmdyYWRlRXhlcmNpc2UoKTtcbiAgaWYgKCFmZWVkYmFjaykgcmV0dXJuIGVtcHR5RmVlZGJhY2s7XG4gIHJldHVybiBmZWVkYmFjaztcbn1cbiJ9LHsiY2VsbE5hbWUiOiJ3ZWJyLXdpZGdldC02IiwiaW5saW5lIjpmYWxzZSwibWV0aG9kTmFtZSI6ImludGVycHJldFF1aWV0Iiwic291cmNlIjoie1xuICAvLyBXYWl0IGZvciBvdXRwdXQgdG8gYmUgd3JpdHRlbiB0byB0aGUgRE9NLCB0aGVuIHRyaWdnZXIgd2lkZ2V0IHJlbmRlcmluZ1xuICBhd2FpdCBfd2Vicl92YWx1ZV82O1xuICBpZiAod2luZG93LkhUTUxXaWRnZXRzKSB7XG4gICAgd2luZG93LkhUTUxXaWRnZXRzLnN0YXRpY1JlbmRlcigpO1xuICB9XG4gIGlmICh3aW5kb3cuUGFnZWRUYWJsZURvYykge1xuICAgIHdpbmRvdy5QYWdlZFRhYmxlRG9jLmluaXRBbGwoKTtcbiAgfVxufVxuIn0seyJjZWxsTmFtZSI6IndlYnItNiIsImlubGluZSI6ZmFsc2UsIm1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJzb3VyY2UiOiJ2aWV3b2YgX3dlYnJfZWRpdG9yXzYgPSB7XG4gIGNvbnN0IHsgV2ViUkV4ZXJjaXNlRWRpdG9yLCBiNjREZWNvZGUgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG4gIGNvbnN0IHNjcmlwdENvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBzY3JpcHRbdHlwZT1cXFwid2Vici02LWNvbnRlbnRzXFxcIl1gKS50ZXh0Q29udGVudDtcbiAgY29uc3QgYmxvY2sgPSBKU09OLnBhcnNlKGI2NERlY29kZShzY3JpcHRDb250ZW50KSk7XG5cbiAgLy8gRGVmYXVsdCBleGVyY2lzZSBjb25maWd1cmF0aW9uXG4gIGNvbnN0IG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKFxuICAgIHtcbiAgICAgIGlkOiBcIndlYnItNi1jb250ZW50c1wiLFxuICAgICAgZW52aXI6IGBleGVyY2lzZS1lbnYtJHtibG9jay5hdHRyLmV4ZXJjaXNlfWAsXG4gICAgICBlcnJvcjogZmFsc2UsXG4gICAgICBjYXB0aW9uOiAnRXhlcmNpc2UnLFxuICAgIH0sXG4gICAgYmxvY2suYXR0clxuICApO1xuXG4gIGNvbnN0IGVkaXRvciA9IG5ldyBXZWJSRXhlcmNpc2VFZGl0b3Iod2ViUk9qcy53ZWJSUHJvbWlzZSwgYmxvY2suY29kZSwgb3B0aW9ucyk7XG4gIHJldHVybiBlZGl0b3IuY29udGFpbmVyO1xufVxudmlld29mIF93ZWJyX3ZhbHVlXzYgPSB3ZWJST2pzLnByb2Nlc3MoX3dlYnJfZWRpdG9yXzYsIHt9KTtcbl93ZWJyX2ZlZWRiYWNrXzYgPSB7XG4gIGNvbnN0IHsgV2ViUkdyYWRlciB9ID0gd2luZG93Ll9leGVyY2lzZV9vanNfcnVudGltZTtcbiAgY29uc3QgZW1wdHlGZWVkYmFjayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gIGNvbnN0IGdyYWRlciA9IG5ldyBXZWJSR3JhZGVyKF93ZWJyX3ZhbHVlXzYuZXZhbHVhdG9yKTtcbiAgY29uc3QgZmVlZGJhY2sgPSBhd2FpdCBncmFkZXIuZ3JhZGVFeGVyY2lzZSgpO1xuICBpZiAoIWZlZWRiYWNrKSByZXR1cm4gZW1wdHlGZWVkYmFjaztcbiAgcmV0dXJuIGZlZWRiYWNrO1xufVxuIn0seyJjZWxsTmFtZSI6IndlYnItd2lkZ2V0LTUiLCJpbmxpbmUiOmZhbHNlLCJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQiLCJzb3VyY2UiOiJ7XG4gIC8vIFdhaXQgZm9yIG91dHB1dCB0byBiZSB3cml0dGVuIHRvIHRoZSBET00sIHRoZW4gdHJpZ2dlciB3aWRnZXQgcmVuZGVyaW5nXG4gIGF3YWl0IF93ZWJyX3ZhbHVlXzU7XG4gIGlmICh3aW5kb3cuSFRNTFdpZGdldHMpIHtcbiAgICB3aW5kb3cuSFRNTFdpZGdldHMuc3RhdGljUmVuZGVyKCk7XG4gIH1cbiAgaWYgKHdpbmRvdy5QYWdlZFRhYmxlRG9jKSB7XG4gICAgd2luZG93LlBhZ2VkVGFibGVEb2MuaW5pdEFsbCgpO1xuICB9XG59XG4ifSx7ImNlbGxOYW1lIjoid2Vici01IiwiaW5saW5lIjpmYWxzZSwibWV0aG9kTmFtZSI6ImludGVycHJldCIsInNvdXJjZSI6InZpZXdvZiBfd2Vicl9lZGl0b3JfNSA9IHtcbiAgY29uc3QgeyBXZWJSRXhlcmNpc2VFZGl0b3IsIGI2NERlY29kZSB9ID0gd2luZG93Ll9leGVyY2lzZV9vanNfcnVudGltZTtcbiAgY29uc3Qgc2NyaXB0Q29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYHNjcmlwdFt0eXBlPVxcXCJ3ZWJyLTUtY29udGVudHNcXFwiXWApLnRleHRDb250ZW50O1xuICBjb25zdCBibG9jayA9IEpTT04ucGFyc2UoYjY0RGVjb2RlKHNjcmlwdENvbnRlbnQpKTtcblxuICAvLyBEZWZhdWx0IGV4ZXJjaXNlIGNvbmZpZ3VyYXRpb25cbiAgY29uc3Qgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oXG4gICAge1xuICAgICAgaWQ6IFwid2Vici01LWNvbnRlbnRzXCIsXG4gICAgICBlbnZpcjogYGV4ZXJjaXNlLWVudi0ke2Jsb2NrLmF0dHIuZXhlcmNpc2V9YCxcbiAgICAgIGVycm9yOiBmYWxzZSxcbiAgICAgIGNhcHRpb246ICdFeGVyY2lzZScsXG4gICAgfSxcbiAgICBibG9jay5hdHRyXG4gICk7XG5cbiAgY29uc3QgZWRpdG9yID0gbmV3IFdlYlJFeGVyY2lzZUVkaXRvcih3ZWJST2pzLndlYlJQcm9taXNlLCBibG9jay5jb2RlLCBvcHRpb25zKTtcbiAgcmV0dXJuIGVkaXRvci5jb250YWluZXI7XG59XG52aWV3b2YgX3dlYnJfdmFsdWVfNSA9IHdlYlJPanMucHJvY2Vzcyhfd2Vicl9lZGl0b3JfNSwge30pO1xuX3dlYnJfZmVlZGJhY2tfNSA9IHtcbiAgY29uc3QgeyBXZWJSR3JhZGVyIH0gPSB3aW5kb3cuX2V4ZXJjaXNlX29qc19ydW50aW1lO1xuICBjb25zdCBlbXB0eUZlZWRiYWNrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cbiAgY29uc3QgZ3JhZGVyID0gbmV3IFdlYlJHcmFkZXIoX3dlYnJfdmFsdWVfNS5ldmFsdWF0b3IpO1xuICBjb25zdCBmZWVkYmFjayA9IGF3YWl0IGdyYWRlci5ncmFkZUV4ZXJjaXNlKCk7XG4gIGlmICghZmVlZGJhY2spIHJldHVybiBlbXB0eUZlZWRiYWNrO1xuICByZXR1cm4gZmVlZGJhY2s7XG59XG4ifSx7ImNlbGxOYW1lIjoid2Vici13aWRnZXQtNCIsImlubGluZSI6ZmFsc2UsIm1ldGhvZE5hbWUiOiJpbnRlcnByZXRRdWlldCIsInNvdXJjZSI6IntcbiAgLy8gV2FpdCBmb3Igb3V0cHV0IHRvIGJlIHdyaXR0ZW4gdG8gdGhlIERPTSwgdGhlbiB0cmlnZ2VyIHdpZGdldCByZW5kZXJpbmdcbiAgYXdhaXQgX3dlYnJfdmFsdWVfNDtcbiAgaWYgKHdpbmRvdy5IVE1MV2lkZ2V0cykge1xuICAgIHdpbmRvdy5IVE1MV2lkZ2V0cy5zdGF0aWNSZW5kZXIoKTtcbiAgfVxuICBpZiAod2luZG93LlBhZ2VkVGFibGVEb2MpIHtcbiAgICB3aW5kb3cuUGFnZWRUYWJsZURvYy5pbml0QWxsKCk7XG4gIH1cbn1cbiJ9LHsiY2VsbE5hbWUiOiJ3ZWJyLTQiLCJpbmxpbmUiOmZhbHNlLCJtZXRob2ROYW1lIjoiaW50ZXJwcmV0Iiwic291cmNlIjoidmlld29mIF93ZWJyX2VkaXRvcl80ID0ge1xuICBjb25zdCB7IFdlYlJFeGVyY2lzZUVkaXRvciwgYjY0RGVjb2RlIH0gPSB3aW5kb3cuX2V4ZXJjaXNlX29qc19ydW50aW1lO1xuICBjb25zdCBzY3JpcHRDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihgc2NyaXB0W3R5cGU9XFxcIndlYnItNC1jb250ZW50c1xcXCJdYCkudGV4dENvbnRlbnQ7XG4gIGNvbnN0IGJsb2NrID0gSlNPTi5wYXJzZShiNjREZWNvZGUoc2NyaXB0Q29udGVudCkpO1xuXG4gIC8vIERlZmF1bHQgZXhlcmNpc2UgY29uZmlndXJhdGlvblxuICBjb25zdCBvcHRpb25zID0gT2JqZWN0LmFzc2lnbihcbiAgICB7XG4gICAgICBpZDogXCJ3ZWJyLTQtY29udGVudHNcIixcbiAgICAgIGVudmlyOiBgZXhlcmNpc2UtZW52LSR7YmxvY2suYXR0ci5leGVyY2lzZX1gLFxuICAgICAgZXJyb3I6IGZhbHNlLFxuICAgICAgY2FwdGlvbjogJ0V4ZXJjaXNlJyxcbiAgICB9LFxuICAgIGJsb2NrLmF0dHJcbiAgKTtcblxuICBjb25zdCBlZGl0b3IgPSBuZXcgV2ViUkV4ZXJjaXNlRWRpdG9yKHdlYlJPanMud2ViUlByb21pc2UsIGJsb2NrLmNvZGUsIG9wdGlvbnMpO1xuICByZXR1cm4gZWRpdG9yLmNvbnRhaW5lcjtcbn1cbnZpZXdvZiBfd2Vicl92YWx1ZV80ID0gd2ViUk9qcy5wcm9jZXNzKF93ZWJyX2VkaXRvcl80LCB7fSk7XG5fd2Vicl9mZWVkYmFja180ID0ge1xuICBjb25zdCB7IFdlYlJHcmFkZXIgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG4gIGNvbnN0IGVtcHR5RmVlZGJhY2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuICBjb25zdCBncmFkZXIgPSBuZXcgV2ViUkdyYWRlcihfd2Vicl92YWx1ZV80LmV2YWx1YXRvcik7XG4gIGNvbnN0IGZlZWRiYWNrID0gYXdhaXQgZ3JhZGVyLmdyYWRlRXhlcmNpc2UoKTtcbiAgaWYgKCFmZWVkYmFjaykgcmV0dXJuIGVtcHR5RmVlZGJhY2s7XG4gIHJldHVybiBmZWVkYmFjaztcbn1cbiJ9LHsiY2VsbE5hbWUiOiJ3ZWJyLXdpZGdldC0zIiwiaW5saW5lIjpmYWxzZSwibWV0aG9kTmFtZSI6ImludGVycHJldFF1aWV0Iiwic291cmNlIjoie1xuICAvLyBXYWl0IGZvciBvdXRwdXQgdG8gYmUgd3JpdHRlbiB0byB0aGUgRE9NLCB0aGVuIHRyaWdnZXIgd2lkZ2V0IHJlbmRlcmluZ1xuICBhd2FpdCBfd2Vicl92YWx1ZV8zO1xuICBpZiAod2luZG93LkhUTUxXaWRnZXRzKSB7XG4gICAgd2luZG93LkhUTUxXaWRnZXRzLnN0YXRpY1JlbmRlcigpO1xuICB9XG4gIGlmICh3aW5kb3cuUGFnZWRUYWJsZURvYykge1xuICAgIHdpbmRvdy5QYWdlZFRhYmxlRG9jLmluaXRBbGwoKTtcbiAgfVxufVxuIn0seyJjZWxsTmFtZSI6IndlYnItMyIsImlubGluZSI6ZmFsc2UsIm1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJzb3VyY2UiOiJ2aWV3b2YgX3dlYnJfZWRpdG9yXzMgPSB7XG4gIGNvbnN0IHsgV2ViUkV4ZXJjaXNlRWRpdG9yLCBiNjREZWNvZGUgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG4gIGNvbnN0IHNjcmlwdENvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBzY3JpcHRbdHlwZT1cXFwid2Vici0zLWNvbnRlbnRzXFxcIl1gKS50ZXh0Q29udGVudDtcbiAgY29uc3QgYmxvY2sgPSBKU09OLnBhcnNlKGI2NERlY29kZShzY3JpcHRDb250ZW50KSk7XG5cbiAgLy8gRGVmYXVsdCBleGVyY2lzZSBjb25maWd1cmF0aW9uXG4gIGNvbnN0IG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKFxuICAgIHtcbiAgICAgIGlkOiBcIndlYnItMy1jb250ZW50c1wiLFxuICAgICAgZW52aXI6IGBleGVyY2lzZS1lbnYtJHtibG9jay5hdHRyLmV4ZXJjaXNlfWAsXG4gICAgICBlcnJvcjogZmFsc2UsXG4gICAgICBjYXB0aW9uOiAnRXhlcmNpc2UnLFxuICAgIH0sXG4gICAgYmxvY2suYXR0clxuICApO1xuXG4gIGNvbnN0IGVkaXRvciA9IG5ldyBXZWJSRXhlcmNpc2VFZGl0b3Iod2ViUk9qcy53ZWJSUHJvbWlzZSwgYmxvY2suY29kZSwgb3B0aW9ucyk7XG4gIHJldHVybiBlZGl0b3IuY29udGFpbmVyO1xufVxudmlld29mIF93ZWJyX3ZhbHVlXzMgPSB3ZWJST2pzLnByb2Nlc3MoX3dlYnJfZWRpdG9yXzMsIHt9KTtcbl93ZWJyX2ZlZWRiYWNrXzMgPSB7XG4gIGNvbnN0IHsgV2ViUkdyYWRlciB9ID0gd2luZG93Ll9leGVyY2lzZV9vanNfcnVudGltZTtcbiAgY29uc3QgZW1wdHlGZWVkYmFjayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gIGNvbnN0IGdyYWRlciA9IG5ldyBXZWJSR3JhZGVyKF93ZWJyX3ZhbHVlXzMuZXZhbHVhdG9yKTtcbiAgY29uc3QgZmVlZGJhY2sgPSBhd2FpdCBncmFkZXIuZ3JhZGVFeGVyY2lzZSgpO1xuICBpZiAoIWZlZWRiYWNrKSByZXR1cm4gZW1wdHlGZWVkYmFjaztcbiAgcmV0dXJuIGZlZWRiYWNrO1xufVxuIn0seyJjZWxsTmFtZSI6IndlYnItd2lkZ2V0LTIiLCJpbmxpbmUiOmZhbHNlLCJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQiLCJzb3VyY2UiOiJ7XG4gIC8vIFdhaXQgZm9yIG91dHB1dCB0byBiZSB3cml0dGVuIHRvIHRoZSBET00sIHRoZW4gdHJpZ2dlciB3aWRnZXQgcmVuZGVyaW5nXG4gIGF3YWl0IF93ZWJyX3ZhbHVlXzI7XG4gIGlmICh3aW5kb3cuSFRNTFdpZGdldHMpIHtcbiAgICB3aW5kb3cuSFRNTFdpZGdldHMuc3RhdGljUmVuZGVyKCk7XG4gIH1cbiAgaWYgKHdpbmRvdy5QYWdlZFRhYmxlRG9jKSB7XG4gICAgd2luZG93LlBhZ2VkVGFibGVEb2MuaW5pdEFsbCgpO1xuICB9XG59XG4ifSx7ImNlbGxOYW1lIjoid2Vici0yIiwiaW5saW5lIjpmYWxzZSwibWV0aG9kTmFtZSI6ImludGVycHJldCIsInNvdXJjZSI6InZpZXdvZiBfd2Vicl9lZGl0b3JfMiA9IHtcbiAgY29uc3QgeyBXZWJSRXhlcmNpc2VFZGl0b3IsIGI2NERlY29kZSB9ID0gd2luZG93Ll9leGVyY2lzZV9vanNfcnVudGltZTtcbiAgY29uc3Qgc2NyaXB0Q29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYHNjcmlwdFt0eXBlPVxcXCJ3ZWJyLTItY29udGVudHNcXFwiXWApLnRleHRDb250ZW50O1xuICBjb25zdCBibG9jayA9IEpTT04ucGFyc2UoYjY0RGVjb2RlKHNjcmlwdENvbnRlbnQpKTtcblxuICAvLyBEZWZhdWx0IGV4ZXJjaXNlIGNvbmZpZ3VyYXRpb25cbiAgY29uc3Qgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oXG4gICAge1xuICAgICAgaWQ6IFwid2Vici0yLWNvbnRlbnRzXCIsXG4gICAgICBlbnZpcjogYGV4ZXJjaXNlLWVudi0ke2Jsb2NrLmF0dHIuZXhlcmNpc2V9YCxcbiAgICAgIGVycm9yOiBmYWxzZSxcbiAgICAgIGNhcHRpb246ICdFeGVyY2lzZScsXG4gICAgfSxcbiAgICBibG9jay5hdHRyXG4gICk7XG5cbiAgY29uc3QgZWRpdG9yID0gbmV3IFdlYlJFeGVyY2lzZUVkaXRvcih3ZWJST2pzLndlYlJQcm9taXNlLCBibG9jay5jb2RlLCBvcHRpb25zKTtcbiAgcmV0dXJuIGVkaXRvci5jb250YWluZXI7XG59XG52aWV3b2YgX3dlYnJfdmFsdWVfMiA9IHdlYlJPanMucHJvY2Vzcyhfd2Vicl9lZGl0b3JfMiwge30pO1xuX3dlYnJfZmVlZGJhY2tfMiA9IHtcbiAgY29uc3QgeyBXZWJSR3JhZGVyIH0gPSB3aW5kb3cuX2V4ZXJjaXNlX29qc19ydW50aW1lO1xuICBjb25zdCBlbXB0eUZlZWRiYWNrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cbiAgY29uc3QgZ3JhZGVyID0gbmV3IFdlYlJHcmFkZXIoX3dlYnJfdmFsdWVfMi5ldmFsdWF0b3IpO1xuICBjb25zdCBmZWVkYmFjayA9IGF3YWl0IGdyYWRlci5ncmFkZUV4ZXJjaXNlKCk7XG4gIGlmICghZmVlZGJhY2spIHJldHVybiBlbXB0eUZlZWRiYWNrO1xuICByZXR1cm4gZmVlZGJhY2s7XG59XG4ifSx7ImNlbGxOYW1lIjoid2Vici1wcmVsdWRlIiwiaW5saW5lIjpmYWxzZSwibWV0aG9kTmFtZSI6ImludGVycHJldFF1aWV0Iiwic291cmNlIjoid2ViUk9qcyA9IHtcbiAgY29uc3QgeyBXZWJSLCBDaGFubmVsVHlwZSB9ID0gd2luZG93Ll9leGVyY2lzZV9vanNfcnVudGltZS5XZWJSO1xuICBjb25zdCB7XG4gICAgV2ViUkV2YWx1YXRvcixcbiAgICBXZWJSRW52aXJvbm1lbnRNYW5hZ2VyLFxuICAgIHNldHVwUixcbiAgICBiNjREZWNvZGUsXG4gICAgY29sbGFwc2VQYXRoXG4gIH0gPSB3aW5kb3cuX2V4ZXJjaXNlX29qc19ydW50aW1lO1xuXG4gIGNvbnN0IHN0YXR1c0NvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZXhlcmNpc2UtbG9hZGluZy1zdGF0dXNcIik7XG4gIGNvbnN0IGluZGljYXRvckNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZXhlcmNpc2UtbG9hZGluZy1pbmRpY2F0b3JcIik7XG4gIGluZGljYXRvckNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKFwiZC1ub25lXCIpO1xuXG4gIGxldCBzdGF0dXNUZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKVxuICBzdGF0dXNUZXh0LmNsYXNzTGlzdCA9IFwiZXhlcmNpc2UtbG9hZGluZy1kZXRhaWxzXCI7XG4gIHN0YXR1c1RleHQgPSBzdGF0dXNDb250YWluZXIuYXBwZW5kQ2hpbGQoc3RhdHVzVGV4dCk7XG4gIHN0YXR1c1RleHQudGV4dENvbnRlbnQgPSBgSW5pdGlhbGlzZWA7XG5cbiAgLy8gSG9pc3QgaW5kaWNhdG9yIG91dCBmcm9tIGZpbmFsIHNsaWRlIHdoZW4gcnVubmluZyB1bmRlciByZXZlYWxcbiAgY29uc3QgcmV2ZWFsU3RhdHVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5yZXZlYWwgLmV4ZXJjaXNlLWxvYWRpbmctaW5kaWNhdG9yXCIpO1xuICBpZiAocmV2ZWFsU3RhdHVzKSB7XG4gICAgcmV2ZWFsU3RhdHVzLnJlbW92ZSgpO1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucmV2ZWFsID4gLnNsaWRlc1wiKS5hcHBlbmRDaGlsZChyZXZlYWxTdGF0dXMpO1xuICB9XG5cbiAgLy8gTWFrZSBhbnkgcmV2ZWFsIHNsaWRlcyB3aXRoIGxpdmUgY2VsbHMgc2Nyb2xsYWJsZVxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnJldmVhbCAuZXhlcmNpc2UtY2VsbFwiKS5mb3JFYWNoKChlbCkgPT4ge1xuICAgIGVsLmNsb3Nlc3QoJ3NlY3Rpb24uc2xpZGUnKS5jbGFzc0xpc3QuYWRkKFwic2Nyb2xsYWJsZVwiKTtcbiAgfSlcblxuICAvLyB3ZWJSIHN1cHBsZW1lbnRhbCBkYXRhIGFuZCBvcHRpb25zXG4gIGNvbnN0IGRhdGFDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihgc2NyaXB0W3R5cGU9XFxcIndlYnItZGF0YVxcXCJdYCkudGV4dENvbnRlbnQ7XG4gIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKGI2NERlY29kZShkYXRhQ29udGVudCkpO1xuXG4gIC8vIEdyYWIgbGlzdCBvZiByZXNvdXJjZXMgdG8gYmUgZG93bmxvYWRlZFxuICBjb25zdCBmaWxlc0NvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBzY3JpcHRbdHlwZT1cXFwidmZzLWZpbGVcXFwiXWApLnRleHRDb250ZW50O1xuICBjb25zdCBmaWxlcyA9IEpTT04ucGFyc2UoYjY0RGVjb2RlKGZpbGVzQ29udGVudCkpO1xuXG4gIC8vIFVzZSBQb3N0TWVzc2FnZSBjaGFubmVsIGZvciBhc3luYyBjb21tdW5pY2F0aW9uXG4gIC8vIFdlIGRvIG5vdCBleHBlY3QgdG8gdGFrZSBuZXN0ZWQgcHJvbXB0IGlucHV0IGluIFF1YXJ0byBMaXZlIGNlbGxzXG4gIGRhdGEub3B0aW9ucy5jaGFubmVsVHlwZSA9IENoYW5uZWxUeXBlLlBvc3RNZXNzYWdlO1xuXG4gIC8vIEluaXRpYWxpc2Ugd2ViUiBhbmQgc2V0dXAgZm9yIFIgY29kZSBldmFsdWF0aW9uXG4gIGxldCB3ZWJSUHJvbWlzZSA9IChhc3luYyAod2ViUikgPT4ge1xuICAgIHN0YXR1c1RleHQudGV4dENvbnRlbnQgPSBgRG93bmxvYWRpbmcgd2ViUmA7XG4gICAgYXdhaXQgd2ViUi5pbml0KCk7XG5cbiAgICAvLyBJbnN0YWxsIHByb3ZpZGVkIGxpc3Qgb2YgcGFja2FnZXNcbiAgICAvLyBFbnN1cmUgd2ViUiBkZWZhdWx0IHJlcG8gaXMgaW5jbHVkZWRcbiAgICBkYXRhLnBhY2thZ2VzLnJlcG9zLnB1c2goXCJodHRwczovL3JlcG8uci13YXNtLm9yZ1wiKVxuICAgIGF3YWl0IGRhdGEucGFja2FnZXMucGtncy5tYXAoKHBrZykgPT4gKCkgPT4ge1xuICAgICAgc3RhdHVzVGV4dC50ZXh0Q29udGVudCA9IGBEb3dubG9hZGluZyBwYWNrYWdlOiAke3BrZ31gO1xuICAgICAgcmV0dXJuIHdlYlIuZXZhbFJWb2lkKGBcbiAgICAgICAgd2Vicjo6aW5zdGFsbChwa2csIHJlcG9zID0gcmVwb3MpXG4gICAgICAgIGxpYnJhcnkocGtnLCBjaGFyYWN0ZXIub25seSA9IFRSVUUpXG4gICAgICBgLCB7IGVudjoge1xuICAgICAgICBwa2c6IHBrZyxcbiAgICAgICAgcmVwb3M6IGRhdGEucGFja2FnZXMucmVwb3MsXG4gICAgICB9fSk7XG4gICAgfSkucmVkdWNlKChjdXIsIG5leHQpID0+IGN1ci50aGVuKG5leHQpLCBQcm9taXNlLnJlc29sdmUoKSk7XG5cbiAgICAvLyBEb3dubG9hZCBhbmQgaW5zdGFsbCByZXNvdXJjZXNcbiAgICBhd2FpdCBmaWxlcy5tYXAoKGZpbGUpID0+IGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG5hbWUgPSBmaWxlLnN1YnN0cmluZyhmaWxlLmxhc3RJbmRleE9mKCcvJykgKyAxKTtcbiAgICAgIHN0YXR1c1RleHQudGV4dENvbnRlbnQgPSBgRG93bmxvYWRpbmcgcmVzb3VyY2U6ICR7bmFtZX1gO1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChmaWxlKTtcbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDYW4ndCBkb3dubG9hZCBcXGAke2ZpbGV9XFxgLiBFcnJvciAke3Jlc3BvbnNlLnN0YXR1c306IFwiJHtyZXNwb25zZS5zdGF0dXNUZXh0fVwiLmApO1xuICAgICAgfVxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmFycmF5QnVmZmVyKCk7XG5cbiAgICAgIC8vIFN0b3JlIFVSTHMgaW4gdGhlIGN3ZCB3aXRob3V0IGFueSBzdWJkaXJlY3Rvcnkgc3RydWN0dXJlXG4gICAgICBpZiAoZmlsZS5pbmNsdWRlcyhcIjovL1wiKSkge1xuICAgICAgICBmaWxlID0gbmFtZTtcbiAgICAgIH1cblxuICAgICAgLy8gQ29sbGFwc2UgaGlnaGVyIGRpcmVjdG9yeSBzdHJ1Y3R1cmVcbiAgICAgIGZpbGUgPSBjb2xsYXBzZVBhdGgoZmlsZSk7XG5cbiAgICAgIC8vIENyZWF0ZSBkaXJlY3RvcnkgdHJlZSwgaWdub3JpbmcgXCJkaXJlY3RvcnkgZXhpc3RzXCIgVkZTIGVycm9yc1xuICAgICAgY29uc3QgcGFydHMgPSBmaWxlLnNwbGl0KCcvJykuc2xpY2UoMCwgLTEpO1xuICAgICAgbGV0IHBhdGggPSAnJztcbiAgICAgIHdoaWxlIChwYXJ0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHBhdGggKz0gcGFydHMuc2hpZnQoKSArICcvJztcbiAgICAgICAgY29uc3QgYW5hbHlzaXMgPSBhd2FpdCB3ZWJSLkZTLmFuYWx5emVQYXRoKHBhdGgpO1xuICAgICAgICBpZiAoIWFuYWx5c2lzLmV4aXN0cykge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCB3ZWJSLkZTLm1rZGlyKHBhdGgpO1xuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRmlsZXN5c3RlbSBFcnJvcjogXCIke2UubWVzc2FnZX1cIi5gKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gV3JpdGUgdGhpcyBmaWxlIHRvIHRoZSBWRlNcbiAgICAgIHJldHVybiBhd2FpdCB3ZWJSLkZTLndyaXRlRmlsZShmaWxlLCBuZXcgVWludDhBcnJheShkYXRhKSk7XG4gICAgfSkucmVkdWNlKChjdXIsIG5leHQpID0+IGN1ci50aGVuKG5leHQpLCBQcm9taXNlLnJlc29sdmUoKSk7XG5cbiAgICBzdGF0dXNUZXh0LnRleHRDb250ZW50ID0gYEluc3RhbGxpbmcgd2ViUiBzaGltc2A7XG4gICAgYXdhaXQgd2ViUi5ldmFsUlZvaWQoYHdlYnI6OnNoaW1faW5zdGFsbCgpYCk7XG5cbiAgICBzdGF0dXNUZXh0LnRleHRDb250ZW50ID0gYFdlYlIgZW52aXJvbm1lbnQgc2V0dXBgO1xuICAgIGF3YWl0IHNldHVwUih3ZWJSLCBkYXRhKTtcblxuICAgIHN0YXR1c1RleHQucmVtb3ZlKCk7XG4gICAgaWYgKHN0YXR1c0NvbnRhaW5lci5jaGlsZHJlbi5sZW5ndGggPT0gMCkge1xuICAgICAgc3RhdHVzQ29udGFpbmVyLnBhcmVudE5vZGUucmVtb3ZlKCk7XG4gICAgfVxuICAgIHJldHVybiB3ZWJSO1xuICB9KShuZXcgV2ViUihkYXRhLm9wdGlvbnMpKTtcblxuICAvLyBLZWVwIHRyYWNrIG9mIGluaXRpYWwgT0pTIGJsb2NrIHJlbmRlclxuICBjb25zdCByZW5kZXJlZE9qcyA9IHt9O1xuXG4gIGNvbnN0IHByb2Nlc3MgPSBhc3luYyAoY29udGV4dCwgaW5wdXRzKSA9PiB7XG4gICAgY29uc3Qgd2ViUiA9IGF3YWl0IHdlYlJQcm9taXNlO1xuICAgIGNvbnN0IGV2YWx1YXRvciA9IG5ldyBXZWJSRXZhbHVhdG9yKHdlYlIsIGNvbnRleHQpXG4gICAgYXdhaXQgZXZhbHVhdG9yLnByb2Nlc3MoaW5wdXRzKTtcbiAgICByZXR1cm4gZXZhbHVhdG9yLmNvbnRhaW5lcjtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgcHJvY2VzcyxcbiAgICB3ZWJSUHJvbWlzZSxcbiAgICByZW5kZXJlZE9qcyxcbiAgfTtcbn1cbiJ9XX0=
</script>
<div id="exercise-loading-indicator" class="exercise-loading-indicator d-none d-flex align-items-center gap-2">
<div id="exercise-loading-status" class="d-flex gap-2">

</div>
<div class="spinner-grow spinner-grow-sm">

</div>
</div>
<script type="vfs-file">
WyJkYXRhL2hlaWdodHMuZHRhIiwiZGF0YS9ncmF0aXR1ZGUtZXhwZXJpbWVudC5jc3YiLCJkYXRhL01hbW1hbE1ldGFib2xpY1JhdGVzLmNzdiIsImRhdGEvZWxlcGhhbnRTdXJ2ZXkuY3N2IiwiZGF0YS9lYm9sYS1XQVNILmNzdiIsImRhdGEvZmlzaC5jc3YiLCJkYXRhL2h5ZHJhdGlvbkRhdGEuY3N2IiwiZGF0YS91bml2ZXJzaXR5X3RlYWNoZXJzLmNzdiIsImRhdGEvMUQtTWVtb3J5IE5haXZlLnhsc3giLCJkYXRhL2dyci13ZWF0aGVyLW1ldHJpYy5jc3YiLCJkYXRhL3B3ZC5jc3YiLCJkYXRhL0NTQUFsbGRhdGEueGxzeCIsImRhdGEvSGFEaXZlUGFyYW1ldGVycy5jc3YiLCJkYXRhL3JzYmwyMDE3MDM5NV9zaV8wMDMuY3N2IiwiZGF0YS9GbGludFdhdGVyVGVzdEphbk1hcjIwMTYuY3N2IiwiZGF0YS9Qcm9mRXZhbHRuc0JlYXV0eVB1YmxpYy5jc3YiLCJkYXRhL0VJQXByb3BkYXRhLmNzdiIsImRhdGEvYnJpZGdlcy5jc3YiLCJkYXRhL3pzaGFsLmNzdiIsImRhdGEvZ2FwbWluZGVyX2NsZWFuLmNzdiIsImRhdGEvZnJvZy1hYm5vcm1hbGl0aWVzLmNzdiIsImRhdGEvYm9ub2JvX2ZhY2VzLmNzdiIsImRhdGEvYmVlLXZpcnVzLmNzdiJd
</script>
</section>
</section>

</main> <!-- /main -->
<script>

/* update total correct if #webex-total_correct exists */
update_total_correct = function() {
  console.log("webex: update total_correct");

  var t = document.getElementsByClassName("webex-total_correct");
  for (var i = 0; i < t.length; i++) {
    p = t[i].parentElement;
    var correct = p.getElementsByClassName("webex-correct").length;
    var solvemes = p.getElementsByClassName("webex-solveme").length;
    var radiogroups = p.getElementsByClassName("webex-radiogroup").length;
    var selects = p.getElementsByClassName("webex-select").length;

    t[i].innerHTML = correct + " of " + (solvemes + radiogroups + selects) + " correct";
  }
}

/* webex-solution button toggling function */
b_func = function() {
  console.log("webex: toggle hide");

  var cl = this.parentElement.classList;
  if (cl.contains('open')) {
    cl.remove("open");
  } else {
    cl.add("open");
  }
}

/* check answers */
check_func = function() {
  console.log("webex: check answers");

  var cl = this.parentElement.classList;
  if (cl.contains('unchecked')) {
    cl.remove("unchecked");
    this.innerHTML = "Hide Answers";
  } else {
    cl.add("unchecked");
    this.innerHTML = "Show Answers";
  }
}

/* function for checking solveme answers */
solveme_func = function(e) {
  console.log("webex: check solveme");

  var real_answers = JSON.parse(this.dataset.answer);
  var my_answer = this.value;
  var cl = this.classList;
  if (cl.contains("ignorecase")) {
    my_answer = my_answer.toLowerCase();
  }
  if (cl.contains("nospaces")) {
    my_answer = my_answer.replace(/ /g, "")
  }

  if (my_answer == "") {
    cl.remove("webex-correct");
    cl.remove("webex-incorrect");
  } else if (real_answers.includes(my_answer)) {
    cl.add("webex-correct");
    cl.remove("webex-incorrect");
  } else {
    cl.add("webex-incorrect");
    cl.remove("webex-correct");
  }

  // match numeric answers within a specified tolerance
  if(this.dataset.tol > 0){
    var tol = JSON.parse(this.dataset.tol);
    var matches = real_answers.map(x => Math.abs(x - my_answer) < tol)
    if (matches.reduce((a, b) => a + b, 0) > 0) {
      cl.add("webex-correct");
    } else {
      cl.remove("webex-correct");
    }
  }

  // added regex bit
  if (cl.contains("regex")){
    answer_regex = RegExp(real_answers.join("|"))
    if (answer_regex.test(my_answer)) {
      cl.add("webex-correct");
    }
  }

  update_total_correct();
}

/* function for checking select answers */
select_func = function(e) {
  console.log("webex: check select");

  var cl = this.classList

  /* add style */
  cl.remove("webex-incorrect");
  cl.remove("webex-correct");
  if (this.value == "answer") {
    cl.add("webex-correct");
  } else if (this.value != "blank") {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

/* function for checking radiogroups answers */
radiogroups_func = function(e) {
  console.log("webex: check radiogroups");

  var checked_button = document.querySelector('input[name=' + this.id + ']:checked');
  var cl = checked_button.parentElement.classList;
  var labels = checked_button.parentElement.parentElement.children;

  /* get rid of styles */
  for (i = 0; i < labels.length; i++) {
    labels[i].classList.remove("webex-incorrect");
    labels[i].classList.remove("webex-correct");
  }

  /* add style */
  if (checked_button.value == "answer") {
    cl.add("webex-correct");
  } else {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

window.onload = function() {
  console.log("webex onload");
  /* set up solution buttons */
  var buttons = document.getElementsByTagName("button");

  for (var i = 0; i < buttons.length; i++) {
    if (buttons[i].parentElement.classList.contains('webex-solution')) {
      buttons[i].onclick = b_func;
    }
  }

  var check_sections = document.getElementsByClassName("webex-check");
  console.log("check:", check_sections.length);
  for (var i = 0; i < check_sections.length; i++) {
    check_sections[i].classList.add("unchecked");

    let btn = document.createElement("button");
    btn.innerHTML = "Show Answers";
    btn.classList.add("webex-check-button");
    btn.onclick = check_func;
    check_sections[i].appendChild(btn);

    let spn = document.createElement("span");
    spn.classList.add("webex-total_correct");
    check_sections[i].appendChild(spn);
  }

  /* set up webex-solveme inputs */
  var solveme = document.getElementsByClassName("webex-solveme");

  for (var i = 0; i < solveme.length; i++) {
    /* make sure input boxes don't auto-anything */
    solveme[i].setAttribute("autocomplete","off");
    solveme[i].setAttribute("autocorrect", "off");
    solveme[i].setAttribute("autocapitalize", "off");
    solveme[i].setAttribute("spellcheck", "false");
    solveme[i].value = "";

    /* adjust answer for ignorecase or nospaces */
    var cl = solveme[i].classList;
    var real_answer = solveme[i].dataset.answer;
    if (cl.contains("ignorecase")) {
      real_answer = real_answer.toLowerCase();
    }
    if (cl.contains("nospaces")) {
      real_answer = real_answer.replace(/ /g, "");
    }
    solveme[i].dataset.answer = real_answer;

    /* attach checking function */
    solveme[i].onkeyup = solveme_func;
    solveme[i].onchange = solveme_func;

    solveme[i].insertAdjacentHTML("afterend", " <span class='webex-icon'></span>")
  }

  /* set up radiogroups */
  var radiogroups = document.getElementsByClassName("webex-radiogroup");
  for (var i = 0; i < radiogroups.length; i++) {
    radiogroups[i].onchange = radiogroups_func;
  }

  /* set up selects */
  var selects = document.getElementsByClassName("webex-select");
  for (var i = 0; i < selects.length; i++) {
    selects[i].onchange = select_func;
    selects[i].insertAdjacentHTML("afterend", " <span class='webex-icon'></span>")
  }

  update_total_correct();
}

</script>
<script type="ojs-module-contents">
eyJjb250ZW50cyI6W119
</script>
<script type="module">
if (window.location.protocol === "file:") { alert("The OJS runtime does not work with file:// URLs. Please use a web server to view this document."); }
window._ojs.paths.runtimeToDoc = "../..";
window._ojs.paths.runtimeToRoot = "../..";
window._ojs.paths.docToRoot = "";
window._ojs.selfContained = false;
window._ojs.runtime.interpretFromScriptTags();
</script>
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "î§‹";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./quasibinomial.html" class="pagination-link" aria-label="Models for Overdispered Binary Data">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">32</span>&nbsp; <span class="chapter-title">Models for Overdispered Binary Data</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./hier1.html" class="pagination-link" aria-label="Hierarchical Models - Introduction">
        <span class="nav-page-text"><span class="chapter-number">34</span>&nbsp; <span class="chapter-title">Hierarchical Models - Introduction</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
    <a class="nav-link" href="./cclicense.html">
<p>License</p>
</a>
  </li>  
</ul>
    <div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/stacyderuiter/data545-tutorials/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li><li><a href="https://github.com/stacyderuiter/data545-tutorials/edit/main/beta.qmd" class="toc-action"><i class="bi empty"></i>Edit this page</a></li></ul></div></div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>