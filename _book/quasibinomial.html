<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>32&nbsp; Models for Overdispered Binary Data – DATA 545 Tutorial</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./beta.html" rel="next">
<link href="./zi-od.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-e22fbe6e69edb8577f7b7bd0719516f0.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script src="site_libs/quarto-contrib/live-runtime/live-runtime.js" type="module"></script>
<link href="site_libs/quarto-contrib/live-runtime/live-runtime.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script type="module" src="site_libs/quarto-ojs/quarto-ojs-runtime.js"></script>
<link href="site_libs/quarto-ojs/quarto-ojs.css" rel="stylesheet">


<link rel="stylesheet" href="_include/webex.css">
</head>

<body class="nav-sidebar floating quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./quasibinomial.html">More Fun Between 0-1</a></li><li class="breadcrumb-item"><a href="./quasibinomial.html"><span class="chapter-number">32</span>&nbsp; <span class="chapter-title">Models for Overdispered Binary Data</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">DATA 545 Tutorial</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/stacyderuiter/data545-tutorials/" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="false">
 <span class="menu-text">Getting Started</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./install-r.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Installation</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./r-basics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">R Basics</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./how-to-quarto.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Using Quarto</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./r-results.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">R Results in Quarto Text</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./math-notation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Math Notation in Quarto</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./graphics-design.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Designing Effective Visualizations</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./graph-design-no-junk.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">What is <em>Necessary</em>?</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./graph-design-color.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Color</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./graph-design-text-elements.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Text Elements</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./graph-design-summary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Summary</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./graphics-choose.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Choose a Graph Type</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./graphics-choose-var-types.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Variable Types</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./graphics-choose-one-cat.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Gallery: One Categorical Variable</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./graphics-choose-one-quant.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Gallery: One Quantitative Variable</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./graphics-choose-multiple-cat.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Gallery: 2-3 Categorical Variables</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./graphics-choose-multiple-quant.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Gallery: Multiple Quantitative Variables</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./graphics-choose-cat-quant-mix.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Gallery: Mixed Quantitative + Categorical</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./graphics-code.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Visualization with ggformula</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./graphics-code-ggformula.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">ggformula and Formulas</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./graphics-code-data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Datasets Used</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./graphics-code-plots.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Code Examples</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./design-intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Study Design &amp; Model Planning</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./design.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Sample and Study Design</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./plan.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Model Planning for Inference</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="false">
 <span class="menu-text">Multiple Linear Regression</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lm-fit.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Fitting Linear Models in R</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lm-assess.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Assessment for Linear Models</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lm-interp.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Interpretation and Inference for Regression Models</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lm-interp-more.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Selection and Inference for Regression Models</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="false">
 <span class="menu-text">Interactions</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./interactions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Interactions in Regression Models</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" role="navigation" aria-expanded="false">
 <span class="menu-text">Likelihood</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./mle.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Maximum Likelihood Estimation</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" role="navigation" aria-expanded="false">
 <span class="menu-text">Count Regression</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-9" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./count-regression-1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">Regression for Count Responses: Formulation</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./count-regression-2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">Interpreting Count Regression</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" role="navigation" aria-expanded="false">
 <span class="menu-text">Binary Regression</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-10" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./binary-regression-1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">29</span>&nbsp; <span class="chapter-title">Regression for Binary Responses (one trial per row)</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./binary-regression-2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">30</span>&nbsp; <span class="chapter-title">Binary Regression <em>Another Way</em>: Multiple Trials Per Row</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-11" role="navigation" aria-expanded="false">
 <span class="menu-text">Zero Inflation</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-11" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-11" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./zi-od.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">31</span>&nbsp; <span class="chapter-title">Zero Inflation for Overdispersed Counts</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-12" role="navigation" aria-expanded="true">
 <span class="menu-text">More Fun Between 0-1</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-12" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-12" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./quasibinomial.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">32</span>&nbsp; <span class="chapter-title">Models for Overdispered Binary Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./beta.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">33</span>&nbsp; <span class="chapter-title">Models for data bounded between 0 and 1</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-13" role="navigation" aria-expanded="false">
 <span class="menu-text">Hierarchical Models</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-13" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-13" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./hier1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">34</span>&nbsp; <span class="chapter-title">Hierarchical Models - Introduction</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./hier2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">35</span>&nbsp; <span class="chapter-title">Hierarchical Models - Interpretation &amp; Prediction</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#section-learning-outcomes" id="toc-section-learning-outcomes" class="nav-link active" data-scroll-target="#section-learning-outcomes"><span class="header-section-number">32.1</span> Section Learning Outcomes</a></li>
  <li><a href="#text-reference" id="toc-text-reference" class="nav-link" data-scroll-target="#text-reference"><span class="header-section-number">32.2</span> Text Reference</a></li>
  <li><a href="#overdispersion-revisited" id="toc-overdispersion-revisited" class="nav-link" data-scroll-target="#overdispersion-revisited"><span class="header-section-number">32.3</span> Overdispersion, revisited</a></li>
  <li><a href="#swimmers-itch" id="toc-swimmers-itch" class="nav-link" data-scroll-target="#swimmers-itch"><span class="header-section-number">32.4</span> Swimmer’s itch</a></li>
  <li><a href="#csa-data-collection" id="toc-csa-data-collection" class="nav-link" data-scroll-target="#csa-data-collection"><span class="header-section-number">32.5</span> CSA Data Collection</a></li>
  <li><a href="#solutions" id="toc-solutions" class="nav-link" data-scroll-target="#solutions"><span class="header-section-number">32.6</span> Solutions</a></li>
  <li><a href="#swimmers-itch-data" id="toc-swimmers-itch-data" class="nav-link" data-scroll-target="#swimmers-itch-data"><span class="header-section-number">32.7</span> Swimmer’s itch data</a></li>
  <li><a href="#data-viz" id="toc-data-viz" class="nav-link" data-scroll-target="#data-viz"><span class="header-section-number">32.8</span> Data Viz</a></li>
  <li><a href="#model" id="toc-model" class="nav-link" data-scroll-target="#model"><span class="header-section-number">32.9</span> Model</a></li>
  <li><a href="#assessment" id="toc-assessment" class="nav-link" data-scroll-target="#assessment"><span class="header-section-number">32.10</span> Assessment</a>
  <ul class="collapse">
  <li><a href="#residual-independence" id="toc-residual-independence" class="nav-link" data-scroll-target="#residual-independence">Residual Independence</a></li>
  <li><a href="#mean-variance-and-linearity" id="toc-mean-variance-and-linearity" class="nav-link" data-scroll-target="#mean-variance-and-linearity">Mean-Variance and Linearity</a></li>
  </ul></li>
  <li><a href="#quasi-binary-regression" id="toc-quasi-binary-regression" class="nav-link" data-scroll-target="#quasi-binary-regression"><span class="header-section-number">32.11</span> Quasi-Binary Regression</a></li>
  <li><a href="#more-assessment" id="toc-more-assessment" class="nav-link" data-scroll-target="#more-assessment"><span class="header-section-number">32.12</span> More Assessment</a></li>
  <li><a href="#quasi-selection" id="toc-quasi-selection" class="nav-link" data-scroll-target="#quasi-selection"><span class="header-section-number">32.13</span> “Quasi” &amp; Selection</a></li>
  <li><a href="#selection" id="toc-selection" class="nav-link" data-scroll-target="#selection"><span class="header-section-number">32.14</span> Selection</a></li>
  <li><a href="#prediction-plots" id="toc-prediction-plots" class="nav-link" data-scroll-target="#prediction-plots"><span class="header-section-number">32.15</span> Prediction Plots</a></li>
  <li><a href="#swimmers-action-items" id="toc-swimmers-action-items" class="nav-link" data-scroll-target="#swimmers-action-items"><span class="header-section-number">32.16</span> Swimmer’s Action Items</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/stacyderuiter/data545-tutorials/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li><li><a href="https://github.com/stacyderuiter/data545-tutorials/edit/main/quasibinomial.qmd" class="toc-action"><i class="bi empty"></i>Edit this page</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./quasibinomial.html">More Fun Between 0-1</a></li><li class="breadcrumb-item"><a href="./quasibinomial.html"><span class="chapter-number">32</span>&nbsp; <span class="chapter-title">Models for Overdispered Binary Data</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">32</span>&nbsp; <span class="chapter-title">Models for Overdispered Binary Data</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<div class="cell" data-layout-align="center" data-setup="true" data-exercise="[&quot;si-viz&quot;,&quot;first-model&quot;,&quot;first-scaled-resid&quot;,&quot;second-scaled-resid&quot;,&quot;quasi-model&quot;,&quot;quasi-scaled-resid&quot;]">
<script type="exercise-setup-si-viz-contents">
eyJhdHRyIjp7ImF1dG9ydW4iOmZhbHNlLCJlY2hvIjpmYWxzZSwiZWRpdCI6ZmFsc2UsImV2YWwiOnRydWUsImV4ZXJjaXNlIjpbInNpLXZpeiIsImZpcnN0LW1vZGVsIiwiZmlyc3Qtc2NhbGVkLXJlc2lkIiwic2Vjb25kLXNjYWxlZC1yZXNpZCIsInF1YXNpLW1vZGVsIiwicXVhc2ktc2NhbGVkLXJlc2lkIl0sImluY2x1ZGUiOmZhbHNlLCJvdXRwdXQiOmZhbHNlLCJzZXR1cCI6dHJ1ZX0sImNvZGUiOiJcblxubGlicmFyeSh0aWR5dmVyc2UpXG5saWJyYXJ5KGdsbW1UTUIpXG5saWJyYXJ5KGdnZm9ybXVsYSlcbmxpYnJhcnkoZ2dlZmZlY3RzKVxuXG50aGVtZV9zZXQodGhlbWVfYncoYmFzZV9zaXplPTE2KSlcblxua25pdHI6Om9wdHNfY2h1bmskc2V0KFxuICBlY2hvID0gRkFMU0UsXG4gIGZpZy5hbGlnbiA9IFwiY2VudGVyXCIsXG4gIGZpZy53aWR0aCA9IDYsIGZpZy5oZWlnaHQgPSAyLjUpXG5cbkNTQWRhdGEgIDwtIHJlYWRfZXhjZWwoXCJkYXRhL0NTQUFsbGRhdGEueGxzeFwiKVxuIyBmb3JtYXQgZGF0ZSwgZXh0cmFjdCBtb250aCBhbmQgd2Vla1xuQ1NBZGF0YSA8LSBDU0FkYXRhIHw+IFxuICBkcGx5cjo6bXV0YXRlKERhdGUgPSBsdWJyaWRhdGU6OnltZChEYXRlKSwgXG4gICAgICAgICAgICAgICAgbW9udGggPSBsdWJyaWRhdGU6Om1vbnRoKERhdGUsIGxhYmVsID0gVFJVRSksIFxuICAgICAgICAgICAgICAgIHdlZWsgPSBmYWN0b3IobHVicmlkYXRlOjp3ZWVrKERhdGUpKSxcbiAgICAgICAgICAgICAgICBCQSA9IGZjdF9yZWxldmVsKEJBLCAnQmVmb3JlJyksXG4gICAgICAgICAgICAgICAgT25zaG9yZU5ORSA9IGlmZWxzZShPbnNob3JlTk5FID09IDAsICdPdGhlcicsICdPbnNob3JlIE5ORScpLFxuICAgICAgICAgICAgICAgIFdpbmRfRGlyMyA9IGNhc2Vfd2hlbihXaW5kX0RpciA9PSBcIk5FXCIgfiBcIk5FXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFdpbmRfRGlyID09IFwiTlwiIH4gXCJOXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRSVUUgfiBcIk90aGVyXCIpLFxuICAgICAgICAgICAgICAgIFBPU19TV0lNID0gYFBPUy9TV0lNYCkgfD5cbiAgZHBseXI6OmZpbHRlcihUT1RBTF9TV0lNICE9IDAgJiBXaW5kX0RpciAhPSBcIlwiICYgIWlzLm5hKFdhdGVyX1RlbXApKSB8PlxuICBzZWxlY3QoRGF0ZSwgVE9UQUxfU0ksIFNJX1RvdGFsbmVnLCBUT1RBTF9TV0lNLCBPbnNob3JlTk5FLCBQT1NfU1dJTSwgQkEpIFxuXG5DU0FfbG9naXN0aWMgPC0gZ2xtbVRNQihjYmluZChUT1RBTF9TSSwgU0lfVG90YWxuZWcpIH4gQkEgKiBPbnNob3JlTk5FICxcbiAgICAgICAgICAgICAgICAgICAgIGRhdGEgID0gQ1NBZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgIGZhbWlseSA9IGJpbm9taWFsKGxpbmsgPSAnbG9naXQnKSlcblxuQ1NBX3F1YXNpIDwtIGdsbShjYmluZChUT1RBTF9TSSwgU0lfVG90YWxuZWcpIH4gQkEgKiBPbnNob3JlTk5FICxcbiAgICAgICAgICAgICAgICAgICAgIGRhdGEgID0gQ1NBZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgIGZhbWlseSA9IHF1YXNpYmlub21pYWwobGluayA9ICdsb2dpdCcpKSJ9
</script>
<script type="exercise-setup-first-model-contents">
eyJhdHRyIjp7ImF1dG9ydW4iOmZhbHNlLCJlY2hvIjpmYWxzZSwiZWRpdCI6ZmFsc2UsImV2YWwiOnRydWUsImV4ZXJjaXNlIjpbInNpLXZpeiIsImZpcnN0LW1vZGVsIiwiZmlyc3Qtc2NhbGVkLXJlc2lkIiwic2Vjb25kLXNjYWxlZC1yZXNpZCIsInF1YXNpLW1vZGVsIiwicXVhc2ktc2NhbGVkLXJlc2lkIl0sImluY2x1ZGUiOmZhbHNlLCJvdXRwdXQiOmZhbHNlLCJzZXR1cCI6dHJ1ZX0sImNvZGUiOiJcblxubGlicmFyeSh0aWR5dmVyc2UpXG5saWJyYXJ5KGdsbW1UTUIpXG5saWJyYXJ5KGdnZm9ybXVsYSlcbmxpYnJhcnkoZ2dlZmZlY3RzKVxuXG50aGVtZV9zZXQodGhlbWVfYncoYmFzZV9zaXplPTE2KSlcblxua25pdHI6Om9wdHNfY2h1bmskc2V0KFxuICBlY2hvID0gRkFMU0UsXG4gIGZpZy5hbGlnbiA9IFwiY2VudGVyXCIsXG4gIGZpZy53aWR0aCA9IDYsIGZpZy5oZWlnaHQgPSAyLjUpXG5cbkNTQWRhdGEgIDwtIHJlYWRfZXhjZWwoXCJkYXRhL0NTQUFsbGRhdGEueGxzeFwiKVxuIyBmb3JtYXQgZGF0ZSwgZXh0cmFjdCBtb250aCBhbmQgd2Vla1xuQ1NBZGF0YSA8LSBDU0FkYXRhIHw+IFxuICBkcGx5cjo6bXV0YXRlKERhdGUgPSBsdWJyaWRhdGU6OnltZChEYXRlKSwgXG4gICAgICAgICAgICAgICAgbW9udGggPSBsdWJyaWRhdGU6Om1vbnRoKERhdGUsIGxhYmVsID0gVFJVRSksIFxuICAgICAgICAgICAgICAgIHdlZWsgPSBmYWN0b3IobHVicmlkYXRlOjp3ZWVrKERhdGUpKSxcbiAgICAgICAgICAgICAgICBCQSA9IGZjdF9yZWxldmVsKEJBLCAnQmVmb3JlJyksXG4gICAgICAgICAgICAgICAgT25zaG9yZU5ORSA9IGlmZWxzZShPbnNob3JlTk5FID09IDAsICdPdGhlcicsICdPbnNob3JlIE5ORScpLFxuICAgICAgICAgICAgICAgIFdpbmRfRGlyMyA9IGNhc2Vfd2hlbihXaW5kX0RpciA9PSBcIk5FXCIgfiBcIk5FXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFdpbmRfRGlyID09IFwiTlwiIH4gXCJOXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRSVUUgfiBcIk90aGVyXCIpLFxuICAgICAgICAgICAgICAgIFBPU19TV0lNID0gYFBPUy9TV0lNYCkgfD5cbiAgZHBseXI6OmZpbHRlcihUT1RBTF9TV0lNICE9IDAgJiBXaW5kX0RpciAhPSBcIlwiICYgIWlzLm5hKFdhdGVyX1RlbXApKSB8PlxuICBzZWxlY3QoRGF0ZSwgVE9UQUxfU0ksIFNJX1RvdGFsbmVnLCBUT1RBTF9TV0lNLCBPbnNob3JlTk5FLCBQT1NfU1dJTSwgQkEpIFxuXG5DU0FfbG9naXN0aWMgPC0gZ2xtbVRNQihjYmluZChUT1RBTF9TSSwgU0lfVG90YWxuZWcpIH4gQkEgKiBPbnNob3JlTk5FICxcbiAgICAgICAgICAgICAgICAgICAgIGRhdGEgID0gQ1NBZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgIGZhbWlseSA9IGJpbm9taWFsKGxpbmsgPSAnbG9naXQnKSlcblxuQ1NBX3F1YXNpIDwtIGdsbShjYmluZChUT1RBTF9TSSwgU0lfVG90YWxuZWcpIH4gQkEgKiBPbnNob3JlTk5FICxcbiAgICAgICAgICAgICAgICAgICAgIGRhdGEgID0gQ1NBZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgIGZhbWlseSA9IHF1YXNpYmlub21pYWwobGluayA9ICdsb2dpdCcpKSJ9
</script>
<script type="exercise-setup-first-scaled-resid-contents">
eyJhdHRyIjp7ImF1dG9ydW4iOmZhbHNlLCJlY2hvIjpmYWxzZSwiZWRpdCI6ZmFsc2UsImV2YWwiOnRydWUsImV4ZXJjaXNlIjpbInNpLXZpeiIsImZpcnN0LW1vZGVsIiwiZmlyc3Qtc2NhbGVkLXJlc2lkIiwic2Vjb25kLXNjYWxlZC1yZXNpZCIsInF1YXNpLW1vZGVsIiwicXVhc2ktc2NhbGVkLXJlc2lkIl0sImluY2x1ZGUiOmZhbHNlLCJvdXRwdXQiOmZhbHNlLCJzZXR1cCI6dHJ1ZX0sImNvZGUiOiJcblxubGlicmFyeSh0aWR5dmVyc2UpXG5saWJyYXJ5KGdsbW1UTUIpXG5saWJyYXJ5KGdnZm9ybXVsYSlcbmxpYnJhcnkoZ2dlZmZlY3RzKVxuXG50aGVtZV9zZXQodGhlbWVfYncoYmFzZV9zaXplPTE2KSlcblxua25pdHI6Om9wdHNfY2h1bmskc2V0KFxuICBlY2hvID0gRkFMU0UsXG4gIGZpZy5hbGlnbiA9IFwiY2VudGVyXCIsXG4gIGZpZy53aWR0aCA9IDYsIGZpZy5oZWlnaHQgPSAyLjUpXG5cbkNTQWRhdGEgIDwtIHJlYWRfZXhjZWwoXCJkYXRhL0NTQUFsbGRhdGEueGxzeFwiKVxuIyBmb3JtYXQgZGF0ZSwgZXh0cmFjdCBtb250aCBhbmQgd2Vla1xuQ1NBZGF0YSA8LSBDU0FkYXRhIHw+IFxuICBkcGx5cjo6bXV0YXRlKERhdGUgPSBsdWJyaWRhdGU6OnltZChEYXRlKSwgXG4gICAgICAgICAgICAgICAgbW9udGggPSBsdWJyaWRhdGU6Om1vbnRoKERhdGUsIGxhYmVsID0gVFJVRSksIFxuICAgICAgICAgICAgICAgIHdlZWsgPSBmYWN0b3IobHVicmlkYXRlOjp3ZWVrKERhdGUpKSxcbiAgICAgICAgICAgICAgICBCQSA9IGZjdF9yZWxldmVsKEJBLCAnQmVmb3JlJyksXG4gICAgICAgICAgICAgICAgT25zaG9yZU5ORSA9IGlmZWxzZShPbnNob3JlTk5FID09IDAsICdPdGhlcicsICdPbnNob3JlIE5ORScpLFxuICAgICAgICAgICAgICAgIFdpbmRfRGlyMyA9IGNhc2Vfd2hlbihXaW5kX0RpciA9PSBcIk5FXCIgfiBcIk5FXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFdpbmRfRGlyID09IFwiTlwiIH4gXCJOXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRSVUUgfiBcIk90aGVyXCIpLFxuICAgICAgICAgICAgICAgIFBPU19TV0lNID0gYFBPUy9TV0lNYCkgfD5cbiAgZHBseXI6OmZpbHRlcihUT1RBTF9TV0lNICE9IDAgJiBXaW5kX0RpciAhPSBcIlwiICYgIWlzLm5hKFdhdGVyX1RlbXApKSB8PlxuICBzZWxlY3QoRGF0ZSwgVE9UQUxfU0ksIFNJX1RvdGFsbmVnLCBUT1RBTF9TV0lNLCBPbnNob3JlTk5FLCBQT1NfU1dJTSwgQkEpIFxuXG5DU0FfbG9naXN0aWMgPC0gZ2xtbVRNQihjYmluZChUT1RBTF9TSSwgU0lfVG90YWxuZWcpIH4gQkEgKiBPbnNob3JlTk5FICxcbiAgICAgICAgICAgICAgICAgICAgIGRhdGEgID0gQ1NBZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgIGZhbWlseSA9IGJpbm9taWFsKGxpbmsgPSAnbG9naXQnKSlcblxuQ1NBX3F1YXNpIDwtIGdsbShjYmluZChUT1RBTF9TSSwgU0lfVG90YWxuZWcpIH4gQkEgKiBPbnNob3JlTk5FICxcbiAgICAgICAgICAgICAgICAgICAgIGRhdGEgID0gQ1NBZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgIGZhbWlseSA9IHF1YXNpYmlub21pYWwobGluayA9ICdsb2dpdCcpKSJ9
</script>
<script type="exercise-setup-second-scaled-resid-contents">
eyJhdHRyIjp7ImF1dG9ydW4iOmZhbHNlLCJlY2hvIjpmYWxzZSwiZWRpdCI6ZmFsc2UsImV2YWwiOnRydWUsImV4ZXJjaXNlIjpbInNpLXZpeiIsImZpcnN0LW1vZGVsIiwiZmlyc3Qtc2NhbGVkLXJlc2lkIiwic2Vjb25kLXNjYWxlZC1yZXNpZCIsInF1YXNpLW1vZGVsIiwicXVhc2ktc2NhbGVkLXJlc2lkIl0sImluY2x1ZGUiOmZhbHNlLCJvdXRwdXQiOmZhbHNlLCJzZXR1cCI6dHJ1ZX0sImNvZGUiOiJcblxubGlicmFyeSh0aWR5dmVyc2UpXG5saWJyYXJ5KGdsbW1UTUIpXG5saWJyYXJ5KGdnZm9ybXVsYSlcbmxpYnJhcnkoZ2dlZmZlY3RzKVxuXG50aGVtZV9zZXQodGhlbWVfYncoYmFzZV9zaXplPTE2KSlcblxua25pdHI6Om9wdHNfY2h1bmskc2V0KFxuICBlY2hvID0gRkFMU0UsXG4gIGZpZy5hbGlnbiA9IFwiY2VudGVyXCIsXG4gIGZpZy53aWR0aCA9IDYsIGZpZy5oZWlnaHQgPSAyLjUpXG5cbkNTQWRhdGEgIDwtIHJlYWRfZXhjZWwoXCJkYXRhL0NTQUFsbGRhdGEueGxzeFwiKVxuIyBmb3JtYXQgZGF0ZSwgZXh0cmFjdCBtb250aCBhbmQgd2Vla1xuQ1NBZGF0YSA8LSBDU0FkYXRhIHw+IFxuICBkcGx5cjo6bXV0YXRlKERhdGUgPSBsdWJyaWRhdGU6OnltZChEYXRlKSwgXG4gICAgICAgICAgICAgICAgbW9udGggPSBsdWJyaWRhdGU6Om1vbnRoKERhdGUsIGxhYmVsID0gVFJVRSksIFxuICAgICAgICAgICAgICAgIHdlZWsgPSBmYWN0b3IobHVicmlkYXRlOjp3ZWVrKERhdGUpKSxcbiAgICAgICAgICAgICAgICBCQSA9IGZjdF9yZWxldmVsKEJBLCAnQmVmb3JlJyksXG4gICAgICAgICAgICAgICAgT25zaG9yZU5ORSA9IGlmZWxzZShPbnNob3JlTk5FID09IDAsICdPdGhlcicsICdPbnNob3JlIE5ORScpLFxuICAgICAgICAgICAgICAgIFdpbmRfRGlyMyA9IGNhc2Vfd2hlbihXaW5kX0RpciA9PSBcIk5FXCIgfiBcIk5FXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFdpbmRfRGlyID09IFwiTlwiIH4gXCJOXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRSVUUgfiBcIk90aGVyXCIpLFxuICAgICAgICAgICAgICAgIFBPU19TV0lNID0gYFBPUy9TV0lNYCkgfD5cbiAgZHBseXI6OmZpbHRlcihUT1RBTF9TV0lNICE9IDAgJiBXaW5kX0RpciAhPSBcIlwiICYgIWlzLm5hKFdhdGVyX1RlbXApKSB8PlxuICBzZWxlY3QoRGF0ZSwgVE9UQUxfU0ksIFNJX1RvdGFsbmVnLCBUT1RBTF9TV0lNLCBPbnNob3JlTk5FLCBQT1NfU1dJTSwgQkEpIFxuXG5DU0FfbG9naXN0aWMgPC0gZ2xtbVRNQihjYmluZChUT1RBTF9TSSwgU0lfVG90YWxuZWcpIH4gQkEgKiBPbnNob3JlTk5FICxcbiAgICAgICAgICAgICAgICAgICAgIGRhdGEgID0gQ1NBZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgIGZhbWlseSA9IGJpbm9taWFsKGxpbmsgPSAnbG9naXQnKSlcblxuQ1NBX3F1YXNpIDwtIGdsbShjYmluZChUT1RBTF9TSSwgU0lfVG90YWxuZWcpIH4gQkEgKiBPbnNob3JlTk5FICxcbiAgICAgICAgICAgICAgICAgICAgIGRhdGEgID0gQ1NBZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgIGZhbWlseSA9IHF1YXNpYmlub21pYWwobGluayA9ICdsb2dpdCcpKSJ9
</script>
<script type="exercise-setup-quasi-model-contents">
eyJhdHRyIjp7ImF1dG9ydW4iOmZhbHNlLCJlY2hvIjpmYWxzZSwiZWRpdCI6ZmFsc2UsImV2YWwiOnRydWUsImV4ZXJjaXNlIjpbInNpLXZpeiIsImZpcnN0LW1vZGVsIiwiZmlyc3Qtc2NhbGVkLXJlc2lkIiwic2Vjb25kLXNjYWxlZC1yZXNpZCIsInF1YXNpLW1vZGVsIiwicXVhc2ktc2NhbGVkLXJlc2lkIl0sImluY2x1ZGUiOmZhbHNlLCJvdXRwdXQiOmZhbHNlLCJzZXR1cCI6dHJ1ZX0sImNvZGUiOiJcblxubGlicmFyeSh0aWR5dmVyc2UpXG5saWJyYXJ5KGdsbW1UTUIpXG5saWJyYXJ5KGdnZm9ybXVsYSlcbmxpYnJhcnkoZ2dlZmZlY3RzKVxuXG50aGVtZV9zZXQodGhlbWVfYncoYmFzZV9zaXplPTE2KSlcblxua25pdHI6Om9wdHNfY2h1bmskc2V0KFxuICBlY2hvID0gRkFMU0UsXG4gIGZpZy5hbGlnbiA9IFwiY2VudGVyXCIsXG4gIGZpZy53aWR0aCA9IDYsIGZpZy5oZWlnaHQgPSAyLjUpXG5cbkNTQWRhdGEgIDwtIHJlYWRfZXhjZWwoXCJkYXRhL0NTQUFsbGRhdGEueGxzeFwiKVxuIyBmb3JtYXQgZGF0ZSwgZXh0cmFjdCBtb250aCBhbmQgd2Vla1xuQ1NBZGF0YSA8LSBDU0FkYXRhIHw+IFxuICBkcGx5cjo6bXV0YXRlKERhdGUgPSBsdWJyaWRhdGU6OnltZChEYXRlKSwgXG4gICAgICAgICAgICAgICAgbW9udGggPSBsdWJyaWRhdGU6Om1vbnRoKERhdGUsIGxhYmVsID0gVFJVRSksIFxuICAgICAgICAgICAgICAgIHdlZWsgPSBmYWN0b3IobHVicmlkYXRlOjp3ZWVrKERhdGUpKSxcbiAgICAgICAgICAgICAgICBCQSA9IGZjdF9yZWxldmVsKEJBLCAnQmVmb3JlJyksXG4gICAgICAgICAgICAgICAgT25zaG9yZU5ORSA9IGlmZWxzZShPbnNob3JlTk5FID09IDAsICdPdGhlcicsICdPbnNob3JlIE5ORScpLFxuICAgICAgICAgICAgICAgIFdpbmRfRGlyMyA9IGNhc2Vfd2hlbihXaW5kX0RpciA9PSBcIk5FXCIgfiBcIk5FXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFdpbmRfRGlyID09IFwiTlwiIH4gXCJOXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRSVUUgfiBcIk90aGVyXCIpLFxuICAgICAgICAgICAgICAgIFBPU19TV0lNID0gYFBPUy9TV0lNYCkgfD5cbiAgZHBseXI6OmZpbHRlcihUT1RBTF9TV0lNICE9IDAgJiBXaW5kX0RpciAhPSBcIlwiICYgIWlzLm5hKFdhdGVyX1RlbXApKSB8PlxuICBzZWxlY3QoRGF0ZSwgVE9UQUxfU0ksIFNJX1RvdGFsbmVnLCBUT1RBTF9TV0lNLCBPbnNob3JlTk5FLCBQT1NfU1dJTSwgQkEpIFxuXG5DU0FfbG9naXN0aWMgPC0gZ2xtbVRNQihjYmluZChUT1RBTF9TSSwgU0lfVG90YWxuZWcpIH4gQkEgKiBPbnNob3JlTk5FICxcbiAgICAgICAgICAgICAgICAgICAgIGRhdGEgID0gQ1NBZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgIGZhbWlseSA9IGJpbm9taWFsKGxpbmsgPSAnbG9naXQnKSlcblxuQ1NBX3F1YXNpIDwtIGdsbShjYmluZChUT1RBTF9TSSwgU0lfVG90YWxuZWcpIH4gQkEgKiBPbnNob3JlTk5FICxcbiAgICAgICAgICAgICAgICAgICAgIGRhdGEgID0gQ1NBZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgIGZhbWlseSA9IHF1YXNpYmlub21pYWwobGluayA9ICdsb2dpdCcpKSJ9
</script>
<script type="exercise-setup-quasi-scaled-resid-contents">
eyJhdHRyIjp7ImF1dG9ydW4iOmZhbHNlLCJlY2hvIjpmYWxzZSwiZWRpdCI6ZmFsc2UsImV2YWwiOnRydWUsImV4ZXJjaXNlIjpbInNpLXZpeiIsImZpcnN0LW1vZGVsIiwiZmlyc3Qtc2NhbGVkLXJlc2lkIiwic2Vjb25kLXNjYWxlZC1yZXNpZCIsInF1YXNpLW1vZGVsIiwicXVhc2ktc2NhbGVkLXJlc2lkIl0sImluY2x1ZGUiOmZhbHNlLCJvdXRwdXQiOmZhbHNlLCJzZXR1cCI6dHJ1ZX0sImNvZGUiOiJcblxubGlicmFyeSh0aWR5dmVyc2UpXG5saWJyYXJ5KGdsbW1UTUIpXG5saWJyYXJ5KGdnZm9ybXVsYSlcbmxpYnJhcnkoZ2dlZmZlY3RzKVxuXG50aGVtZV9zZXQodGhlbWVfYncoYmFzZV9zaXplPTE2KSlcblxua25pdHI6Om9wdHNfY2h1bmskc2V0KFxuICBlY2hvID0gRkFMU0UsXG4gIGZpZy5hbGlnbiA9IFwiY2VudGVyXCIsXG4gIGZpZy53aWR0aCA9IDYsIGZpZy5oZWlnaHQgPSAyLjUpXG5cbkNTQWRhdGEgIDwtIHJlYWRfZXhjZWwoXCJkYXRhL0NTQUFsbGRhdGEueGxzeFwiKVxuIyBmb3JtYXQgZGF0ZSwgZXh0cmFjdCBtb250aCBhbmQgd2Vla1xuQ1NBZGF0YSA8LSBDU0FkYXRhIHw+IFxuICBkcGx5cjo6bXV0YXRlKERhdGUgPSBsdWJyaWRhdGU6OnltZChEYXRlKSwgXG4gICAgICAgICAgICAgICAgbW9udGggPSBsdWJyaWRhdGU6Om1vbnRoKERhdGUsIGxhYmVsID0gVFJVRSksIFxuICAgICAgICAgICAgICAgIHdlZWsgPSBmYWN0b3IobHVicmlkYXRlOjp3ZWVrKERhdGUpKSxcbiAgICAgICAgICAgICAgICBCQSA9IGZjdF9yZWxldmVsKEJBLCAnQmVmb3JlJyksXG4gICAgICAgICAgICAgICAgT25zaG9yZU5ORSA9IGlmZWxzZShPbnNob3JlTk5FID09IDAsICdPdGhlcicsICdPbnNob3JlIE5ORScpLFxuICAgICAgICAgICAgICAgIFdpbmRfRGlyMyA9IGNhc2Vfd2hlbihXaW5kX0RpciA9PSBcIk5FXCIgfiBcIk5FXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFdpbmRfRGlyID09IFwiTlwiIH4gXCJOXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRSVUUgfiBcIk90aGVyXCIpLFxuICAgICAgICAgICAgICAgIFBPU19TV0lNID0gYFBPUy9TV0lNYCkgfD5cbiAgZHBseXI6OmZpbHRlcihUT1RBTF9TV0lNICE9IDAgJiBXaW5kX0RpciAhPSBcIlwiICYgIWlzLm5hKFdhdGVyX1RlbXApKSB8PlxuICBzZWxlY3QoRGF0ZSwgVE9UQUxfU0ksIFNJX1RvdGFsbmVnLCBUT1RBTF9TV0lNLCBPbnNob3JlTk5FLCBQT1NfU1dJTSwgQkEpIFxuXG5DU0FfbG9naXN0aWMgPC0gZ2xtbVRNQihjYmluZChUT1RBTF9TSSwgU0lfVG90YWxuZWcpIH4gQkEgKiBPbnNob3JlTk5FICxcbiAgICAgICAgICAgICAgICAgICAgIGRhdGEgID0gQ1NBZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgIGZhbWlseSA9IGJpbm9taWFsKGxpbmsgPSAnbG9naXQnKSlcblxuQ1NBX3F1YXNpIDwtIGdsbShjYmluZChUT1RBTF9TSSwgU0lfVG90YWxuZWcpIH4gQkEgKiBPbnNob3JlTk5FICxcbiAgICAgICAgICAgICAgICAgICAgIGRhdGEgID0gQ1NBZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgIGZhbWlseSA9IHF1YXNpYmlub21pYWwobGluayA9ICdsb2dpdCcpKSJ9
</script>
</div>
<section id="section-learning-outcomes" class="level2" data-number="32.1">
<h2 data-number="32.1" class="anchored" data-anchor-id="section-learning-outcomes"><span class="header-section-number">32.1</span> Section Learning Outcomes</h2>
<p>We’ve already considered a pretty diverse set of types of response variables, but there are still more out there!</p>
<p>In addition learning about beta regression this module, we’ll also consider: what happens (if you experience the very rare case) when binary data is <em>overdispersed</em>? Spoiler: You use a quasi-binomial regression model…</p>
<p>By the end of the module you will:</p>
<ol type="1">
<li>Fit, assess, and interpret overdispersed binary GLMs in R</li>
</ol>
</section>
<section id="text-reference" class="level2" data-number="32.2">
<h2 data-number="32.2" class="anchored" data-anchor-id="text-reference"><span class="header-section-number">32.2</span> Text Reference</h2>
<p>Recommended reading for the materials covered in this tutorial can be found in:</p>
<ul>
<li><a href="https://esajournals.onlinelibrary.wiley.com/doi/full/10.1002/ecs2.3940" target="_blank">Geissinger <em>et al.</em> 2022</a></li>
<li><a href="https://besjournals.onlinelibrary.wiley.com/doi/full/10.1111/2041-210X.13234" target="_blank">Douma &amp; Weedon 2019</a></li>
</ul>
<p>It’s suggested that you consider consulting these papers <em>after</em> doing this tutorial, with particular focus on any topics you found most challenging.</p>
</section>
<section id="overdispersion-revisited" class="level2" data-number="32.3">
<h2 data-number="32.3" class="anchored" data-anchor-id="overdispersion-revisited"><span class="header-section-number">32.3</span> Overdispersion, revisited</h2>
<p>We first encountered the term <strong>overdispersion</strong> when modeling count data. Overdispersion (for count data) is the variance of residuals being much larger than expected according to a Poisson model, that is, the variance of residuals being larger than the predicted response value. It was present <em>so</em> often, in fact, that we more or less abandoned Poisson regression altogether and opted for negative binomial models (which can account for overdispersion) as a default for count response variables.</p>
<p>But when learning about binary regression, we didn’t even <em>mention</em> overdispersion?</p>
<p>That’s because it is MUCH more rare for binary data! In fact, I’ve only encountered one real example…which you’ll soon see too.</p>
<p>The definition of overdispersion is similar: binary data are overdispersed if the variance of the residuals is larger than expected, that is, larger than a binomial distribution would predict it to be.</p>
</section>
<section id="swimmers-itch" class="level2" data-number="32.4">
<h2 data-number="32.4" class="anchored" data-anchor-id="swimmers-itch"><span class="header-section-number">32.4</span> Swimmer’s itch</h2>
<p>The dataset we’ll consider is from research by Calvin professor Randall DeJong into the parasite that causes swimmer’s itch.</p>
<p>Swimmer’s itch is an itchy rash caused by a parasite; people often get it after swimming in waters where the parasite is present:</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://s.hdnux.com/photos/01/27/71/27/23041531/3/rawImage.jpg" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:90.0%"></p>
</figure>
</div>
</div>
</div>
<p><em>image above courtesy of US Centers for Disease Control</em></p>
</section>
<section id="csa-data-collection" class="level2" data-number="32.5">
<h2 data-number="32.5" class="anchored" data-anchor-id="csa-data-collection"><span class="header-section-number">32.5</span> CSA Data Collection</h2>
<p>Swimmer’s itch has been a common problem at Crystal Lake in Michigan, and staff at the <a href="https://summerassembly.org/about/about-the-csa.html">Congregational Summer Assembly (CSA)</a> waterfront there collected the data used in published research, and by us today. The data have been used by the <a href="https://crystallakewatershed.org/">Crystal Lake Watershed Association</a> to combat swimmer’s itch, and in peer-reviewed scientific research too - so this case study is a great example of scientists and citizens partnering together to solve a community problem.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://s.hdnux.com/photos/01/05/00/16/18088872/4/rawImage.jpg" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:90.0%"></p>
</figure>
</div>
</div>
</div>
<p><em>Image: Congregational Summer Assembly beach, photo published in the <a href="https://www.recordpatriot.com/local-news/article/Congregational-Summer-Assembly-to-host-History-14315729.php">Benzie Country Record Patriot</a></em></p>
</section>
<section id="solutions" class="level2" data-number="32.6">
<h2 data-number="32.6" class="anchored" data-anchor-id="solutions"><span class="header-section-number">32.6</span> Solutions</h2>
<p>As understanding of how swimmer’s itch spreads has improved, the Crystal Lake Watershed Association has been able to relocate merganser ducks (the video below shows their methods) and reduce infections. So this work has had real, practical impact.</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/_SpBS8yR7jQ?si=w_IPlHmOlHb5Pmfc" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="">
</iframe>
</section>
<section id="swimmers-itch-data" class="level2" data-number="32.7">
<h2 data-number="32.7" class="anchored" data-anchor-id="swimmers-itch-data"><span class="header-section-number">32.7</span> Swimmer’s itch data</h2>
<p>Prof.&nbsp;DeJong has ongoing research using data provided by the CSA, including the 2023 paper <a href="https://doi.org/10.1101/2023.07.10.548414">“Swimmer’s itch control: timely waterfowl brood relocation significantly reduces an avian schistosome population and human cases on recreational lakes”</a> and in preparation, to understand whether the merganser relocation intervention helps reduce swimmer’s itch or not. We will consider one example dataset, here called <code>CSAdata</code>.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(CSAdata)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 349
Columns: 7
$ Date        &lt;date&gt; 2013-06-24, 2013-06-25, 2013-06-26, 2013-06-27, 2013-06-2…
$ TOTAL_SI    &lt;dbl&gt; 12, 0, 0, 22, 0, 0, 12, 0, 27, 0, 0, 0, 0, 0, 0, 0, 0, 8, …
$ SI_Totalneg &lt;dbl&gt; 34, 42, 46, 7, 40, 69, 68, 86, 85, 70, 94, 73, 86, 73, 61,…
$ TOTAL_SWIM  &lt;dbl&gt; 46, 42, 46, 29, 40, 69, 80, 86, 112, 70, 94, 73, 86, 73, 6…
$ OnshoreNNE  &lt;chr&gt; "Onshore NNE", "Onshore NNE", "Other", "Onshore NNE", "Oth…
$ POS_SWIM    &lt;dbl&gt; 0.26086957, 0.00000000, 0.00000000, 0.75862069, 0.00000000…
$ BA          &lt;fct&gt; Before, Before, Before, Before, Before, Before, Before, Be…</code></pre>
</div>
</div>
<p>Variables in the dataset include:</p>
<ul>
<li><code>Date</code> of data collection and swimmer’s itch testing</li>
<li><code>TOTAL_SI</code>, the number of tests that were positive for swimmer’s itch</li>
<li><code>SI_Totalneg</code>, the number of tests that were negative for swimmer’s itch</li>
<li><code>OnshoreNNE</code>, whether or not there was an onshore North/Northeast wind. Since the location where most of the parasites live is located a certain direction from the beach, the number of cases seen at the CSA beach varies a lot depending on whether or not the prevailing wind is carrying the parasites toward the beach.</li>
<li><code>POS_SWIM</code> The number of positive tests divided by the total number of swimmers</li>
<li><code>BA</code> (standing for “Before and After”): whether the data point was collected before or after the intervention where the mergansers were relocated.</li>
</ul>
<div class="webex-check webex-box">
<div class="cell" data-layout-align="center">
To model the frequency of swimmer’s itch using this data, what type of response variable do we have, and so which kind of model would you first try fit?
<div id="radio_EUCMQMOLRL" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_EUCMQMOLRL" value=""> <span>This is one-trial-per-row binary data, so I'd use binary (aka logistic) regression.</span></label><label><input type="radio" autocomplete="off" name="radio_EUCMQMOLRL" value=""> <span>The response is continuous and quantitative, so I would try linear regression.</span></label><label><input type="radio" autocomplete="off" name="radio_EUCMQMOLRL" value="answer"> <span>This is multiple-trials-per-row binary data, so I'd use binary (aka logistic) regression.</span></label><label><input type="radio" autocomplete="off" name="radio_EUCMQMOLRL" value=""> <span>This is count data, so I'd try negative binomial regression.</span></label><label><input type="radio" autocomplete="off" name="radio_EUCMQMOLRL" value=""> <span>The response is proportion data (without associated information on the number of binary trials) so I would try beta regression.</span></label>
</div>
</div>
</div>
<div class="webex-solution">
<button>
Click for more explanation of the answer above.
</button>
<p>Consider whether or not this scenario can be considered to be the result of a set of binary trials (where each one results in either a “success” or a “failure”), or not.</p>
<p>If debating between and “original” format of the possible response variable and a derived quantity, it usually works better (and stays truer to the understanding of the experts who designed the study and collected the data) to model the original.</p>
</div>
</section>
<section id="data-viz" class="level2" data-number="32.8">
<h2 data-number="32.8" class="anchored" data-anchor-id="data-viz"><span class="header-section-number">32.8</span> Data Viz</h2>
<p>Researchers hypothesized that the intervention would reduce the number of cases of swimmer’s itch, and that the wind direction would serve as a moderator.</p>
<div class="webex-check webex-box">
<div class="cell" data-layout-align="center">
What model formula would you use to fit a regression model consistent with the statement above?
<div id="radio_OTQYSJWJGJ" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_OTQYSJWJGJ" value=""> <span><code>TOTAL_SI ~ BA * OnshoreNNE</code></span></label><label><input type="radio" autocomplete="off" name="radio_OTQYSJWJGJ" value="answer"> <span><code>cbind(TOTAL_SI, SI_Totalneg) ~ BA * OnshoreNNE</code></span></label><label><input type="radio" autocomplete="off" name="radio_OTQYSJWJGJ" value=""> <span><code>cbind(TOTAL_SI, SI_Totalneg) ~ BA + OnshoreNNE</code></span></label><label><input type="radio" autocomplete="off" name="radio_OTQYSJWJGJ" value=""> <span><code>SI_Totalneg ~ BA * OnshoreNNE</code></span></label><label><input type="radio" autocomplete="off" name="radio_OTQYSJWJGJ" value=""> <span><code>cbind(TOTAL_SI, SI_Totalneg) ~ BA : OnshoreNNE</code></span></label><label><input type="radio" autocomplete="off" name="radio_OTQYSJWJGJ" value=""> <span><code>POS_SWIM ~ BA * OnshoreNNE</code></span></label>
</div>
</div>
</div>
<p>Does an initial exploration of the data seem consistent with this idea? See what you think…feel free to begin with the graph below and try your own variations if you wish!</p>
<div class="cell" data-layout-align="center" data-exercise="si-viz">
<div>
<div id="webr-2" class="exercise-cell">

</div>
<script type="webr-2-contents">
eyJhdHRyIjp7ImF1dG9ydW4iOmZhbHNlLCJlZGl0Ijp0cnVlLCJldmFsIjp0cnVlLCJleGVyY2lzZSI6InNpLXZpeiIsImZpZy1oZWlnaHQiOjQsImZpZy13aWR0aCI6Ni40fSwiY29kZSI6IlxuZ2Zfc2luYShQT1NfU1dJTSB+IEJBIHwgT25zaG9yZU5ORSwgXG4gICAgICAgIGRhdGEgPSBDU0FkYXRhLCBhbHBoYSA9IDAuMikgfD5cbiAgZ2ZfbGFicyh4ID0gJ1RpbWVwb2ludCcsIFxuICAgICAgICAgIHkgPSAnTnVtYmVyIG9mIENhc2VzL1xcbk51bWJlciBvZiBTd2ltbWVycycsXG4gICAgICAgICAgdGl0bGUgPSBcIk1lcmdhbnNlciByZWxvY2F0aW9uXFxucmVkdWNlcyBzd2ltbWVyJ3MgaXRjaCBjYXNlc1wiKSJ9
</script>
</div>
</div>
</section>
<section id="model" class="level2" data-number="32.9">
<h2 data-number="32.9" class="anchored" data-anchor-id="model"><span class="header-section-number">32.9</span> Model</h2>
<p>Will the model verify the patterns we see in our graph(s) – that the intervention worked to reduce swimmer’s itch, and that the presence of an onshore NNE wind moderates that impact, with more cases in NNE wind and larger reductions in cases without NNE winds?</p>
<p>Let’s fit a model (based on the plans determined so far).</p>
<div class="cell" data-layout-align="center" data-exercise="first-model">
<div>
<div id="webr-3" class="exercise-cell">

</div>
<script type="webr-3-contents">
eyJhdHRyIjp7ImF1dG9ydW4iOmZhbHNlLCJlZGl0Ijp0cnVlLCJldmFsIjp0cnVlLCJleGVyY2lzZSI6ImZpcnN0LW1vZGVsIn0sImNvZGUiOiJDU0FfbG9naXN0aWMgPC0gZ2xtbVRNQihcbiAgY2JpbmQoVE9UQUxfU0ksIFNJX1RvdGFsbmVnKSB+IEJBICogT25zaG9yZU5ORSAsXG4gIGRhdGEgID0gQ1NBZGF0YSxcbiAgZmFtaWx5ID0gYmlub21pYWwobGluayA9ICdsb2dpdCcpKSJ9
</script>
</div>
</div>
<p>Before we can get any answers, better do some model assessment!</p>
</section>
<section id="assessment" class="level2" data-number="32.10">
<h2 data-number="32.10" class="anchored" data-anchor-id="assessment"><span class="header-section-number">32.10</span> Assessment</h2>
<section id="residual-independence" class="level3">
<h3 class="anchored" data-anchor-id="residual-independence">Residual Independence</h3>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">acf</span>(<span class="fu">resid</span>(CSA_logistic), <span class="at">main =</span> <span class="st">''</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="quasibinomial_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="576"></p>
</figure>
</div>
</div>
</div>
<div class="webex-solution">
<button>
What do you think? Click to check your conclusions…
</button>
<p>No issues here: all the ACF values at lags greater than 0 are (almost) within the confidence bounds, so we have no evidence of any problem with the residual independence condition!</p>
</div>
</section>
<section id="mean-variance-and-linearity" class="level3">
<h3 class="anchored" data-anchor-id="mean-variance-and-linearity">Mean-Variance and Linearity</h3>
<div class="cell" data-layout-align="center" data-exercise="first-scaled-resid">
<div>
<div id="webr-4" class="exercise-cell">

</div>
<script type="webr-4-contents">
eyJhdHRyIjp7ImF1dG9ydW4iOmZhbHNlLCJlZGl0Ijp0cnVlLCJldmFsIjp0cnVlLCJleGVyY2lzZSI6ImZpcnN0LXNjYWxlZC1yZXNpZCJ9LCJjb2RlIjoic2ltX3Jlc2lkX21vZGVsMSA8LSBzaW11bGF0ZVJlc2lkdWFscyhDU0FfbG9naXN0aWMpXG5wbG90UmVzaWR1YWxzKHNpbV9yZXNpZF9tb2RlbDEsIHF1YW50cmVnID0gRkFMU0UpIn0=
</script>
</div>
</div>
<div class="webex-solution">
<button>
What do you think? Click to check your conclusions…
</button>
<p>Uh-oh. All the red does <em>not</em> seem to be a good sign. And it looks like the spread of the residuals for some fitted values is much less than others.</p>
</div>
<p>Since our model has only two predictors, both categorical, there are only 4 unique fitted values. In a case like this, <code>plotResiduals()</code> defaults to treating the fitted values as categorical. This makes sense, but to get a plot more like what we’re used to (with points, rather than boxplots) we can do:</p>
<div class="cell" data-layout-align="center" data-exercise="second-scaled-resid">
<div>
<div id="webr-5" class="exercise-cell">

</div>
<script type="webr-5-contents">
eyJhdHRyIjp7ImF1dG9ydW4iOmZhbHNlLCJlZGl0Ijp0cnVlLCJldmFsIjp0cnVlLCJleGVyY2lzZSI6InNlY29uZC1zY2FsZWQtcmVzaWQifSwiY29kZSI6Ilxuc2ltX3Jlc2lkX21vZGVsMSA8LSBzaW11bGF0ZVJlc2lkdWFscyhDU0FfbG9naXN0aWMpXG5wbG90UmVzaWR1YWxzKHNpbV9yZXNpZF9tb2RlbDEsIHF1YW50cmVnID0gRkFMU0UsXG4gICAgICAgICAgICAgIGFzRmFjdG9yID0gRkFMU0UpIn0=
</script>
</div>
</div>
<div class="webex-solution">
<button>
What do you think? Click to check your conclusions…
</button>
<p>However we make the graph, we have a big problem: The mean-variance relationship is <em>not</em> as our model expects it to be.</p>
<p>We can see this because the spread of the points in the scaled residual plot is not uniform vertically (the fact that they are arranged in “columns” is <strong>not</strong> the problem here - it’s the non-uniform up-and-down spread that’s the issue).</p>
<p>(We don’t have a clear indication of a linearity issue, though, and as all our predictors are categorical there <em>can’t</em> actually be such a problem anyway!)</p>
</div>
</section>
</section>
<section id="quasi-binary-regression" class="level2" data-number="32.11">
<h2 data-number="32.11" class="anchored" data-anchor-id="quasi-binary-regression"><span class="header-section-number">32.11</span> Quasi-Binary Regression</h2>
<p>As mentioned before, this particular condition violation is <em>very</em> rare. But if you run into it, you can fit a modified version of a binary regression model called <strong>quasi-binary regression.</strong> Essentially, code-wise, we just change the <code>family</code> to <code>quasibionimal()</code> (and use the <code>glm()</code> function rather than <code>glmmTMB()</code> for fitting the model):</p>
<div class="cell" data-layout-align="center" data-exercise="quasi-model">
<div>
<div id="webr-6" class="exercise-cell">

</div>
<script type="webr-6-contents">
eyJhdHRyIjp7ImF1dG9ydW4iOmZhbHNlLCJlZGl0Ijp0cnVlLCJldmFsIjp0cnVlLCJleGVyY2lzZSI6InF1YXNpLW1vZGVsIn0sImNvZGUiOiJDU0FfcXVhc2kgPC0gZ2xtKFxuICBjYmluZChUT1RBTF9TSSwgU0lfVG90YWxuZWcpIH4gQkEgKiBPbnNob3JlTk5FICxcbiAgZGF0YSAgPSBDU0FkYXRhLFxuICBmYW1pbHkgPSBxdWFzaWJpbm9taWFsKGxpbmsgPSAnbG9naXQnKSkifQ==
</script>
</div>
</div>
</section>
<section id="more-assessment" class="level2" data-number="32.12">
<h2 data-number="32.12" class="anchored" data-anchor-id="more-assessment"><span class="header-section-number">32.12</span> More Assessment</h2>
<p>Does the scaled residual plot look better now?</p>
<div class="cell" data-layout-align="center" data-exercise="quasi-scaled-resid">
<div>
<div id="webr-7" class="exercise-cell">

</div>
<script type="webr-7-contents">
eyJhdHRyIjp7ImF1dG9ydW4iOmZhbHNlLCJlZGl0Ijp0cnVlLCJlcnJvciI6dHJ1ZSwiZXZhbCI6dHJ1ZSwiZXhlcmNpc2UiOiJxdWFzaS1zY2FsZWQtcmVzaWQifSwiY29kZSI6Ilxuc2ltX3Jlc2lkX21vZGVsMiA8LSBzaW11bGF0ZVJlc2lkdWFscyhDU0FfcXVhc2kpXG5wbG90UmVzaWR1YWxzKHNpbV9yZXNpZF9tb2RlbDIsIHF1YW50cmVnID0gRkFMU0UpIn0=
</script>
</div>
</div>
<p>Ummm…uh-oh. We can’t actually make the plot; the necessary functions to do so are “not implemented.”</p>
<p>The <code>DHARMa</code> package does have a <em>test</em> for overdispersion; if this returns a small p-value, that indicated that we have strong evidence against the null hypothesis of no overdispersion.</p>
<p>Normally, we’d prefer to use the plot, since we are making judgement calls rather than trying to make inferences about a truth about a population of interest…but since we are not able to make the graph in this case, we’ll try the test (on our original non-quasi-binary model):</p>
<div class="cell" data-layout-align="center" data-exercise="true">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">testDispersion</span>(CSA_logistic)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="quasibinomial_files/figure-html/disptest-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="576"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
    DHARMa nonparametric dispersion test via sd of residuals fitted vs.
    simulated

data:  simulationOutput
dispersion = 3.1709, p-value &lt; 2.2e-16
alternative hypothesis: two.sided</code></pre>
</div>
</div>
<p><em>Definite</em> evidence of overdispersion there.</p>
<p>While we can’t verify that the mean-variance condition is perfectly met for the quasi-binomial regression model, we <em>can</em> safely assume that it’s <em>got</em> to be a lot better than the binomial regression, since it <em>does</em> account for overdispersion (which we <em>definitely</em> have present).</p>
</section>
<section id="quasi-selection" class="level2" data-number="32.13">
<h2 data-number="32.13" class="anchored" data-anchor-id="quasi-selection"><span class="header-section-number">32.13</span> “Quasi” &amp; Selection</h2>
<p>The “quasi” in the name “quasi-binomial” is because this model is fitted using “quasi-likelihood” instead of likelihood!</p>
<p>We won’t go into the mathematical details here, but one consequence is that we won’t have a full estimate of the <em>likelihood</em> of our fitted model and so…</p>
<p><strong>we can’t really use AIC or BIC for selection</strong></p>
<p>as we have for other models. (But <code>car::Anova()</code> still has a method for quasi-binary regression models, so we can still do selection via ANOVA.)</p>
</section>
<section id="selection" class="level2" data-number="32.14">
<h2 data-number="32.14" class="anchored" data-anchor-id="selection"><span class="header-section-number">32.14</span> Selection</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>car<span class="sc">::</span><span class="fu">Anova</span>(CSA_quasi)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Analysis of Deviance Table (Type II tests)

Response: cbind(TOTAL_SI, SI_Totalneg)
              LR Chisq Df Pr(&gt;Chisq)    
BA              20.062  1  7.499e-06 ***
OnshoreNNE     115.865  1  &lt; 2.2e-16 ***
BA:OnshoreNNE    0.394  1     0.5301    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
</div>
<div class="webex-check webex-box">
<div class="cell" data-layout-align="center">
What can we conclude based on the ANOVA results?
<div id="radio_UCAOLQIVFJ" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_UCAOLQIVFJ" value="answer"> <span>Both wind direction and the merganser relocation affect swimmer's itch probability, but they don't interact</span></label><label><input type="radio" autocomplete="off" name="radio_UCAOLQIVFJ" value=""> <span>Winds, but not the merganser relocation program, affect swimmer's itch probability</span></label><label><input type="radio" autocomplete="off" name="radio_UCAOLQIVFJ" value=""> <span>Neither wind direction nor the merganser relocation affect swimmer's itch probability</span></label><label><input type="radio" autocomplete="off" name="radio_UCAOLQIVFJ" value=""> <span>Both wind direction and the merganser relocation affect swimmer's itch probability, with wind direction moderating the effectiveness of the relocations</span></label><label><input type="radio" autocomplete="off" name="radio_UCAOLQIVFJ" value=""> <span>We can't make any valid conclusions, since this model does not pass assessment</span></label>
</div>
</div>
</div>
</section>
<section id="prediction-plots" class="level2" data-number="32.15">
<h2 data-number="32.15" class="anchored" data-anchor-id="prediction-plots"><span class="header-section-number">32.15</span> Prediction Plots</h2>
<p>So, wind direction and merganser relocation both matter. How much? And what direction are the effects?</p>
<p>We <em>need to know</em> these details to choose when it’s safest to swim!</p>
<div class="cell" data-layout-align="center" data-exercise="true">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">predict_response</span>(CSA_quasi,</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>          <span class="at">terms =</span> <span class="fu">c</span>(<span class="st">'OnshoreNNE'</span>, <span class="st">'BA'</span>)) <span class="sc">|&gt;</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Some of the focal terms are of type `character`. This may lead to
  unexpected results. It is recommended to convert these variables to
  factors before fitting the model.
  The following variables are of type character: `OnshoreNNE`</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Ignoring unknown labels:
• linetype : "BA"
• shape : "BA"</code></pre>
</div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="quasibinomial_files/figure-html/pred-plot-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="576"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="swimmers-action-items" class="level2" data-number="32.16">
<h2 data-number="32.16" class="anchored" data-anchor-id="swimmers-action-items"><span class="header-section-number">32.16</span> Swimmer’s Action Items</h2>
<p>Based on this, when would you feel safest swimming?</p>
<p>The <a href="https://crystallakewatershed.org/wp-content/uploads/2023/07/Swimmers-Itch-Brochure_2023.pdf">advice the Crystal Lake Watershed Association gives</a>, based at least partly on these results, is to avoid swimming after there has been an onshore (NNE) wind.</p>
<p>News articles have also reported that in 2023, <a href="https://www.recordpatriot.com/news/article/crystal-lake-swimmer-s-itch-cases-1-000-18210588.php">swimmer’s itch cases are WAY up after merganser relocations were banned to prevent avian flu spread</a>…</p>


<script type="webr-data">
eyJvcHRpb25zIjp7ImJhc2VVcmwiOiJodHRwczovL3dlYnIuci13YXNtLm9yZy92MC41LjQvIn0sInBhY2thZ2VzIjp7InBrZ3MiOlsiZXZhbHVhdGUiLCJrbml0ciIsImh0bWx0b29scyIsImRwbHlyIiwidGlkeXIiLCJyZWFkciIsInJlYWR4bCIsInN0cmluZ3IiLCJnZ3Bsb3QyIiwiZ2dmb3JtdWxhIiwibW9zYWljIiwiY2FyIiwiREhBUk1hIl0sInJlcG9zIjpbXX0sInJlbmRlcl9kZiI6ImRlZmF1bHQifQ==
</script>
<script type="ojs-module-contents">
eyJjb250ZW50cyI6W3siY2VsbE5hbWUiOiJ3ZWJyLXdpZGdldC03IiwiaW5saW5lIjpmYWxzZSwibWV0aG9kTmFtZSI6ImludGVycHJldFF1aWV0Iiwic291cmNlIjoie1xuICAvLyBXYWl0IGZvciBvdXRwdXQgdG8gYmUgd3JpdHRlbiB0byB0aGUgRE9NLCB0aGVuIHRyaWdnZXIgd2lkZ2V0IHJlbmRlcmluZ1xuICBhd2FpdCBfd2Vicl92YWx1ZV83O1xuICBpZiAod2luZG93LkhUTUxXaWRnZXRzKSB7XG4gICAgd2luZG93LkhUTUxXaWRnZXRzLnN0YXRpY1JlbmRlcigpO1xuICB9XG4gIGlmICh3aW5kb3cuUGFnZWRUYWJsZURvYykge1xuICAgIHdpbmRvdy5QYWdlZFRhYmxlRG9jLmluaXRBbGwoKTtcbiAgfVxufVxuIn0seyJjZWxsTmFtZSI6IndlYnItNyIsImlubGluZSI6ZmFsc2UsIm1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJzb3VyY2UiOiJ2aWV3b2YgX3dlYnJfZWRpdG9yXzcgPSB7XG4gIGNvbnN0IHsgV2ViUkV4ZXJjaXNlRWRpdG9yLCBiNjREZWNvZGUgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG4gIGNvbnN0IHNjcmlwdENvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBzY3JpcHRbdHlwZT1cXFwid2Vici03LWNvbnRlbnRzXFxcIl1gKS50ZXh0Q29udGVudDtcbiAgY29uc3QgYmxvY2sgPSBKU09OLnBhcnNlKGI2NERlY29kZShzY3JpcHRDb250ZW50KSk7XG5cbiAgLy8gRGVmYXVsdCBleGVyY2lzZSBjb25maWd1cmF0aW9uXG4gIGNvbnN0IG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKFxuICAgIHtcbiAgICAgIGlkOiBcIndlYnItNy1jb250ZW50c1wiLFxuICAgICAgZW52aXI6IGBleGVyY2lzZS1lbnYtJHtibG9jay5hdHRyLmV4ZXJjaXNlfWAsXG4gICAgICBlcnJvcjogZmFsc2UsXG4gICAgICBjYXB0aW9uOiAnRXhlcmNpc2UnLFxuICAgIH0sXG4gICAgYmxvY2suYXR0clxuICApO1xuXG4gIGNvbnN0IGVkaXRvciA9IG5ldyBXZWJSRXhlcmNpc2VFZGl0b3Iod2ViUk9qcy53ZWJSUHJvbWlzZSwgYmxvY2suY29kZSwgb3B0aW9ucyk7XG4gIHJldHVybiBlZGl0b3IuY29udGFpbmVyO1xufVxudmlld29mIF93ZWJyX3ZhbHVlXzcgPSB3ZWJST2pzLnByb2Nlc3MoX3dlYnJfZWRpdG9yXzcsIHt9KTtcbl93ZWJyX2ZlZWRiYWNrXzcgPSB7XG4gIGNvbnN0IHsgV2ViUkdyYWRlciB9ID0gd2luZG93Ll9leGVyY2lzZV9vanNfcnVudGltZTtcbiAgY29uc3QgZW1wdHlGZWVkYmFjayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gIGNvbnN0IGdyYWRlciA9IG5ldyBXZWJSR3JhZGVyKF93ZWJyX3ZhbHVlXzcuZXZhbHVhdG9yKTtcbiAgY29uc3QgZmVlZGJhY2sgPSBhd2FpdCBncmFkZXIuZ3JhZGVFeGVyY2lzZSgpO1xuICBpZiAoIWZlZWRiYWNrKSByZXR1cm4gZW1wdHlGZWVkYmFjaztcbiAgcmV0dXJuIGZlZWRiYWNrO1xufVxuIn0seyJjZWxsTmFtZSI6IndlYnItd2lkZ2V0LTYiLCJpbmxpbmUiOmZhbHNlLCJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQiLCJzb3VyY2UiOiJ7XG4gIC8vIFdhaXQgZm9yIG91dHB1dCB0byBiZSB3cml0dGVuIHRvIHRoZSBET00sIHRoZW4gdHJpZ2dlciB3aWRnZXQgcmVuZGVyaW5nXG4gIGF3YWl0IF93ZWJyX3ZhbHVlXzY7XG4gIGlmICh3aW5kb3cuSFRNTFdpZGdldHMpIHtcbiAgICB3aW5kb3cuSFRNTFdpZGdldHMuc3RhdGljUmVuZGVyKCk7XG4gIH1cbiAgaWYgKHdpbmRvdy5QYWdlZFRhYmxlRG9jKSB7XG4gICAgd2luZG93LlBhZ2VkVGFibGVEb2MuaW5pdEFsbCgpO1xuICB9XG59XG4ifSx7ImNlbGxOYW1lIjoid2Vici02IiwiaW5saW5lIjpmYWxzZSwibWV0aG9kTmFtZSI6ImludGVycHJldCIsInNvdXJjZSI6InZpZXdvZiBfd2Vicl9lZGl0b3JfNiA9IHtcbiAgY29uc3QgeyBXZWJSRXhlcmNpc2VFZGl0b3IsIGI2NERlY29kZSB9ID0gd2luZG93Ll9leGVyY2lzZV9vanNfcnVudGltZTtcbiAgY29uc3Qgc2NyaXB0Q29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYHNjcmlwdFt0eXBlPVxcXCJ3ZWJyLTYtY29udGVudHNcXFwiXWApLnRleHRDb250ZW50O1xuICBjb25zdCBibG9jayA9IEpTT04ucGFyc2UoYjY0RGVjb2RlKHNjcmlwdENvbnRlbnQpKTtcblxuICAvLyBEZWZhdWx0IGV4ZXJjaXNlIGNvbmZpZ3VyYXRpb25cbiAgY29uc3Qgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oXG4gICAge1xuICAgICAgaWQ6IFwid2Vici02LWNvbnRlbnRzXCIsXG4gICAgICBlbnZpcjogYGV4ZXJjaXNlLWVudi0ke2Jsb2NrLmF0dHIuZXhlcmNpc2V9YCxcbiAgICAgIGVycm9yOiBmYWxzZSxcbiAgICAgIGNhcHRpb246ICdFeGVyY2lzZScsXG4gICAgfSxcbiAgICBibG9jay5hdHRyXG4gICk7XG5cbiAgY29uc3QgZWRpdG9yID0gbmV3IFdlYlJFeGVyY2lzZUVkaXRvcih3ZWJST2pzLndlYlJQcm9taXNlLCBibG9jay5jb2RlLCBvcHRpb25zKTtcbiAgcmV0dXJuIGVkaXRvci5jb250YWluZXI7XG59XG52aWV3b2YgX3dlYnJfdmFsdWVfNiA9IHdlYlJPanMucHJvY2Vzcyhfd2Vicl9lZGl0b3JfNiwge30pO1xuX3dlYnJfZmVlZGJhY2tfNiA9IHtcbiAgY29uc3QgeyBXZWJSR3JhZGVyIH0gPSB3aW5kb3cuX2V4ZXJjaXNlX29qc19ydW50aW1lO1xuICBjb25zdCBlbXB0eUZlZWRiYWNrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cbiAgY29uc3QgZ3JhZGVyID0gbmV3IFdlYlJHcmFkZXIoX3dlYnJfdmFsdWVfNi5ldmFsdWF0b3IpO1xuICBjb25zdCBmZWVkYmFjayA9IGF3YWl0IGdyYWRlci5ncmFkZUV4ZXJjaXNlKCk7XG4gIGlmICghZmVlZGJhY2spIHJldHVybiBlbXB0eUZlZWRiYWNrO1xuICByZXR1cm4gZmVlZGJhY2s7XG59XG4ifSx7ImNlbGxOYW1lIjoid2Vici13aWRnZXQtNSIsImlubGluZSI6ZmFsc2UsIm1ldGhvZE5hbWUiOiJpbnRlcnByZXRRdWlldCIsInNvdXJjZSI6IntcbiAgLy8gV2FpdCBmb3Igb3V0cHV0IHRvIGJlIHdyaXR0ZW4gdG8gdGhlIERPTSwgdGhlbiB0cmlnZ2VyIHdpZGdldCByZW5kZXJpbmdcbiAgYXdhaXQgX3dlYnJfdmFsdWVfNTtcbiAgaWYgKHdpbmRvdy5IVE1MV2lkZ2V0cykge1xuICAgIHdpbmRvdy5IVE1MV2lkZ2V0cy5zdGF0aWNSZW5kZXIoKTtcbiAgfVxuICBpZiAod2luZG93LlBhZ2VkVGFibGVEb2MpIHtcbiAgICB3aW5kb3cuUGFnZWRUYWJsZURvYy5pbml0QWxsKCk7XG4gIH1cbn1cbiJ9LHsiY2VsbE5hbWUiOiJ3ZWJyLTUiLCJpbmxpbmUiOmZhbHNlLCJtZXRob2ROYW1lIjoiaW50ZXJwcmV0Iiwic291cmNlIjoidmlld29mIF93ZWJyX2VkaXRvcl81ID0ge1xuICBjb25zdCB7IFdlYlJFeGVyY2lzZUVkaXRvciwgYjY0RGVjb2RlIH0gPSB3aW5kb3cuX2V4ZXJjaXNlX29qc19ydW50aW1lO1xuICBjb25zdCBzY3JpcHRDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihgc2NyaXB0W3R5cGU9XFxcIndlYnItNS1jb250ZW50c1xcXCJdYCkudGV4dENvbnRlbnQ7XG4gIGNvbnN0IGJsb2NrID0gSlNPTi5wYXJzZShiNjREZWNvZGUoc2NyaXB0Q29udGVudCkpO1xuXG4gIC8vIERlZmF1bHQgZXhlcmNpc2UgY29uZmlndXJhdGlvblxuICBjb25zdCBvcHRpb25zID0gT2JqZWN0LmFzc2lnbihcbiAgICB7XG4gICAgICBpZDogXCJ3ZWJyLTUtY29udGVudHNcIixcbiAgICAgIGVudmlyOiBgZXhlcmNpc2UtZW52LSR7YmxvY2suYXR0ci5leGVyY2lzZX1gLFxuICAgICAgZXJyb3I6IGZhbHNlLFxuICAgICAgY2FwdGlvbjogJ0V4ZXJjaXNlJyxcbiAgICB9LFxuICAgIGJsb2NrLmF0dHJcbiAgKTtcblxuICBjb25zdCBlZGl0b3IgPSBuZXcgV2ViUkV4ZXJjaXNlRWRpdG9yKHdlYlJPanMud2ViUlByb21pc2UsIGJsb2NrLmNvZGUsIG9wdGlvbnMpO1xuICByZXR1cm4gZWRpdG9yLmNvbnRhaW5lcjtcbn1cbnZpZXdvZiBfd2Vicl92YWx1ZV81ID0gd2ViUk9qcy5wcm9jZXNzKF93ZWJyX2VkaXRvcl81LCB7fSk7XG5fd2Vicl9mZWVkYmFja181ID0ge1xuICBjb25zdCB7IFdlYlJHcmFkZXIgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG4gIGNvbnN0IGVtcHR5RmVlZGJhY2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuICBjb25zdCBncmFkZXIgPSBuZXcgV2ViUkdyYWRlcihfd2Vicl92YWx1ZV81LmV2YWx1YXRvcik7XG4gIGNvbnN0IGZlZWRiYWNrID0gYXdhaXQgZ3JhZGVyLmdyYWRlRXhlcmNpc2UoKTtcbiAgaWYgKCFmZWVkYmFjaykgcmV0dXJuIGVtcHR5RmVlZGJhY2s7XG4gIHJldHVybiBmZWVkYmFjaztcbn1cbiJ9LHsiY2VsbE5hbWUiOiJ3ZWJyLXdpZGdldC00IiwiaW5saW5lIjpmYWxzZSwibWV0aG9kTmFtZSI6ImludGVycHJldFF1aWV0Iiwic291cmNlIjoie1xuICAvLyBXYWl0IGZvciBvdXRwdXQgdG8gYmUgd3JpdHRlbiB0byB0aGUgRE9NLCB0aGVuIHRyaWdnZXIgd2lkZ2V0IHJlbmRlcmluZ1xuICBhd2FpdCBfd2Vicl92YWx1ZV80O1xuICBpZiAod2luZG93LkhUTUxXaWRnZXRzKSB7XG4gICAgd2luZG93LkhUTUxXaWRnZXRzLnN0YXRpY1JlbmRlcigpO1xuICB9XG4gIGlmICh3aW5kb3cuUGFnZWRUYWJsZURvYykge1xuICAgIHdpbmRvdy5QYWdlZFRhYmxlRG9jLmluaXRBbGwoKTtcbiAgfVxufVxuIn0seyJjZWxsTmFtZSI6IndlYnItNCIsImlubGluZSI6ZmFsc2UsIm1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJzb3VyY2UiOiJ2aWV3b2YgX3dlYnJfZWRpdG9yXzQgPSB7XG4gIGNvbnN0IHsgV2ViUkV4ZXJjaXNlRWRpdG9yLCBiNjREZWNvZGUgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG4gIGNvbnN0IHNjcmlwdENvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBzY3JpcHRbdHlwZT1cXFwid2Vici00LWNvbnRlbnRzXFxcIl1gKS50ZXh0Q29udGVudDtcbiAgY29uc3QgYmxvY2sgPSBKU09OLnBhcnNlKGI2NERlY29kZShzY3JpcHRDb250ZW50KSk7XG5cbiAgLy8gRGVmYXVsdCBleGVyY2lzZSBjb25maWd1cmF0aW9uXG4gIGNvbnN0IG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKFxuICAgIHtcbiAgICAgIGlkOiBcIndlYnItNC1jb250ZW50c1wiLFxuICAgICAgZW52aXI6IGBleGVyY2lzZS1lbnYtJHtibG9jay5hdHRyLmV4ZXJjaXNlfWAsXG4gICAgICBlcnJvcjogZmFsc2UsXG4gICAgICBjYXB0aW9uOiAnRXhlcmNpc2UnLFxuICAgIH0sXG4gICAgYmxvY2suYXR0clxuICApO1xuXG4gIGNvbnN0IGVkaXRvciA9IG5ldyBXZWJSRXhlcmNpc2VFZGl0b3Iod2ViUk9qcy53ZWJSUHJvbWlzZSwgYmxvY2suY29kZSwgb3B0aW9ucyk7XG4gIHJldHVybiBlZGl0b3IuY29udGFpbmVyO1xufVxudmlld29mIF93ZWJyX3ZhbHVlXzQgPSB3ZWJST2pzLnByb2Nlc3MoX3dlYnJfZWRpdG9yXzQsIHt9KTtcbl93ZWJyX2ZlZWRiYWNrXzQgPSB7XG4gIGNvbnN0IHsgV2ViUkdyYWRlciB9ID0gd2luZG93Ll9leGVyY2lzZV9vanNfcnVudGltZTtcbiAgY29uc3QgZW1wdHlGZWVkYmFjayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gIGNvbnN0IGdyYWRlciA9IG5ldyBXZWJSR3JhZGVyKF93ZWJyX3ZhbHVlXzQuZXZhbHVhdG9yKTtcbiAgY29uc3QgZmVlZGJhY2sgPSBhd2FpdCBncmFkZXIuZ3JhZGVFeGVyY2lzZSgpO1xuICBpZiAoIWZlZWRiYWNrKSByZXR1cm4gZW1wdHlGZWVkYmFjaztcbiAgcmV0dXJuIGZlZWRiYWNrO1xufVxuIn0seyJjZWxsTmFtZSI6IndlYnItd2lkZ2V0LTMiLCJpbmxpbmUiOmZhbHNlLCJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQiLCJzb3VyY2UiOiJ7XG4gIC8vIFdhaXQgZm9yIG91dHB1dCB0byBiZSB3cml0dGVuIHRvIHRoZSBET00sIHRoZW4gdHJpZ2dlciB3aWRnZXQgcmVuZGVyaW5nXG4gIGF3YWl0IF93ZWJyX3ZhbHVlXzM7XG4gIGlmICh3aW5kb3cuSFRNTFdpZGdldHMpIHtcbiAgICB3aW5kb3cuSFRNTFdpZGdldHMuc3RhdGljUmVuZGVyKCk7XG4gIH1cbiAgaWYgKHdpbmRvdy5QYWdlZFRhYmxlRG9jKSB7XG4gICAgd2luZG93LlBhZ2VkVGFibGVEb2MuaW5pdEFsbCgpO1xuICB9XG59XG4ifSx7ImNlbGxOYW1lIjoid2Vici0zIiwiaW5saW5lIjpmYWxzZSwibWV0aG9kTmFtZSI6ImludGVycHJldCIsInNvdXJjZSI6InZpZXdvZiBfd2Vicl9lZGl0b3JfMyA9IHtcbiAgY29uc3QgeyBXZWJSRXhlcmNpc2VFZGl0b3IsIGI2NERlY29kZSB9ID0gd2luZG93Ll9leGVyY2lzZV9vanNfcnVudGltZTtcbiAgY29uc3Qgc2NyaXB0Q29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYHNjcmlwdFt0eXBlPVxcXCJ3ZWJyLTMtY29udGVudHNcXFwiXWApLnRleHRDb250ZW50O1xuICBjb25zdCBibG9jayA9IEpTT04ucGFyc2UoYjY0RGVjb2RlKHNjcmlwdENvbnRlbnQpKTtcblxuICAvLyBEZWZhdWx0IGV4ZXJjaXNlIGNvbmZpZ3VyYXRpb25cbiAgY29uc3Qgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oXG4gICAge1xuICAgICAgaWQ6IFwid2Vici0zLWNvbnRlbnRzXCIsXG4gICAgICBlbnZpcjogYGV4ZXJjaXNlLWVudi0ke2Jsb2NrLmF0dHIuZXhlcmNpc2V9YCxcbiAgICAgIGVycm9yOiBmYWxzZSxcbiAgICAgIGNhcHRpb246ICdFeGVyY2lzZScsXG4gICAgfSxcbiAgICBibG9jay5hdHRyXG4gICk7XG5cbiAgY29uc3QgZWRpdG9yID0gbmV3IFdlYlJFeGVyY2lzZUVkaXRvcih3ZWJST2pzLndlYlJQcm9taXNlLCBibG9jay5jb2RlLCBvcHRpb25zKTtcbiAgcmV0dXJuIGVkaXRvci5jb250YWluZXI7XG59XG52aWV3b2YgX3dlYnJfdmFsdWVfMyA9IHdlYlJPanMucHJvY2Vzcyhfd2Vicl9lZGl0b3JfMywge30pO1xuX3dlYnJfZmVlZGJhY2tfMyA9IHtcbiAgY29uc3QgeyBXZWJSR3JhZGVyIH0gPSB3aW5kb3cuX2V4ZXJjaXNlX29qc19ydW50aW1lO1xuICBjb25zdCBlbXB0eUZlZWRiYWNrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cbiAgY29uc3QgZ3JhZGVyID0gbmV3IFdlYlJHcmFkZXIoX3dlYnJfdmFsdWVfMy5ldmFsdWF0b3IpO1xuICBjb25zdCBmZWVkYmFjayA9IGF3YWl0IGdyYWRlci5ncmFkZUV4ZXJjaXNlKCk7XG4gIGlmICghZmVlZGJhY2spIHJldHVybiBlbXB0eUZlZWRiYWNrO1xuICByZXR1cm4gZmVlZGJhY2s7XG59XG4ifSx7ImNlbGxOYW1lIjoid2Vici13aWRnZXQtMiIsImlubGluZSI6ZmFsc2UsIm1ldGhvZE5hbWUiOiJpbnRlcnByZXRRdWlldCIsInNvdXJjZSI6IntcbiAgLy8gV2FpdCBmb3Igb3V0cHV0IHRvIGJlIHdyaXR0ZW4gdG8gdGhlIERPTSwgdGhlbiB0cmlnZ2VyIHdpZGdldCByZW5kZXJpbmdcbiAgYXdhaXQgX3dlYnJfdmFsdWVfMjtcbiAgaWYgKHdpbmRvdy5IVE1MV2lkZ2V0cykge1xuICAgIHdpbmRvdy5IVE1MV2lkZ2V0cy5zdGF0aWNSZW5kZXIoKTtcbiAgfVxuICBpZiAod2luZG93LlBhZ2VkVGFibGVEb2MpIHtcbiAgICB3aW5kb3cuUGFnZWRUYWJsZURvYy5pbml0QWxsKCk7XG4gIH1cbn1cbiJ9LHsiY2VsbE5hbWUiOiJ3ZWJyLTIiLCJpbmxpbmUiOmZhbHNlLCJtZXRob2ROYW1lIjoiaW50ZXJwcmV0Iiwic291cmNlIjoidmlld29mIF93ZWJyX2VkaXRvcl8yID0ge1xuICBjb25zdCB7IFdlYlJFeGVyY2lzZUVkaXRvciwgYjY0RGVjb2RlIH0gPSB3aW5kb3cuX2V4ZXJjaXNlX29qc19ydW50aW1lO1xuICBjb25zdCBzY3JpcHRDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihgc2NyaXB0W3R5cGU9XFxcIndlYnItMi1jb250ZW50c1xcXCJdYCkudGV4dENvbnRlbnQ7XG4gIGNvbnN0IGJsb2NrID0gSlNPTi5wYXJzZShiNjREZWNvZGUoc2NyaXB0Q29udGVudCkpO1xuXG4gIC8vIERlZmF1bHQgZXhlcmNpc2UgY29uZmlndXJhdGlvblxuICBjb25zdCBvcHRpb25zID0gT2JqZWN0LmFzc2lnbihcbiAgICB7XG4gICAgICBpZDogXCJ3ZWJyLTItY29udGVudHNcIixcbiAgICAgIGVudmlyOiBgZXhlcmNpc2UtZW52LSR7YmxvY2suYXR0ci5leGVyY2lzZX1gLFxuICAgICAgZXJyb3I6IGZhbHNlLFxuICAgICAgY2FwdGlvbjogJ0V4ZXJjaXNlJyxcbiAgICB9LFxuICAgIGJsb2NrLmF0dHJcbiAgKTtcblxuICBjb25zdCBlZGl0b3IgPSBuZXcgV2ViUkV4ZXJjaXNlRWRpdG9yKHdlYlJPanMud2ViUlByb21pc2UsIGJsb2NrLmNvZGUsIG9wdGlvbnMpO1xuICByZXR1cm4gZWRpdG9yLmNvbnRhaW5lcjtcbn1cbnZpZXdvZiBfd2Vicl92YWx1ZV8yID0gd2ViUk9qcy5wcm9jZXNzKF93ZWJyX2VkaXRvcl8yLCB7fSk7XG5fd2Vicl9mZWVkYmFja18yID0ge1xuICBjb25zdCB7IFdlYlJHcmFkZXIgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG4gIGNvbnN0IGVtcHR5RmVlZGJhY2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuICBjb25zdCBncmFkZXIgPSBuZXcgV2ViUkdyYWRlcihfd2Vicl92YWx1ZV8yLmV2YWx1YXRvcik7XG4gIGNvbnN0IGZlZWRiYWNrID0gYXdhaXQgZ3JhZGVyLmdyYWRlRXhlcmNpc2UoKTtcbiAgaWYgKCFmZWVkYmFjaykgcmV0dXJuIGVtcHR5RmVlZGJhY2s7XG4gIHJldHVybiBmZWVkYmFjaztcbn1cbiJ9LHsiY2VsbE5hbWUiOiJ3ZWJyLXByZWx1ZGUiLCJpbmxpbmUiOmZhbHNlLCJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQiLCJzb3VyY2UiOiJ3ZWJST2pzID0ge1xuICBjb25zdCB7IFdlYlIsIENoYW5uZWxUeXBlIH0gPSB3aW5kb3cuX2V4ZXJjaXNlX29qc19ydW50aW1lLldlYlI7XG4gIGNvbnN0IHtcbiAgICBXZWJSRXZhbHVhdG9yLFxuICAgIFdlYlJFbnZpcm9ubWVudE1hbmFnZXIsXG4gICAgc2V0dXBSLFxuICAgIGI2NERlY29kZSxcbiAgICBjb2xsYXBzZVBhdGhcbiAgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG5cbiAgY29uc3Qgc3RhdHVzQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJleGVyY2lzZS1sb2FkaW5nLXN0YXR1c1wiKTtcbiAgY29uc3QgaW5kaWNhdG9yQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJleGVyY2lzZS1sb2FkaW5nLWluZGljYXRvclwiKTtcbiAgaW5kaWNhdG9yQ29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoXCJkLW5vbmVcIik7XG5cbiAgbGV0IHN0YXR1c1RleHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpXG4gIHN0YXR1c1RleHQuY2xhc3NMaXN0ID0gXCJleGVyY2lzZS1sb2FkaW5nLWRldGFpbHNcIjtcbiAgc3RhdHVzVGV4dCA9IHN0YXR1c0NvbnRhaW5lci5hcHBlbmRDaGlsZChzdGF0dXNUZXh0KTtcbiAgc3RhdHVzVGV4dC50ZXh0Q29udGVudCA9IGBJbml0aWFsaXNlYDtcblxuICAvLyBIb2lzdCBpbmRpY2F0b3Igb3V0IGZyb20gZmluYWwgc2xpZGUgd2hlbiBydW5uaW5nIHVuZGVyIHJldmVhbFxuICBjb25zdCByZXZlYWxTdGF0dXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnJldmVhbCAuZXhlcmNpc2UtbG9hZGluZy1pbmRpY2F0b3JcIik7XG4gIGlmIChyZXZlYWxTdGF0dXMpIHtcbiAgICByZXZlYWxTdGF0dXMucmVtb3ZlKCk7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5yZXZlYWwgPiAuc2xpZGVzXCIpLmFwcGVuZENoaWxkKHJldmVhbFN0YXR1cyk7XG4gIH1cblxuICAvLyBNYWtlIGFueSByZXZlYWwgc2xpZGVzIHdpdGggbGl2ZSBjZWxscyBzY3JvbGxhYmxlXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucmV2ZWFsIC5leGVyY2lzZS1jZWxsXCIpLmZvckVhY2goKGVsKSA9PiB7XG4gICAgZWwuY2xvc2VzdCgnc2VjdGlvbi5zbGlkZScpLmNsYXNzTGlzdC5hZGQoXCJzY3JvbGxhYmxlXCIpO1xuICB9KVxuXG4gIC8vIHdlYlIgc3VwcGxlbWVudGFsIGRhdGEgYW5kIG9wdGlvbnNcbiAgY29uc3QgZGF0YUNvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBzY3JpcHRbdHlwZT1cXFwid2Vici1kYXRhXFxcIl1gKS50ZXh0Q29udGVudDtcbiAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UoYjY0RGVjb2RlKGRhdGFDb250ZW50KSk7XG5cbiAgLy8gR3JhYiBsaXN0IG9mIHJlc291cmNlcyB0byBiZSBkb3dubG9hZGVkXG4gIGNvbnN0IGZpbGVzQ29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYHNjcmlwdFt0eXBlPVxcXCJ2ZnMtZmlsZVxcXCJdYCkudGV4dENvbnRlbnQ7XG4gIGNvbnN0IGZpbGVzID0gSlNPTi5wYXJzZShiNjREZWNvZGUoZmlsZXNDb250ZW50KSk7XG5cbiAgLy8gVXNlIFBvc3RNZXNzYWdlIGNoYW5uZWwgZm9yIGFzeW5jIGNvbW11bmljYXRpb25cbiAgLy8gV2UgZG8gbm90IGV4cGVjdCB0byB0YWtlIG5lc3RlZCBwcm9tcHQgaW5wdXQgaW4gUXVhcnRvIExpdmUgY2VsbHNcbiAgZGF0YS5vcHRpb25zLmNoYW5uZWxUeXBlID0gQ2hhbm5lbFR5cGUuUG9zdE1lc3NhZ2U7XG5cbiAgLy8gSW5pdGlhbGlzZSB3ZWJSIGFuZCBzZXR1cCBmb3IgUiBjb2RlIGV2YWx1YXRpb25cbiAgbGV0IHdlYlJQcm9taXNlID0gKGFzeW5jICh3ZWJSKSA9PiB7XG4gICAgc3RhdHVzVGV4dC50ZXh0Q29udGVudCA9IGBEb3dubG9hZGluZyB3ZWJSYDtcbiAgICBhd2FpdCB3ZWJSLmluaXQoKTtcblxuICAgIC8vIEluc3RhbGwgcHJvdmlkZWQgbGlzdCBvZiBwYWNrYWdlc1xuICAgIC8vIEVuc3VyZSB3ZWJSIGRlZmF1bHQgcmVwbyBpcyBpbmNsdWRlZFxuICAgIGRhdGEucGFja2FnZXMucmVwb3MucHVzaChcImh0dHBzOi8vcmVwby5yLXdhc20ub3JnXCIpXG4gICAgYXdhaXQgZGF0YS5wYWNrYWdlcy5wa2dzLm1hcCgocGtnKSA9PiAoKSA9PiB7XG4gICAgICBzdGF0dXNUZXh0LnRleHRDb250ZW50ID0gYERvd25sb2FkaW5nIHBhY2thZ2U6ICR7cGtnfWA7XG4gICAgICByZXR1cm4gd2ViUi5ldmFsUlZvaWQoYFxuICAgICAgICB3ZWJyOjppbnN0YWxsKHBrZywgcmVwb3MgPSByZXBvcylcbiAgICAgICAgbGlicmFyeShwa2csIGNoYXJhY3Rlci5vbmx5ID0gVFJVRSlcbiAgICAgIGAsIHsgZW52OiB7XG4gICAgICAgIHBrZzogcGtnLFxuICAgICAgICByZXBvczogZGF0YS5wYWNrYWdlcy5yZXBvcyxcbiAgICAgIH19KTtcbiAgICB9KS5yZWR1Y2UoKGN1ciwgbmV4dCkgPT4gY3VyLnRoZW4obmV4dCksIFByb21pc2UucmVzb2x2ZSgpKTtcblxuICAgIC8vIERvd25sb2FkIGFuZCBpbnN0YWxsIHJlc291cmNlc1xuICAgIGF3YWl0IGZpbGVzLm1hcCgoZmlsZSkgPT4gYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbmFtZSA9IGZpbGUuc3Vic3RyaW5nKGZpbGUubGFzdEluZGV4T2YoJy8nKSArIDEpO1xuICAgICAgc3RhdHVzVGV4dC50ZXh0Q29udGVudCA9IGBEb3dubG9hZGluZyByZXNvdXJjZTogJHtuYW1lfWA7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGZpbGUpO1xuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENhbid0IGRvd25sb2FkIFxcYCR7ZmlsZX1cXGAuIEVycm9yICR7cmVzcG9uc2Uuc3RhdHVzfTogXCIke3Jlc3BvbnNlLnN0YXR1c1RleHR9XCIuYCk7XG4gICAgICB9XG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuYXJyYXlCdWZmZXIoKTtcblxuICAgICAgLy8gU3RvcmUgVVJMcyBpbiB0aGUgY3dkIHdpdGhvdXQgYW55IHN1YmRpcmVjdG9yeSBzdHJ1Y3R1cmVcbiAgICAgIGlmIChmaWxlLmluY2x1ZGVzKFwiOi8vXCIpKSB7XG4gICAgICAgIGZpbGUgPSBuYW1lO1xuICAgICAgfVxuXG4gICAgICAvLyBDb2xsYXBzZSBoaWdoZXIgZGlyZWN0b3J5IHN0cnVjdHVyZVxuICAgICAgZmlsZSA9IGNvbGxhcHNlUGF0aChmaWxlKTtcblxuICAgICAgLy8gQ3JlYXRlIGRpcmVjdG9yeSB0cmVlLCBpZ25vcmluZyBcImRpcmVjdG9yeSBleGlzdHNcIiBWRlMgZXJyb3JzXG4gICAgICBjb25zdCBwYXJ0cyA9IGZpbGUuc3BsaXQoJy8nKS5zbGljZSgwLCAtMSk7XG4gICAgICBsZXQgcGF0aCA9ICcnO1xuICAgICAgd2hpbGUgKHBhcnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgcGF0aCArPSBwYXJ0cy5zaGlmdCgpICsgJy8nO1xuICAgICAgICBjb25zdCBhbmFseXNpcyA9IGF3YWl0IHdlYlIuRlMuYW5hbHl6ZVBhdGgocGF0aCk7XG4gICAgICAgIGlmICghYW5hbHlzaXMuZXhpc3RzKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHdlYlIuRlMubWtkaXIocGF0aCk7XG4gICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGaWxlc3lzdGVtIEVycm9yOiBcIiR7ZS5tZXNzYWdlfVwiLmApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBXcml0ZSB0aGlzIGZpbGUgdG8gdGhlIFZGU1xuICAgICAgcmV0dXJuIGF3YWl0IHdlYlIuRlMud3JpdGVGaWxlKGZpbGUsIG5ldyBVaW50OEFycmF5KGRhdGEpKTtcbiAgICB9KS5yZWR1Y2UoKGN1ciwgbmV4dCkgPT4gY3VyLnRoZW4obmV4dCksIFByb21pc2UucmVzb2x2ZSgpKTtcblxuICAgIHN0YXR1c1RleHQudGV4dENvbnRlbnQgPSBgSW5zdGFsbGluZyB3ZWJSIHNoaW1zYDtcbiAgICBhd2FpdCB3ZWJSLmV2YWxSVm9pZChgd2Vicjo6c2hpbV9pbnN0YWxsKClgKTtcblxuICAgIHN0YXR1c1RleHQudGV4dENvbnRlbnQgPSBgV2ViUiBlbnZpcm9ubWVudCBzZXR1cGA7XG4gICAgYXdhaXQgc2V0dXBSKHdlYlIsIGRhdGEpO1xuXG4gICAgc3RhdHVzVGV4dC5yZW1vdmUoKTtcbiAgICBpZiAoc3RhdHVzQ29udGFpbmVyLmNoaWxkcmVuLmxlbmd0aCA9PSAwKSB7XG4gICAgICBzdGF0dXNDb250YWluZXIucGFyZW50Tm9kZS5yZW1vdmUoKTtcbiAgICB9XG4gICAgcmV0dXJuIHdlYlI7XG4gIH0pKG5ldyBXZWJSKGRhdGEub3B0aW9ucykpO1xuXG4gIC8vIEtlZXAgdHJhY2sgb2YgaW5pdGlhbCBPSlMgYmxvY2sgcmVuZGVyXG4gIGNvbnN0IHJlbmRlcmVkT2pzID0ge307XG5cbiAgY29uc3QgcHJvY2VzcyA9IGFzeW5jIChjb250ZXh0LCBpbnB1dHMpID0+IHtcbiAgICBjb25zdCB3ZWJSID0gYXdhaXQgd2ViUlByb21pc2U7XG4gICAgY29uc3QgZXZhbHVhdG9yID0gbmV3IFdlYlJFdmFsdWF0b3Iod2ViUiwgY29udGV4dClcbiAgICBhd2FpdCBldmFsdWF0b3IucHJvY2VzcyhpbnB1dHMpO1xuICAgIHJldHVybiBldmFsdWF0b3IuY29udGFpbmVyO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBwcm9jZXNzLFxuICAgIHdlYlJQcm9taXNlLFxuICAgIHJlbmRlcmVkT2pzLFxuICB9O1xufVxuIn1dfQ==
</script>
<div id="exercise-loading-indicator" class="exercise-loading-indicator d-none d-flex align-items-center gap-2">
<div id="exercise-loading-status" class="d-flex gap-2">

</div>
<div class="spinner-grow spinner-grow-sm">

</div>
</div>
<script type="vfs-file">
WyJkYXRhL2hlaWdodHMuZHRhIiwiZGF0YS9ncmF0aXR1ZGUtZXhwZXJpbWVudC5jc3YiLCJkYXRhL01hbW1hbE1ldGFib2xpY1JhdGVzLmNzdiIsImRhdGEvZWxlcGhhbnRTdXJ2ZXkuY3N2IiwiZGF0YS9lYm9sYS1XQVNILmNzdiIsImRhdGEvZmlzaC5jc3YiLCJkYXRhL3VuaXZlcnNpdHlfdGVhY2hlcnMuY3N2IiwiZGF0YS8xRC1NZW1vcnkgTmFpdmUueGxzeCIsImRhdGEvcHdkLmNzdiIsImRhdGEvQ1NBQWxsZGF0YS54bHN4IiwiZGF0YS9IYURpdmVQYXJhbWV0ZXJzLmNzdiIsImRhdGEvRmxpbnRXYXRlclRlc3RKYW5NYXIyMDE2LmNzdiIsImRhdGEvUHJvZkV2YWx0bnNCZWF1dHlQdWJsaWMuY3N2IiwiZGF0YS9FSUFwcm9wZGF0YS5jc3YiLCJkYXRhL2JyaWRnZXMuY3N2IiwiZGF0YS96c2hhbC5jc3YiLCJkYXRhL2dhcG1pbmRlcl9jbGVhbi5jc3YiLCJkYXRhL2Zyb2ctYWJub3JtYWxpdGllcy5jc3YiLCJkYXRhL2Jvbm9ib19mYWNlcy5jc3YiLCJkYXRhL2JlZS12aXJ1cy5jc3YiXQ==
</script>
</section>

</main> <!-- /main -->
<script>

/* update total correct if #webex-total_correct exists */
update_total_correct = function() {
  console.log("webex: update total_correct");

  var t = document.getElementsByClassName("webex-total_correct");
  for (var i = 0; i < t.length; i++) {
    p = t[i].parentElement;
    var correct = p.getElementsByClassName("webex-correct").length;
    var solvemes = p.getElementsByClassName("webex-solveme").length;
    var radiogroups = p.getElementsByClassName("webex-radiogroup").length;
    var selects = p.getElementsByClassName("webex-select").length;

    t[i].innerHTML = correct + " of " + (solvemes + radiogroups + selects) + " correct";
  }
}

/* webex-solution button toggling function */
b_func = function() {
  console.log("webex: toggle hide");

  var cl = this.parentElement.classList;
  if (cl.contains('open')) {
    cl.remove("open");
  } else {
    cl.add("open");
  }
}

/* check answers */
check_func = function() {
  console.log("webex: check answers");

  var cl = this.parentElement.classList;
  if (cl.contains('unchecked')) {
    cl.remove("unchecked");
    this.innerHTML = "Hide Answers";
  } else {
    cl.add("unchecked");
    this.innerHTML = "Show Answers";
  }
}

/* function for checking solveme answers */
solveme_func = function(e) {
  console.log("webex: check solveme");

  var real_answers = JSON.parse(this.dataset.answer);
  var my_answer = this.value;
  var cl = this.classList;
  if (cl.contains("ignorecase")) {
    my_answer = my_answer.toLowerCase();
  }
  if (cl.contains("nospaces")) {
    my_answer = my_answer.replace(/ /g, "")
  }

  if (my_answer == "") {
    cl.remove("webex-correct");
    cl.remove("webex-incorrect");
  } else if (real_answers.includes(my_answer)) {
    cl.add("webex-correct");
    cl.remove("webex-incorrect");
  } else {
    cl.add("webex-incorrect");
    cl.remove("webex-correct");
  }

  // match numeric answers within a specified tolerance
  if(this.dataset.tol > 0){
    var tol = JSON.parse(this.dataset.tol);
    var matches = real_answers.map(x => Math.abs(x - my_answer) < tol)
    if (matches.reduce((a, b) => a + b, 0) > 0) {
      cl.add("webex-correct");
    } else {
      cl.remove("webex-correct");
    }
  }

  // added regex bit
  if (cl.contains("regex")){
    answer_regex = RegExp(real_answers.join("|"))
    if (answer_regex.test(my_answer)) {
      cl.add("webex-correct");
    }
  }

  update_total_correct();
}

/* function for checking select answers */
select_func = function(e) {
  console.log("webex: check select");

  var cl = this.classList

  /* add style */
  cl.remove("webex-incorrect");
  cl.remove("webex-correct");
  if (this.value == "answer") {
    cl.add("webex-correct");
  } else if (this.value != "blank") {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

/* function for checking radiogroups answers */
radiogroups_func = function(e) {
  console.log("webex: check radiogroups");

  var checked_button = document.querySelector('input[name=' + this.id + ']:checked');
  var cl = checked_button.parentElement.classList;
  var labels = checked_button.parentElement.parentElement.children;

  /* get rid of styles */
  for (i = 0; i < labels.length; i++) {
    labels[i].classList.remove("webex-incorrect");
    labels[i].classList.remove("webex-correct");
  }

  /* add style */
  if (checked_button.value == "answer") {
    cl.add("webex-correct");
  } else {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

window.onload = function() {
  console.log("webex onload");
  /* set up solution buttons */
  var buttons = document.getElementsByTagName("button");

  for (var i = 0; i < buttons.length; i++) {
    if (buttons[i].parentElement.classList.contains('webex-solution')) {
      buttons[i].onclick = b_func;
    }
  }

  var check_sections = document.getElementsByClassName("webex-check");
  console.log("check:", check_sections.length);
  for (var i = 0; i < check_sections.length; i++) {
    check_sections[i].classList.add("unchecked");

    let btn = document.createElement("button");
    btn.innerHTML = "Show Answers";
    btn.classList.add("webex-check-button");
    btn.onclick = check_func;
    check_sections[i].appendChild(btn);

    let spn = document.createElement("span");
    spn.classList.add("webex-total_correct");
    check_sections[i].appendChild(spn);
  }

  /* set up webex-solveme inputs */
  var solveme = document.getElementsByClassName("webex-solveme");

  for (var i = 0; i < solveme.length; i++) {
    /* make sure input boxes don't auto-anything */
    solveme[i].setAttribute("autocomplete","off");
    solveme[i].setAttribute("autocorrect", "off");
    solveme[i].setAttribute("autocapitalize", "off");
    solveme[i].setAttribute("spellcheck", "false");
    solveme[i].value = "";

    /* adjust answer for ignorecase or nospaces */
    var cl = solveme[i].classList;
    var real_answer = solveme[i].dataset.answer;
    if (cl.contains("ignorecase")) {
      real_answer = real_answer.toLowerCase();
    }
    if (cl.contains("nospaces")) {
      real_answer = real_answer.replace(/ /g, "");
    }
    solveme[i].dataset.answer = real_answer;

    /* attach checking function */
    solveme[i].onkeyup = solveme_func;
    solveme[i].onchange = solveme_func;

    solveme[i].insertAdjacentHTML("afterend", " <span class='webex-icon'></span>")
  }

  /* set up radiogroups */
  var radiogroups = document.getElementsByClassName("webex-radiogroup");
  for (var i = 0; i < radiogroups.length; i++) {
    radiogroups[i].onchange = radiogroups_func;
  }

  /* set up selects */
  var selects = document.getElementsByClassName("webex-select");
  for (var i = 0; i < selects.length; i++) {
    selects[i].onchange = select_func;
    selects[i].insertAdjacentHTML("afterend", " <span class='webex-icon'></span>")
  }

  update_total_correct();
}

</script>
<script type="ojs-module-contents">
eyJjb250ZW50cyI6W119
</script>
<script type="module">
if (window.location.protocol === "file:") { alert("The OJS runtime does not work with file:// URLs. Please use a web server to view this document."); }
window._ojs.paths.runtimeToDoc = "../..";
window._ojs.paths.runtimeToRoot = "../..";
window._ojs.paths.docToRoot = "";
window._ojs.selfContained = false;
window._ojs.runtime.interpretFromScriptTags();
</script>
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./zi-od.html" class="pagination-link" aria-label="Zero Inflation for Overdispersed Counts">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">31</span>&nbsp; <span class="chapter-title">Zero Inflation for Overdispersed Counts</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./beta.html" class="pagination-link" aria-label="Models for data bounded between 0 and 1">
        <span class="nav-page-text"><span class="chapter-number">33</span>&nbsp; <span class="chapter-title">Models for data bounded between 0 and 1</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
    <a class="nav-link" href="./cclicense.html">
<p>License</p>
</a>
  </li>  
</ul>
    <div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/stacyderuiter/data545-tutorials/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li><li><a href="https://github.com/stacyderuiter/data545-tutorials/edit/main/quasibinomial.qmd" class="toc-action"><i class="bi empty"></i>Edit this page</a></li></ul></div></div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>